/** Penguin Diner, 2dplay and 2dplay.com are copyright and intellectual property of Bigwig Media Ltd, a UK registered company. **/
var Config={gameWidth:600,gameHeight:400,trackHighscore:!1,advertisePD2:!1,logoURL:"",isWhiteLabel:!1,initialScreen:"HomeScreen",initialScreenArgs:[1]},Sprite=PIXI.Sprite;function preloadAssets(t,e){PIXI.Loader.shared.add("images0","assets/images/images0@2x.json"),PIXI.Loader.shared.add("images1","assets/images/images1@2x.json"),PIXI.Loader.shared.add("images2","assets/images/images2@2x.json"),PIXI.Loader.shared.add("images3","assets/images/images3@2x.json"),PIXI.Loader.shared.add("images4","assets/images/images4@2x.json"),PIXI.Loader.shared.add("tut1","assets/images/tut1.png"),PIXI.Loader.shared.add("tut2","assets/images/tut2.png"),PIXI.Loader.shared.add("tut3_5","assets/images/tut3_5.png"),PIXI.Loader.shared.add("tut4","assets/images/tut4.png"),PIXI.Loader.shared.add("tut6","assets/images/tut6.png"),PIXI.Loader.shared.add("guest-animation_ske","assets/animations/guest-animation_ske.json"),PIXI.Loader.shared.add("guest-animation_tex","assets/animations/guest-animation_tex.json"),PIXI.Loader.shared.add("guest_animation_texture","assets/animations/guest-animation_tex.png"),PIXI.sound.add("button_rollover",{url:"assets/sounds/button_rollover.{webm,mp3}",preload:!0}),PIXI.sound.add("click_game_object",{url:"assets/sounds/click_game_object.{webm,mp3}",preload:!0}),PIXI.sound.add("click_penguin",{url:"assets/sounds/click_penguin.{webm,mp3}",preload:!0}),PIXI.sound.add("close_sign_fall",{url:"assets/sounds/close_sign_fall.{webm,mp3}",preload:!0}),PIXI.sound.add("crowd_clap",{url:"assets/sounds/crowd_clap.{webm,mp3}",preload:!0}),PIXI.sound.add("curtain_down",{url:"assets/sounds/curtain_down.{webm,mp3}",preload:!0}),PIXI.sound.add("curtain_up",{url:"assets/sounds/curtain_up.{webm,mp3}",preload:!0}),PIXI.sound.add("food_give",{url:"assets/sounds/food_give.{webm,mp3}",preload:!0}),PIXI.sound.add("food_pickup",{url:"assets/sounds/food_pickup.{webm,mp3}",preload:!0}),PIXI.sound.add("food_ready",{url:"assets/sounds/food_ready.{webm,mp3}",preload:!0}),PIXI.sound.add("game_track",{url:"assets/sounds/game_track.{webm,mp3}",preload:!0}),PIXI.sound.add("hello",{url:"assets/sounds/hello.{webm,mp3}",preload:!0}),PIXI.sound.add("message_popup",{url:"assets/sounds/message_popup.{webm,mp3}",preload:!0}),PIXI.sound.add("money_pickup",{url:"assets/sounds/money_pickup.{webm,mp3}",preload:!0}),PIXI.sound.add("penguin_read_menu",{url:"assets/sounds/penguin_read_menu.{webm,mp3}",preload:!0}),PIXI.sound.add("splash_screen_track",{url:"assets/sounds/splash_screen_track.{webm,mp3}",preload:!0}),PIXI.sound.add("storm_loop",{url:"assets/sounds/storm_loop.{webm,mp3}",preload:!0}),PIXI.sound.add("trashcan",{url:"assets/sounds/trashcan.{webm,mp3}",preload:!0}),PIXI.sound.add("upgrade_buy",{url:"assets/sounds/upgrade_buy.{webm,mp3}",preload:!0}),PIXI.sound.add("walk_ice_02",{url:"assets/sounds/walk_ice_02.{webm,mp3}",preload:!0}),PIXI.sound.add("walk_ice_03",{url:"assets/sounds/walk_ice_03.{webm,mp3}",preload:!0}),PIXI.Loader.shared.load(function(t,e){}),PIXI.Loader.shared.onComplete.once(function(){t&&t()}),PIXI.Loader.shared.onLoad.add(function(t,i){e(t.progress/100)})}!function(t,e){function i(){this.initialize()}i.ANIMATION_BLACKOUT=1,i.prototype.initialize=function(){if(this.width=Config.gameWidth,this.height=Config.gameHeight,this.resizeCounter=0,this.forceUpdateInterval=null,this.paused=!1,this.rotationLayer=null,this.screens=[],this.initializePIXI(),createjs.Ticker.timingMode=createjs.Ticker.RAF,createjs.Ticker.framerate=60,createjs.Ticker.maxDelta=60,Config.isWhiteLabel)this.preloadAssets();else{PIXI.Loader.shared.add("logo","assets/images/logo.png");var t=this;PIXI.Loader.shared.onComplete.once(function(){PIXI.Loader.shared.reset(),t.preloadAssets()}),PIXI.Loader.shared.load()}this.pausedScreen=null,Visibility.change(function(t,e){app.handleVisibility("visible"===e)})},i.prototype.preloadAssets=function(){var e=new LoadingScreen(this);this.addScreen(e),this.rotationLayer&&this.rotationLayer.bringToFront(),preloadAssets(function(){setTimeout(function(){var e=applyToConstructor(t[Config.initialScreen],Config.initialScreenArgs);this.addScreen(e),this.rotationLayer&&this.rotationLayer.bringToFront()}.bind(this),100)}.bind(this),function(t){e.loadingBar.setPercent(t)})},i.prototype.addScreen=function(t,e,n){if(this.screens.push(t),e===i.ANIMATION_BLACKOUT){var a=this;createjs.Tween.get(this.screen).to({alpha:0},200).call(function(){a.screen&&(a.screen.removeFromParent(),a.screen.onHide())}).wait(100).call(function(){a.screen=t,a.stage.addChild(t),t.alpha=0,n&&(a.screens=[a.screen]),createjs.Tween.get(t).to({alpha:1},200).call(function(){t.onShow()})})}else this.screen&&(this.screen.removeFromParent(),this.screen.onHide()),this.screen=t,this.stage.addChild(t),n&&(this.screens=[this.screen]),t.onShow()},i.prototype.goBack=function(){if(this.screen){this.screens.pop();this.screen.removeFromParent(),this.screen.onHide(),this.screen=null}this.screen=this.screens[this.screens.length-1]||null,this.screen&&(this.screen.alpha=1,this.stage.addChild(this.screen),this.screen.onShow())},i.prototype.tick=function(){if(!this.paused){var t=this.pixi.ticker.elapsedMS;t=t>60?60:t,this.updateChildren(t)}},i.prototype.updateChildren=function(t,e){for(var i=(e=e||this.stage.children).length;i-- >0;){var n=e[i];n&&n.visible&&(n.onUpdate&&n.onUpdate(t),n&&this.updateChildren(t,n.children))}},i.prototype.initializePIXI=function(){PIXI.settings.FILTER_RESOLUTION=2,PIXI.settings.RESOLUTION=2;var e={resolution:2,width:this.width,height:this.height};this.pixi=new PIXI.Application(e),this.stage=this.pixi.stage,this.layoutCanvas(),this.pixi.ticker.add(this.tick,this),this.loader=PIXI.Loader.shared;var i=this;t.addEventListener("resize",function(t){setTimeout(function(){i.resize()},16)}),this.forceUpdateInterval=setInterval(this.forceInterval.bind(this),500)},i.prototype.resize=function(){this.calculateSizes();var t=this.windowWidth-this.canvasWidth,e=this.windowHeight-this.canvasHeight;this.pixi.view.style.width=this.canvasWidth+"px",this.pixi.view.style.height=this.canvasHeight+"px",this.pixi.view.style.marginLeft=Math.ceil(t/2)+"px",this.pixi.view.style.marginTop=Math.ceil(e/2)+"px",this.handleRotation()},i.prototype.layoutCanvas=function(){document.body.appendChild(this.pixi.view),this.resize()},i.prototype.calculateSizes=function(){var t=this.windowSize();this.windowWidth=t.width,this.windowHeight=t.height,this.canvasWidth=Math.ceil(t.width),this.canvasHeight=Math.ceil(t.height);var e=t.width/t.height,i=this.width/this.height;e>=this.width/this.height?(this.canvasWidth=Math.ceil(t.height*i),this.canvasHeight=Math.ceil(t.height)):(this.canvasWidth=Math.ceil(t.width),this.canvasHeight=Math.ceil(t.width/i))},i.prototype.windowSize=function(){var e=t,i="inner";return"innerWidth"in t||(i="client",e=document.documentElement||document.body),{width:e[i+"Width"],height:e[i+"Height"]}},i.prototype.pauseForAds=function(){createjs.Ticker.paused=!0,PIXI.sound.muteAll(),null===this.pausedScreen&&(this.pausedScreen=this.screen,this.pausedScreen.removeFromParent())},i.prototype.unpauseForAds=function(){createjs.Ticker.paused=!1,SOManager.getInstance().soundEnabled&&PIXI.sound.unmuteAll(),this.pausedScreen&&(this.screen=this.pausedScreen,this.stage.addChild(this.screen),this.pausedScreen=null)},i.prototype.handleVisibility=function(t){t?SOManager.getInstance().soundEnabled&&PIXI.sound.unmuteAll():PIXI.sound.muteAll()},i.prototype.handleRotation=function(){if(PIXI.isMobile.phone||PIXI.isMobile.tablet){if(this.windowHeight>this.windowWidth){if(!this.rotationLayer){createjs.Ticker.paused=!0,PIXI.sound.muteAll(),this.rotationLayer=new PIXI.Container,this.rotationLayer.interactive=!0,this.rotationLayer.pointerdown=this.rotationLayer.pointerup=function(t){return t.stopPropagation(),!1},this.stage.addChild(this.rotationLayer);var t=new PIXI.Sprite;t.texture=PIXI.Texture.WHITE,t.tint=0,t.width=this.width,t.height=this.height,this.rotationLayer.addChild(t);var e=PIXI.Sprite.from("assets/images/rotate_device_to_landscape.png");e.centered(),e.position.set(this.width/2,this.height/2),this.rotationLayer.addChild(e),this.paused=!0}return void this.rotationLayer.bringToFront()}this.rotationLayer&&(this.rotationLayer.removeFromParent(),this.rotationLayer=null,createjs.Ticker.paused=!1,this.handleVisibility(!0),this.paused=!1)}},i.prototype.forceInterval=function(){this.resizeCounter++,this.resizeCounter>=10?clearInterval(this.forceUpdateInterval):this.resize()},t.App=i}(window),function(t,e){var i=null;function n(){this.initialize()}n.getInstance=function(){return i||(i=new n),i},n.prototype.initialize=function(){},n.prototype.showAd=function(){"undefined"!=typeof gdsdk&&"undefined"!==gdsdk.showAd&&gdsdk.showAd()},t.AdManager=n}(window),function(t,e){var i=null;function n(){this.initialize()}n.prototype.initialize=function(){this.guestSide=dragonBones.PixiFactory.factory,this.guestSide.parseDragonBonesData(PIXI.Loader.shared.resources["guest-animation_ske"].data),this.guestSide.parseTextureAtlasData(PIXI.Loader.shared.resources["guest-animation_tex"].data,PIXI.utils.TextureCache.guest_animation_texture)},n.instance=function(){return i||(i=new n),i},t.AnimationFactory=n}(window),window.addEventListener("load",function(){PIXI.utils.skipHello(),app=new App,SOManager.getInstance().executeSoundState(),(PIXI.isMobile.apple.device||PIXI.isMobile.apple.phone||PIXI.isMobile.apple.tablet||PIXI.isMobile.apple.universal)&&document.getElementById("pull-to-hide").remove()},!1),document.addEventListener("gesturestart",t=>t.preventDefault()),function(t,e){function i(){this.initialize()}i.prototype=Object.create(PIXI.Container.prototype),i.prototype.constructor=i,i.prototype.initialize=function(){PIXI.Container.call(this),this.sky=PIXI.Sprite.from("gb_day"),this.sky.x=100,this.sky.y=-10,this.addChild(this.sky),this.stars=PIXI.Sprite.from("bg_starz"),this.stars.x=100,this.addChild(this.stars),this.sun=PIXI.Sprite.from("sun"),this.sun.x=150,this.sun.centered(),this.addChild(this.sun),this.hills=PIXI.Sprite.from("hills_1"),this.hills.x=70,this.hills.y=10,this.addChild(this.hills),this.duration=6e3,this.timer=this.duration,this.sunX1=100,this.sunX2=600,this.sunY=40,this.sunElevation=50,this.sunRadius=1400,this.sunCenter=new PIXI.Point(app.width/2+60,this.sunRadius),this.redToWhite=new n(this.sky,16558956,16777215),this.whiteToBlue=new n(this.sky,16777215,8285104),this.m1T=new n(this.hills,14662330,16777215),this.m2T=new n(this.hills,16777215,16049637),this.m3T=new n(this.hills,16049637,9144970)},i.prototype.onUpdate=function(t){},i.prototype.setPercent=function(t){var e=Math.degreesToRadians(-100.6),i=e+(Math.degreesToRadians(-76)-e)*t,n=new PIXI.Point(this.sunRadius-10,0);n.setAngle(i),this.sun.x=n.x+this.sunCenter.x,this.sun.y=n.y+this.sunCenter.y,this.stars.alpha=t>.8?(t-.8)/.2:0,t<=.2?this.redToWhite.setPercent(t/.2):t>=.8?this.whiteToBlue.setPercent(1-(1-t)/.2):this.sky.tint=16777215,t<.3?this.m1T.setPercent(t/.3):t<=.8?this.m2T.setPercent(1-(.8-t)/.5):t>=.8&&this.m3T.setPercent(1-(1-t)/.2)};var n=function(t,e,i){this.start_tint=new Color(e),this.end_tint=new Color(i),this.object=t};n.prototype.setPercent=function(t){if(1===(t=Math.clamp(t,0,1)))this.object.tint=this.end_tint.hex_code;else{var e=(this.end_tint.red-this.start_tint.red)*t+this.start_tint.red,i=(this.end_tint.green-this.start_tint.green)*t+this.start_tint.green,n=(this.end_tint.blue-this.start_tint.blue)*t+this.start_tint.blue;this.object.tint=Color.get_color_32(1,e,i,n)}},t.Atmosphere1=i}(window),function(t,e){function i(){this.initialize()}i.prototype=Object.create(PIXI.Container.prototype),i.prototype.constructor=i,i.prototype.initialize=function(){PIXI.Container.call(this),this.sky=PIXI.Sprite.from("gb_day"),this.sky.fillOut(app.width,50),this.addChild(this.sky),this.stars=PIXI.Sprite.from("bg_starz"),this.stars.x=100,this.addChild(this.stars),this.sun=PIXI.Sprite.from("sun"),this.sun.x=150,this.sun.centered(),this.addChild(this.sun),this.hills=PIXI.Sprite.from("hills_2"),this.hills.x=-5,this.hills.y=-5,this.addChild(this.hills),this.duration=6e3,this.timer=this.duration,this.sunX1=100,this.sunX2=600,this.sunY=40,this.sunElevation=50,this.sunRadius=1600,this.sunCenter=new PIXI.Point(app.width/2-30,this.sunRadius),this.redToWhite=new n(this.sky,16558956,16777215),this.whiteToBlue=new n(this.sky,16777215,8285104),this.m1T=new n(this.hills,14662330,16777215),this.m2T=new n(this.hills,16777215,16049637),this.m3T=new n(this.hills,16049637,9144970)},i.prototype.onUpdate=function(t){},i.prototype.setPercent=function(t){var e=Math.degreesToRadians(-102),i=e+(Math.degreesToRadians(-75)-e)*t,n=new PIXI.Point(this.sunRadius-20,0);n.setAngle(i),this.sun.x=n.x+this.sunCenter.x,this.sun.y=n.y+this.sunCenter.y,this.stars.alpha=t>.8?(t-.8)/.2:0,t<=.2?this.redToWhite.setPercent(t/.2):t>=.8?this.whiteToBlue.setPercent(1-(1-t)/.2):this.sky.tint=16777215,t<.3?this.m1T.setPercent(t/.3):t<=.8?this.m2T.setPercent(1-(.8-t)/.5):t>=.8&&this.m3T.setPercent(1-(1-t)/.2)};var n=function(t,e,i){this.start_tint=new Color(e),this.end_tint=new Color(i),this.object=t};n.prototype.setPercent=function(t){if(1===(t=Math.clamp(t,0,1)))this.object.tint=this.end_tint.hex_code;else{var e=(this.end_tint.red-this.start_tint.red)*t+this.start_tint.red,i=(this.end_tint.green-this.start_tint.green)*t+this.start_tint.green,n=(this.end_tint.blue-this.start_tint.blue)*t+this.start_tint.blue;this.object.tint=Color.get_color_32(1,e,i,n)}},t.Atmosphere2=i}(window),function(t,e){function i(){this.initialize()}i.prototype=Object.create(PIXI.Container.prototype),i.prototype.constructor=i,i.prototype.initialize=function(){if(PIXI.Container.call(this),this.sky=PIXI.Sprite.from("gb_day"),this.sky.fillOut(app.width,50),this.addChild(this.sky),this.stars=PIXI.Sprite.from("bg_starz"),this.stars.x=0,this.addChild(this.stars),this.sun=PIXI.Sprite.from("sun"),this.sun.x=150,this.sun.centered(),this.addChild(this.sun),this.waterStatic=PIXI.Sprite.from("level_3_water_1"),this.waterStatic.x=0,this.waterStatic.y=40,this.addChild(this.waterStatic),this.isWebGL=PIXI.utils.isWebGLSupported(),this.isWebGL){this.w1ength=32.5,this.w1Points=[],this.w1Timer=0;for(let t=0;t<20;t++)this.w1Points.push(new PIXI.Point(t*this.w1ength,0));this.water1=new PIXI.SimpleRope(PIXI.utils.TextureCache.level_3_water_3,this.w1Points),this.water1.x=-10,this.water1.y=100,this.addChild(this.water1),this.w2Points=[],this.w2Timer=0;for(let t=0;t<20;t++)this.w2Points.push(new PIXI.Point(t*this.w1ength,0));this.water2=new PIXI.SimpleRope(PIXI.utils.TextureCache.level_3_water_2,this.w2Points),this.water2.x=-10,this.water2.y=120,this.addChild(this.water2)}this.duration=6e4,this.timer=this.duration,this.duration2=3e4,this.timer2=this.duration2,this.sunRadius=1600,this.sunCenter=new PIXI.Point(app.width/2,this.sunRadius),this.redToWhite=new n(this.sky,16558956,16777215),this.whiteToBlue=new n(this.sky,16777215,8285104),this.shipRadius=3800,this.shipCenter=new PIXI.Point(app.width/2,this.shipRadius),this.backShip=PIXI.Sprite.from("ship_sprite"),this.backShip.anchor.set(.5,1),this.backShip.scale.set(.5),this.backShip.tint=8947848,this.addChild(this.backShip),this.frontShip=PIXI.Sprite.from("ship_sprite"),this.frontShip.anchor.set(.5,1),this.addChild(this.frontShip)},i.prototype.onUpdate=function(t){if(this.timer-=t,this.timer=Math.clamp(this.timer,0,this.duration),this.setPercentShip(this.backShip,1-this.timer/this.duration,48,5),this.timer2-=t,this.timer2=Math.clamp(this.timer2,0,this.duration2),this.setPercentShip(this.frontShip,this.timer2/this.duration2,65,6),this.timer<=0&&(this.timer=this.duration),this.timer2<=0&&(this.timer2=this.duration2),this.isWebGL){this.w1Timer+=.001*t,this.w2Timer+=.0015*t;for(let t=0;t<this.w1Points.length;t++)this.w1Points[t].y=3*Math.sin(.5*t+this.w1Timer),this.w1Points[t].x=t*this.w1ength+3*Math.cos(.3*t+this.w1Timer);for(let t=0;t<this.w2Points.length;t++)this.w2Points[t].y=8*Math.sin(.5*t+this.w2Timer),this.w2Points[t].x=t*this.w1ength+3*Math.cos(.3*t+this.w2Timer)}},i.prototype.setPercentShip=function(t,e,i,n){var a=Math.degreesToRadians(-90-n),r=a+(Math.degreesToRadians(-90+n)-a)*e,s=new PIXI.Point(this.shipRadius-i,0);s.setAngle(r),t.x=s.x+this.shipCenter.x,t.y=s.y+this.shipCenter.y,t.rotation=r+Math.degreesToRadians(90)},i.prototype.setPercent=function(t){var e=Math.degreesToRadians(-101.4),i=e+(Math.degreesToRadians(-77)-e)*t,n=new PIXI.Point(this.sunRadius-15,0);n.setAngle(i),this.sun.x=n.x+this.sunCenter.x,this.sun.y=n.y+this.sunCenter.y,this.stars.alpha=t>.8?(t-.8)/.2:0,t<=.2?this.redToWhite.setPercent(t/.2):t>=.8?this.whiteToBlue.setPercent(1-(1-t)/.2):this.sky.tint=16777215};var n=function(t,e,i){this.start_tint=new Color(e),this.end_tint=new Color(i),this.object=t};n.prototype.setPercent=function(t){if(1===(t=Math.clamp(t,0,1)))this.object.tint=this.end_tint.hex_code;else{var e=(this.end_tint.red-this.start_tint.red)*t+this.start_tint.red,i=(this.end_tint.green-this.start_tint.green)*t+this.start_tint.green,n=(this.end_tint.blue-this.start_tint.blue)*t+this.start_tint.blue;this.object.tint=Color.get_color_32(1,e,i,n)}},t.Atmosphere3=i}(window),function(t,e){function i(){this.initialize()}i.prototype.initialize=function(){this.pathQueue=[]},i.prototype.setTargetTile=function(t,e,i){var n=(new AStarPathfinder).getOptimizedPath(t,e);n.reverse();for(var a=[],r=[],s=n.length,o=0;o<s;o++)a.push((n[o].x+Tile.DX)*Tile.SIZE+10),r.push((n[o].y+Tile.DY)*Tile.SIZE+10);var h=new CatmullRomSpline(a,r);this.pathQueue=h.getAllPoints(i)},i.prototype.getCoords=function(){var t=this.pathQueue.shift();return t?(t&&this.pathQueue.length>0?(t.end=!1,t.dx=this.pathQueue[0].x-t.x,t.dy=this.pathQueue[0].y-t.y):t.end=!0,t):null},t.CharActionQueue=i}(window),function(t,e){function i(){this.initialize()}i.prototype=Object.create(PIXI.Container.prototype),i.prototype.constructor=i,i.prototype.initialize=function(){PIXI.Container.call(this),this.base=PIXI.Sprite.from("clock_base"),this.base.centered(),this.addChild(this.base),this.handHour=PIXI.Sprite.from("clock_hours"),this.handHour.anchor.set(.5,.95),this.addChild(this.handHour),this.handMinutes=PIXI.Sprite.from("clock_minutes"),this.handMinutes.anchor.set(.5,.95),this.addChild(this.handMinutes),this.from=9,this.to=21},i.prototype.setTime=function(t,e){this.setHour(t),this.setMinute(e)},i.prototype.setHour=function(t){t%=12;var e=Math.degreesToRadians(t/12*360);this.handHour.rotation=e},i.prototype.setMinute=function(t){t%=60;var e=Math.degreesToRadians(t/60*360);this.handMinutes.rotation=e},i.prototype.setPercent=function(t){var e=(this.to-this.from)*t,i=this.from+e,n=i,a=60*(i-Math.floor(i));this.setTime(n,a)},t.Clock=i}(window),function(t,e){function i(t,e,i){this.initialize(t,e,i)}i.TYPE_MOVE_TO_TABLE="type_move_to_table",i.TYPE_MOVE_TO_ORDER_PLATE="type_move_to_order_plate",i.TYPE_MOVE_TO_TRASHCAN="type_move_to_trashcan",i.TYPE_PAUSE_GAME="type_pause_game",i.prototype.initialize=function(t,e,i){this.type=t,this.data=i,this.target=e},t.Command=i}(window),function(t,e){function i(){}i.UP="up",i.DOWN="down",i.LEFT="left",i.RIGHT="right",t.Direction=i}(window),function(t,e){function i(){}i.SKATE="skate",i.TV="tv",i.SEAT="seat",t.Upgrades=i}(window),function(t,e){function i(){this.initialize()}i.prototype=Object.create(PIXI.Container.prototype),i.prototype.constructor=i,i.prototype.initialize=function(){PIXI.Container.call(this),this.base=PIXI.Sprite.from("day_tip_bubble"),this.base.anchor.set(0,.5),this.addChild(this.base),this.icon=PIXI.Sprite.from("day_tip_icon"),this.icon.position.set(127,0),this.icon.anchor.set(0,.5),this.addChild(this.icon),this.tipText=["How much I had to make today","How much I actually made today","Extra I make when I earn more than I need","Where all my profits go! Use this to buy upgrades","My total earnings since i began working"],this.label=new PIXI.Text("",Styles.TIP_LABEL),this.label.position.set(20,-25),this.addChild(this.label)},i.prototype.setType=function(t){this.label.text=this.tipText[t]},t.DayResultTip=i}(window),function(t,e){function i(){this.initialize()}i.SUSHI="sushi",i.FISH="fish",i.SOUP="soup",i.STEAK="steak",i.SHRIMPS="shrimps",i.COLA="cola",i.LEMONADE="lemonade",i.ICECREAM_1="icecream_1",i.ICECREAM_2="icecream_2",i.NONE="none",i.allTypes=[i.SUSHI,i.FISH,i.SOUP,i.STEAK,i.SHRIMPS,i.COLA,i.LEMONADE,i.ICECREAM_1,i.ICECREAM_2],i.previousFood=null,i.prototype.initialize=function(){},i.randomFood=function(){var t;do{t=this.allTypes[Math.floor(Math.random()*this.allTypes.length)]}while(t===this.previousFood);return this.previousFood=t,t},t.Food=i}(window),function(t,e){function i(){}i.gameID=1638,i.TOTAL_STAGES=3,i.DAY_TIME=120,i.UPGRADE_COST=function(t){return{skate_0:50,skate_1:100,skate_2:170,tv_0:100,tv_1:200,tv_2:300,seat_0:60,seat_1:120,seat_2:200}[t]},i.gameSettings=[[{dayGoal:105,guestAppearTime:260,guestReadingMenuTime:220,guestChangeMoodTime:300,guestEatingTime:300,foodCookingTime:200,maxGuestsAtOnce:4,guestDoubleAppearProbability:.1},{dayGoal:110,guestAppearTime:250,guestReadingMenuTime:220,guestChangeMoodTime:300,guestEatingTime:300,foodCookingTime:200,maxGuestsAtOnce:4,guestDoubleAppearProbability:.1},{dayGoal:110,guestAppearTime:240,guestReadingMenuTime:220,guestChangeMoodTime:300,guestEatingTime:300,foodCookingTime:200,maxGuestsAtOnce:4,guestDoubleAppearProbability:.1},{dayGoal:120,guestAppearTime:230,guestReadingMenuTime:215,guestChangeMoodTime:300,guestEatingTime:300,foodCookingTime:200,maxGuestsAtOnce:4,guestDoubleAppearProbability:.1},{dayGoal:130,guestAppearTime:220,guestReadingMenuTime:210,guestChangeMoodTime:300,guestEatingTime:300,foodCookingTime:200,maxGuestsAtOnce:4,guestDoubleAppearProbability:.1},{dayGoal:170,guestAppearTime:210,guestReadingMenuTime:205,guestChangeMoodTime:300,guestEatingTime:300,foodCookingTime:200,maxGuestsAtOnce:4,guestDoubleAppearProbability:.2},{dayGoal:160,guestAppearTime:200,guestReadingMenuTime:200,guestChangeMoodTime:290,guestEatingTime:300,foodCookingTime:200,maxGuestsAtOnce:4,guestDoubleAppearProbability:.2}],[{dayGoal:170,guestAppearTime:190,guestReadingMenuTime:200,guestChangeMoodTime:280,guestEatingTime:300,foodCookingTime:200,maxGuestsAtOnce:5,guestDoubleAppearProbability:.2},{dayGoal:200,guestAppearTime:180,guestReadingMenuTime:200,guestChangeMoodTime:280,guestEatingTime:300,foodCookingTime:200,maxGuestsAtOnce:5,guestDoubleAppearProbability:.2},{dayGoal:210,guestAppearTime:170,guestReadingMenuTime:200,guestChangeMoodTime:270,guestEatingTime:300,foodCookingTime:200,maxGuestsAtOnce:5,guestDoubleAppearProbability:.2},{dayGoal:260,guestAppearTime:160,guestReadingMenuTime:200,guestChangeMoodTime:270,guestEatingTime:300,foodCookingTime:200,maxGuestsAtOnce:6,guestDoubleAppearProbability:.3},{dayGoal:230,guestAppearTime:150,guestReadingMenuTime:200,guestChangeMoodTime:260,guestEatingTime:300,foodCookingTime:200,maxGuestsAtOnce:6,guestDoubleAppearProbability:.3},{dayGoal:270,guestAppearTime:140,guestReadingMenuTime:200,guestChangeMoodTime:260,guestEatingTime:300,foodCookingTime:200,maxGuestsAtOnce:6,guestDoubleAppearProbability:.3},{dayGoal:280,guestAppearTime:130,guestReadingMenuTime:200,guestChangeMoodTime:250,guestEatingTime:300,foodCookingTime:200,maxGuestsAtOnce:7,guestDoubleAppearProbability:.3},{dayGoal:290,guestAppearTime:120,guestReadingMenuTime:200,guestChangeMoodTime:250,guestEatingTime:300,foodCookingTime:200,maxGuestsAtOnce:7,guestDoubleAppearProbability:.4},{dayGoal:320,guestAppearTime:110,guestReadingMenuTime:200,guestChangeMoodTime:240,guestEatingTime:300,foodCookingTime:200,maxGuestsAtOnce:7,guestDoubleAppearProbability:.4},{dayGoal:330,guestAppearTime:100,guestReadingMenuTime:200,guestChangeMoodTime:240,guestEatingTime:300,foodCookingTime:200,maxGuestsAtOnce:8,guestDoubleAppearProbability:.4},{dayGoal:320,guestAppearTime:90,guestReadingMenuTime:200,guestChangeMoodTime:230,guestEatingTime:300,foodCookingTime:200,maxGuestsAtOnce:8,guestDoubleAppearProbability:.5}],[{dayGoal:330,guestAppearTime:90,guestReadingMenuTime:200,guestChangeMoodTime:230,guestEatingTime:300,foodCookingTime:200,maxGuestsAtOnce:8,guestDoubleAppearProbability:.5},{dayGoal:300,guestAppearTime:90,guestReadingMenuTime:200,guestChangeMoodTime:220,guestEatingTime:300,foodCookingTime:200,maxGuestsAtOnce:8,guestDoubleAppearProbability:.5},{dayGoal:310,guestAppearTime:89,guestReadingMenuTime:200,guestChangeMoodTime:220,guestEatingTime:300,foodCookingTime:200,maxGuestsAtOnce:8,guestDoubleAppearProbability:.5},{dayGoal:290,guestAppearTime:89,guestReadingMenuTime:200,guestChangeMoodTime:210,guestEatingTime:300,foodCookingTime:200,maxGuestsAtOnce:9,guestDoubleAppearProbability:.5},{dayGoal:340,guestAppearTime:88,guestReadingMenuTime:200,guestChangeMoodTime:210,guestEatingTime:300,foodCookingTime:200,maxGuestsAtOnce:9,guestDoubleAppearProbability:.6},{dayGoal:320,guestAppearTime:88,guestReadingMenuTime:200,guestChangeMoodTime:200,guestEatingTime:300,foodCookingTime:200,maxGuestsAtOnce:9,guestDoubleAppearProbability:.6},{dayGoal:370,guestAppearTime:87,guestReadingMenuTime:200,guestChangeMoodTime:200,guestEatingTime:300,foodCookingTime:200,maxGuestsAtOnce:9,guestDoubleAppearProbability:.6},{dayGoal:370,guestAppearTime:87,guestReadingMenuTime:200,guestChangeMoodTime:190,guestEatingTime:300,foodCookingTime:200,maxGuestsAtOnce:9,guestDoubleAppearProbability:.6},{dayGoal:350,guestAppearTime:86,guestReadingMenuTime:200,guestChangeMoodTime:190,guestEatingTime:300,foodCookingTime:200,maxGuestsAtOnce:9,guestDoubleAppearProbability:.6},{dayGoal:390,guestAppearTime:85,guestReadingMenuTime:200,guestChangeMoodTime:180,guestEatingTime:300,foodCookingTime:200,maxGuestsAtOnce:9,guestDoubleAppearProbability:.7},{dayGoal:400,guestAppearTime:84,guestReadingMenuTime:200,guestChangeMoodTime:180,guestEatingTime:300,foodCookingTime:200,maxGuestsAtOnce:10,guestDoubleAppearProbability:.7},{dayGoal:410,guestAppearTime:83,guestReadingMenuTime:200,guestChangeMoodTime:170,guestEatingTime:300,foodCookingTime:200,maxGuestsAtOnce:10,guestDoubleAppearProbability:.7},{dayGoal:420,guestAppearTime:82,guestReadingMenuTime:200,guestChangeMoodTime:170,guestEatingTime:300,foodCookingTime:200,maxGuestsAtOnce:10,guestDoubleAppearProbability:.8},{dayGoal:430,guestAppearTime:81,guestReadingMenuTime:200,guestChangeMoodTime:160,guestEatingTime:300,foodCookingTime:200,maxGuestsAtOnce:10,guestDoubleAppearProbability:.8},{dayGoal:440,guestAppearTime:80,guestReadingMenuTime:200,guestChangeMoodTime:160,guestEatingTime:300,foodCookingTime:200,maxGuestsAtOnce:10,guestDoubleAppearProbability:.8}]],i.FOOD_PRICE=function(t){return[[0,10,12,15],[0,10,13,16],[0,10,14,17],[0,10,15,18]][SOManager.getInstance().upgradeStool+1][t]},Object.defineProperty(i,"blank",{get:function(){}}),Object.defineProperty(i,"currentDaySettings",{get:function(){var t=SOManager.getInstance().currentStage,e=SOManager.getInstance().currentDay;return i.gameSettings[t][e]}}),Object.defineProperty(i,"DAYS_AT_CURRENT_STAGE",{get:function(){var t=SOManager.getInstance().currentStage;return i.gameSettings[t].length}}),Object.defineProperty(i,"HERO_SPEED",{get:function(){return[8,10,12,15][SOManager.getInstance().upgradeSkate+1]}}),Object.defineProperty(i,"DAY_GOAL",{get:function(){return i.currentDaySettings.dayGoal}}),Object.defineProperty(i,"GUEST_APPEAR_TIME",{get:function(){return i.currentDaySettings.guestAppearTime}}),Object.defineProperty(i,"GUEST_READING_MENU_TIME",{get:function(){return i.currentDaySettings.guestReadingMenuTime}}),Object.defineProperty(i,"GUEST_CHANGE_MOOD_TIME",{get:function(){return i.currentDaySettings.guestChangeMoodTime}}),Object.defineProperty(i,"GUEST_EATING_TIME",{get:function(){return i.currentDaySettings.guestEatingTime}}),Object.defineProperty(i,"FOOD_COOKING_TIME",{get:function(){return i.currentDaySettings.foodCookingTime}}),Object.defineProperty(i,"MAX_GUESTS_AT_ONCE",{get:function(){return i.currentDaySettings.maxGuestsAtOnce}}),Object.defineProperty(i,"GUEST_DOUBLE_APPEAR_PROBABILITY",{get:function(){return i.currentDaySettings.guestDoubleAppearProbability}}),t.GameData=i}(window),function(t,e){function i(){this.initialize()}i.prototype=Object.create(PIXI.Container.prototype),i.prototype.constructor=i,i.highlightColor=39168,i.selectedGuests=[],i.EVENT_LEAVE_QUEUE="event_leave_queue",i.EVENT_LEAVE_SCREEN="event_leave_screen",i.STATE_GOING_TO_QUEUE_PLACE="going_to_queue_place",i.STATE_WAITING_IN_QUEUE="waiting_in_queue",i.STATE_GOING_TO_TABLE="state_going_to_table",i.STATE_READING_MENU="reading_menu",i.STATE_WAITING_FOR_WAITER="waiting_for_waiter",i.STATE_WAITING_FOR_FOOD="waiting_for_food",i.STATE_WAITING_FRIEND_EATING="waiting_friend_eating",i.STATE_EATING="eating",i.STATE_LEAVING="leaving",i.STATE_WALKING="walking",i.prototype.initialize=function(){PIXI.Container.call(this),this.delegate=null,this.id=generateString(30)+Math.randomInt(0,1e3);var t=AnimationFactory.instance().guestSide.buildArmatureDisplay("guest");this.armatureDisplay=t,this.addChild(t),this.armatureDisplay.animation.play("walk"),this.armatureDisplay.scale.set(.5);var e=this;this.armatureDisplay.on(dragonBones.EventObject.FRAME_EVENT,function(t){e.paused||"walk"===t.animationState.name&&("left-foot"===t.name?SoundManager.getInstance().startSound("walk_ice_02"):"right-foot"===t.name&&SoundManager.getInstance().startSound("walk_ice_03"))},this),this.friend=null,this.table=null,this.queue=new CharActionQueue,this.currentTile=new Tile,this.clothes="",this.locked=!1,this.selected=!1,this.atTable=!1,this.state="",this.speed=0,this.food="",this.mood=3,this.worstMood=3,this.moodCount=0,this.stateCount=0,this.firstInQueue=!1,this.lastStateFullName="",this.paused=!1,this.food=Food.randomFood(),this.queue=new CharActionQueue;var n=[{scarf:{count:0},sleve:{count:7,name:"guest_side_sleve_1"},pants:{count:0},shirt:{count:7,name:"side_shirt_"}},{scarf:{count:0},sleve:{count:0},pants:{count:5,name:"side_pants_1"},shirt:{count:0}},{scarf:{count:5,name:"side_scarf_1"},sleve:{count:0},pants:{count:0},shirt:{count:0}}][SOManager.getInstance().currentStage];this.slotScarf=this.armatureDisplay.armature.getSlot("scarf"),this.slotSleve=this.armatureDisplay.armature.getSlot("sleve"),this.slotShirt=this.armatureDisplay.armature.getSlot("shirt"),this.slotPants=this.armatureDisplay.armature.getSlot("pants"),this.headSlot=this.armatureDisplay.armature.getSlot("head"),this.slotScarf.visible=!1,this.slotSleve.visible=!1,this.slotShirt.visible=!1,this.slotPants.visible=!1,n.scarf.count&&(this.slotScarf.visible=!0);var a=Math.randomInt(0,n.sleve.count-1);n.sleve.count&&(this.slotSleve.visible=!0,this.slotSleve.displayIndex=a),n.shirt.count&&(this.slotShirt.visible=!0,this.slotShirt.visible=!0,this.slotShirt.displayIndex=a),n.pants.count&&(this.slotPants.visible=!0,this.slotPants.displayIndex=Math.randomInt(0,n.pants.count-1)),this.state=i.STATE_GOING_TO_QUEUE_PLACE,this.pointerdown=this.mousePressHandler.bind(this),this.buttonMode=!0,this.orderBubble=PIXI.Sprite.from("order_bubble"),this.orderBubble.centered(),this.orderBubble.y=-105,this.orderBubble.x=32,this.addChild(this.orderBubble),this.orderIcon=PIXI.Sprite.from("order_fish"),this.orderIcon.centered(),this.orderIcon.scale.set(.85),this.orderBubble.addChild(this.orderIcon),this.orderBubble.visible=!1,this.pointerover=function(){this.filters=[new PIXI.filters.GlowFilter({color:i.highlightColor,distance:4,outerStrength:2,innerStrength:0})]}.bind(this),this.pointerout=function(){this.selected||(this.filters=[])}.bind(this)},i.prototype.setup=function(t,e,i,n){this.firstInQueue=n,this.firstInQueue&&this.enableMouseActions(),this.friend=t,this.currentTile=e,this.moveTo(i.x,i.y)},i.prototype.moveTo=function(t,e){this.queue.setTargetTile(this.currentTile,new Tile(t,e,0,0,0),this.speed/2),this.currentTile.x=t,this.currentTile.y=e},i.prototype.shiftInQueue=function(t){this.firstInQueue=t,this.firstInQueue&&this.enableMouseActions(),this.moveTo(this.currentTile.x+2,this.currentTile.y),this.state=i.STATE_GOING_TO_QUEUE_PLACE,this.setState()},i.prototype.makeOrder=function(){this.mood=3,this.moodCount=0,this.state=i.STATE_WAITING_FOR_FOOD,this.setState(),this.orderBubble.visible=!0,this.orderIcon.texture=PIXI.utils.TextureCache["order_"+this.food]},i.prototype.startEating=function(){this.mood=3,this.stateCount=0,this.state=i.STATE_EATING,this.setState(),this.orderBubble.visible=!1},i.prototype.moveToTable=function(t){this.disableMouseActions(),this.filters=[],this.table=t,this.table.setGuests(i.selectedGuests);var e=this.table.guests[0]===this?this.table.tileRightPlace:this.table.tileLeftPlace;this.moveTo(e.x,e.y),this.state=i.STATE_GOING_TO_TABLE,this.setState(),this.selected=!1,this.friend&&(this.friend.selected=!1)},i.prototype.update=function(t){switch(this.state){case i.STATE_GOING_TO_QUEUE_PLACE:this.setWalkingState()&&(this.moodCount=0,this.state=i.STATE_WAITING_IN_QUEUE,this.setState());break;case i.STATE_WAITING_IN_QUEUE:this.firstInQueue&&(this.moodCount+=t/33.33,this.moodCount>=GameData.GUEST_CHANGE_MOOD_TIME&&(this.moodCount=0,this.worsenMood(),this.mood>0?this.setState():(this.disableMouseActions(),this.delegate&&this.delegate.onGuestLeaveQueue&&this.delegate.onGuestLeaveQueue(this),this.deactivate(),this.moveTo(0,3),this.state=i.STATE_LEAVING,this.scale.x=-1,this.setState())));break;case i.STATE_GOING_TO_TABLE:this.setWalkingState()&&(this.enableMouseActions(),this.stateCount=0,this.atTable=!0,this.table.guests[0]===this&&(this.scale.x=-1),this.state=i.STATE_READING_MENU,this.setState());break;case i.STATE_READING_MENU:this.stateCount+=t/33.33,this.stateCount>=GameData.GUEST_READING_MENU_TIME&&(this.mood=3,this.moodCount=0,this.state=i.STATE_WAITING_FOR_WAITER,this.setState(),this.friend&&this.friend.state===i.STATE_READING_MENU&&(SoundManager.getInstance().startSound("hello"),this.friend.mood=3,this.friend.moodCount=0,this.friend.state=i.STATE_WAITING_FOR_WAITER,this.friend.setState()),this.friend||SoundManager.getInstance().startSound("hello"));break;case i.STATE_WAITING_FOR_WAITER:this.moodCount+=t/33.33,this.moodCount>=GameData.GUEST_CHANGE_MOOD_TIME&&(this.moodCount=0,this.worsenMood(),this.mood>0?this.setState():(this.table.setGuests(),this.scale.x=1,this.atTable=!1,this.moveTo(31,5),this.state=i.STATE_LEAVING,this.setState(),this.friend&&this.friend.state===i.STATE_WAITING_FOR_WAITER&&(this.scale.x=1,this.friend.atTable=!1,this.friend.moveTo(31,7),this.friend.state=i.STATE_LEAVING,this.friend.setState())));break;case i.STATE_WAITING_FOR_FOOD:this.moodCount+=t/33.33,this.moodCount>=GameData.GUEST_CHANGE_MOOD_TIME&&(this.moodCount=0,this.worsenMood(),this.mood>0?this.setState():this.friend?(this.mood=1,this.table.showMoney(),this.state=i.STATE_WAITING_FRIEND_EATING,this.setState()):(this.scale.x=1,this.atTable=!1,this.moveTo(31,6),this.state=i.STATE_LEAVING,this.setState(),this.table.setGuests()));break;case i.STATE_EATING:this.stateCount+=t/33.33,this.stateCount>=GameData.GUEST_EATING_TIME&&(this.table.guestFinishedEating(this,this.worstMood),this.friend?(this.state=i.STATE_WAITING_FRIEND_EATING,this.setState()):(this.disableMouseActions(),this.scale.x=1,this.atTable=!1,this.moveTo(31,6),this.state=i.STATE_LEAVING,this.table.setGuests(),this.setState()));break;case i.STATE_WAITING_FRIEND_EATING:this.friend&&this.friend.state===i.STATE_WAITING_FRIEND_EATING&&(this.disableMouseActions(),this.scale.x=1,this.atTable=!1,this.moveTo(31,5),this.state=i.STATE_LEAVING,this.setState(),this.friend.disableMouseActions(),this.friend.scale.x=1,this.friend.atTable=!1,this.friend.moveTo(31,7),this.friend.state=i.STATE_LEAVING,this.friend.setState(),this.table.setGuests());break;case i.STATE_LEAVING:this.setWalkingState()&&(this.state=i.STATE_LEAVING,this.setState(),this.armatureDisplay.animation.stop(),this.delegate&&this.delegate.onGuestLeaveScreen&&this.delegate.onGuestLeaveScreen(this),this.removeFromParent())}},i.prototype.worsenMood=function(){this.mood--,this.mood<this.worstMood&&(this.worstMood=this.mood)},i.prototype.enableMouseActions=function(){this.interactive=!0},i.prototype.disableMouseActions=function(){this.interactive=!1},i.prototype.activate=function(){if(!this.locked&&!this.paused)switch(SoundManager.getInstance().startSound("button_rollover"),this.state){case i.STATE_WAITING_IN_QUEUE:case i.STATE_READING_MENU:case i.STATE_WAITING_FOR_WAITER:case i.STATE_WAITING_FOR_FOOD:case i.STATE_WAITING_FRIEND_EATING:case i.STATE_EATING:this.filters=[new PIXI.filters.GlowFilter({color:i.highlightColor,distance:4,outerStrength:2,innerStrength:0})],this.friend&&(this.friend.filters=this.filters)}},i.prototype.mousePressHandler=function(t){if(!this.locked&&!this.paused)switch(this.state){case i.STATE_WAITING_IN_QUEUE:this.selected||(SoundManager.getInstance().startSound("click_penguin"),this.selected=!0,this.filters=[new PIXI.filters.GlowFilter({color:i.highlightColor,distance:4,outerStrength:2,innerStrength:0})],this.friend&&(this.friend.filters=this.filters),i.selectedGuests.push(this),this.friend&&(this.friend.selected=!0,i.selectedGuests.push(this.friend)));break;case i.STATE_READING_MENU:case i.STATE_WAITING_FOR_WAITER:case i.STATE_WAITING_FOR_FOOD:case i.STATE_WAITING_FRIEND_EATING:case i.STATE_EATING:t.target=this.table,this.table.onPress(t)}},i.prototype.deactivate=function(){if(!this.locked&&!this.paused)switch(this.state){case i.STATE_WAITING_IN_QUEUE:this.selected||(this.filters=[],this.friend&&(this.friend.filters=[]));break;case i.STATE_READING_MENU:case i.STATE_WAITING_FOR_WAITER:case i.STATE_WAITING_FOR_FOOD:case i.STATE_WAITING_FRIEND_EATING:case i.STATE_EATING:this.filters=[],this.friend&&(this.friend.filters=[])}},i.prototype.pause=function(){this.paused=!0,this.useHandCursor=!1,this.state===i.STATE_LEAVING||this.state===i.STATE_GOING_TO_QUEUE_PLACE||(this.state,i.STATE_GOING_TO_TABLE)},i.prototype.unpause=function(){this.paused=!1,this.useHandCursor=!0,this.state===i.STATE_LEAVING||this.state===i.STATE_GOING_TO_QUEUE_PLACE||(this.state,i.STATE_GOING_TO_TABLE)},i.prototype.setState=function(){this.state===i.STATE_WAITING_IN_QUEUE?this.armatureDisplay.animation.fadeIn("wait-line",.06):this.state===i.STATE_GOING_TO_QUEUE_PLACE?this.armatureDisplay.animation.fadeIn("walk",.06):this.state===i.STATE_GOING_TO_TABLE?(this.mood=3,this.armatureDisplay.animation.fadeIn("walk",.06)):this.state===i.STATE_READING_MENU?(SoundManager.getInstance().startSound("penguin_read_menu"),this.armatureDisplay.animation.fadeIn("read-menu",.06,1)):this.state===i.STATE_WAITING_FOR_WAITER?this.armatureDisplay.animation.fadeIn("wait-server",.1):this.state===i.STATE_WAITING_FOR_FOOD?this.armatureDisplay.animation.fadeIn("wait-order",.06):this.state===i.STATE_EATING?this.armatureDisplay.animation.play("eat"):this.state===i.STATE_WAITING_FRIEND_EATING?this.armatureDisplay.animation.fadeIn("wait-order",.06):this.state===i.STATE_LEAVING?(this.mood=3,this.armatureDisplay.animation.fadeIn("walk",.06)):this.state===i.STATE_WALKING&&(this.mood=3,this.armatureDisplay.animation.fadeIn("walk",.06)),this.headSlot.displayIndex=3-this.mood,this.lastStateFullName=this.state},i.prototype.setWalkingState=function(){var t=this.queue.getCoords();if(null!==t){this.x=t.x,this.y=t.y;var e,n=Math.abs(t.dx),a=Math.abs(t.dy);if(n+a>.1){e=n>a?t.dx>0?Direction.RIGHT:Direction.LEFT:t.dy>0?Direction.DOWN:Direction.UP;var r=i.STATE_WALKING+"_"+e;this.lastStateFullName=r}return t.end}},t.Guest=i}(window),function(t,e){function i(){this.initialize()}i.prototype=Object.create(PIXI.Container.prototype),i.prototype.constructor=i,i.prototype.initialize=function(){PIXI.Container.call(this),this.shadow=PIXI.Sprite.from("enterier_shadow"),this.shadow.alpha=.5,this.shadow.y=4,this.shadow.scale.set(1),this.shadow.anchor.set(.5,.5),this.addChild(this.shadow),this.fin2=PIXI.Sprite.from("player_fing_side"),this.fin2.anchor.set(.5,0),this.addChild(this.fin2),this.skate2=PIXI.Sprite.from("player_skate_side"),this.skate2.anchor.set(.5,.65),this.addChild(this.skate2),this.body=PIXI.Sprite.from("player_body_front"),this.body.anchor.set(.5,1),this.addChild(this.body),this.head=PIXI.Sprite.from("player_head_front"),this.head.anchor.set(.5,1),this.head.y=-35,this.addChild(this.head),this.fin1=PIXI.Sprite.from("player_fing_side"),this.fin1.anchor.set(.5,0),this.addChild(this.fin1),this.skate1=PIXI.Sprite.from("player_skate_side"),this.skate1.anchor.set(.5,.65),this.addChild(this.skate1),this.plate_0=new OrderPlate,this.plate_1=new OrderPlate,this.addChild(this.plate_0),this.addChild(this.plate_1),this.plate_0.position.set(-30,-40),this.plate_1.position.set(30,-40),this.queue=new CharActionQueue,this.targetTile=null,this.prevDirection="",this.targetObj=null,this.targetObjReached=!1,this.food=[],this.setState(Direction.DOWN)},i.prototype.giveFood=function(t){for(var e=0;e<this.food.length;e++)if(this.food[e]===t)return this.food.splice(e,1),this.setState(),!0;return!1},i.prototype.takeReadyFood=function(t){return t!==Food.TYPE_NONE&&2!==this.food.length&&(this.food.push(t),this.setState(),!0)},i.prototype.clearFood=function(){0!==this.food.length&&(SoundManager.getInstance().startSound("trashcan"),this.food=[],this.setState())},i.prototype.update=function(t){var e=this.queue.getCoords();if(e){this.x=e.x,this.y=e.y;var i=Math.abs(e.dx),n=Math.abs(e.dy);if(i+n>.1){var a="";a=i>n?e.dx>0?Direction.RIGHT:Direction.LEFT:e.dy>0?Direction.DOWN:Direction.UP,this.setState(a)}this.targetObjReached=e.end}},i.prototype.moveTo=function(t,e){this.targetTile=new Tile(t,e,0,0,0);var i=new Tile(Math.floor(this.x/Tile.SIZE)-Tile.DX,Math.floor(this.y/Tile.SIZE)-Tile.DY,0,0,0);this.queue.setTargetTile(i,this.targetTile,GameData.HERO_SPEED/2)},i.prototype.setState=function(t){void 0!==t?this.prevDirection=t:t=this.prevDirection;var e="";switch(t){case Direction.UP:e+="up";break;case Direction.DOWN:e+="down";break;case Direction.RIGHT:e+="side",this.scale.x=1;break;case Direction.LEFT:e+="side",this.scale.x=-1}this.setAnimation(e,this.food.length)},i.prototype.setAnimation=function(t,e){switch(this.fin1.rotation=0,this.fin2.rotation=0,this.fin1.scale.x=1,this.fin2.scale.x=1,"side"===t?(this.head.texture=PIXI.utils.TextureCache.player_head_side,this.body.texture=PIXI.utils.TextureCache.player_body_side,this.fin1.texture=PIXI.utils.TextureCache.player_fing_side,this.fin2.texture=PIXI.utils.TextureCache.player_fing_side,this.skate1.texture=PIXI.utils.TextureCache.player_skate_side,this.skate2.texture=PIXI.utils.TextureCache.player_skate_side,this.skate1.x=0,this.skate2.x=5,this.skate2.y=-5,this.body.x=-5,this.body.y=-10,this.head.x=-3,this.head.y=-49,this.fin1.y=this.fin2.y=-45,this.fin1.x=-2,this.fin2.x=2,this.fin2.scale.x=-1,this.plate_1.pushToBack(),this.fin2.pushToBack(),this.skate2.pushToBack(),this.skate1.bringToFront(),this.fin1.bringToFront(),this.plate_0.x=-25,this.plate_0.y=-50,this.plate_1.x=12,this.plate_1.y=-60,e>0&&(this.fin1.rotation=Math.degreesToRadians(100),this.fin1.y=-41),2===e&&(this.fin2.rotation=Math.degreesToRadians(-120),this.fin2.y=-45,this.fin2.x=0),this.plate_0.bringToFront()):"up"===t?(this.head.texture=PIXI.utils.TextureCache.player_head_back,this.body.texture=PIXI.utils.TextureCache.player_body_back,this.fin1.texture=PIXI.utils.TextureCache.player_fing_front,this.fin2.texture=PIXI.utils.TextureCache.player_fing_front,this.skate1.texture=PIXI.utils.TextureCache.player_skate_front,this.skate2.texture=PIXI.utils.TextureCache.player_skate_front,this.skate1.x=9,this.skate2.x=-9,this.skate2.y=0,this.body.x=0,this.body.y=-10,this.head.x=0,this.head.y=-49,this.fin1.y=this.fin2.y=-50,this.fin1.x=-13.5,this.fin2.x=13.5,this.fin2.scale.x=-1,this.skate1.bringToFront(),this.skate2.bringToFront(),this.skate1.bringToFront(),this.skate2.bringToFront(),this.fin1.bringToFront(),this.fin2.bringToFront(),this.plate_0.x=-31,this.plate_0.y=-53,this.plate_1.x=31,this.plate_1.y=-53,e>0&&(this.fin1.texture=PIXI.utils.TextureCache.player_fing_side,this.fin1.rotation=Math.degreesToRadians(115),this.fin1.y=-43,this.fin1.x=-10),2===e&&(this.fin2.texture=PIXI.utils.TextureCache.player_fing_side,this.fin2.rotation=Math.degreesToRadians(-115),this.fin2.y=-43,this.fin2.x=10),this.plate_0.bringToFront(),this.plate_1.bringToFront()):"down"===t&&(this.head.texture=PIXI.utils.TextureCache.player_head_front,this.body.texture=PIXI.utils.TextureCache.player_body_front,this.fin1.texture=PIXI.utils.TextureCache.player_fing_front,this.fin2.texture=PIXI.utils.TextureCache.player_fing_front,this.skate1.texture=PIXI.utils.TextureCache.player_skate_front,this.skate2.texture=PIXI.utils.TextureCache.player_skate_front,this.skate1.x=9,this.skate2.x=-9,this.skate2.y=0,this.body.x=0,this.body.y=-10,this.head.x=0,this.head.y=-45,this.fin1.y=this.fin2.y=-50,this.fin1.x=-13.5,this.fin2.x=13.5,this.fin2.scale.x=-1,this.skate1.bringToFront(),this.skate2.bringToFront(),this.fin1.bringToFront(),this.fin2.bringToFront(),this.plate_0.x=-31,this.plate_0.y=-53,this.plate_1.x=31,this.plate_1.y=-53,e>0&&(this.fin1.texture=PIXI.utils.TextureCache.player_fing_side,this.fin1.rotation=Math.degreesToRadians(115),this.fin1.y=-43,this.fin1.x=-10),2===e&&(this.fin2.texture=PIXI.utils.TextureCache.player_fing_side,this.fin2.rotation=Math.degreesToRadians(-115),this.fin2.y=-43,this.fin2.x=10),this.plate_0.bringToFront(),this.plate_1.bringToFront()),e){case 0:this.plate_0.setType(Food.TYPE_NONE),this.plate_1.setType(Food.TYPE_NONE);break;case 1:this.plate_0.setType(this.food[0]),this.plate_1.setType(Food.TYPE_NONE);break;case 2:this.plate_0.setType(this.food[0]),this.plate_1.setType(this.food[1])}this.shadow.pushToBack()},t.Hero=i}(window),function(t,e){function i(){this.initialize()}i.prototype.initialize=function(){this.closed=!1,this.QUEUED_COMMANDS_MAX=4,this.commands=[]},i.prototype.enqueue=function(t){this.commands.length>this.QUEUED_COMMANDS_MAX||this.commands.unshift(t)},i.prototype.dequeue=function(){return 0===this.commands.length||this.closed?null:(this.closed=!0,this.commands.pop())},i.prototype.clear=function(){this.commands=[],this.closed=!1},i.prototype.open=function(){this.closed=!1},t.HeroCommandQueue=i}(window),function(t,e){function i(t){this.initialize(t)}i.TYPE_1=0,i.TYPE_2=1,i.TYPE_3=2,i.prototype=Object.create(PIXI.Container.prototype),i.prototype.constructor=i,i.prototype.initialize=function(t){if(PIXI.Container.call(this),this.type=t,this.isPlaying=!1,this.type===i.TYPE_1)this.body=PIXI.Sprite.from("tv2_p1");else if(this.type===i.TYPE_2)this.body=PIXI.Sprite.from("tv2_p2");else{this.body=PIXI.Sprite.from("tv2_close_body");var e=PIXI.Sprite.from("tv2_close_head");e.centered(),e.y=-20,this.body.addChild(e)}this.body.centered(),this.addChild(this.body),this.finLeft=PIXI.Sprite.from("tv2_left_fin"),this.finLeft.anchor.set(1,.5),this.finLeft.position.set(-2,-2),this.addChild(this.finLeft),this.finRight=PIXI.Sprite.from("tv2_right_fin"),this.finRight.anchor.set(0,.5),this.finRight.position.set(2,-2),this.addChild(this.finRight),this.type===i.TYPE_3&&(this.finLeft.texture=PIXI.utils.TextureCache.tv2_close_fin,this.finLeft.position.set(-10,-10),this.finLeft.pushToBack(),this.finRight.texture=PIXI.utils.TextureCache.tv2_close_fin,this.finRight.position.set(10,-10),this.finRight.scale.x=-1,this.finRight.anchor.x=1,this.finRight.pushToBack()),this.legLeft=PIXI.Sprite.from("tv2_left_leg"),this.legLeft.anchor.set(1,.5),this.legLeft.position.set(-1.5,8),this.addChild(this.legLeft),this.legRight=PIXI.Sprite.from("tv2_right_leg"),this.legRight.anchor.set(0,.5),this.legRight.position.set(1.5,8),this.addChild(this.legRight),this.timer=0,this.timeoutDuraiton=300,this.timeout=this.timeoutDuraiton,this.initialY=0,this.phase=1.3},i.prototype.play=function(t){if(this.initialY=this.y,t){var e=this;setTimeout(function(){e.isPlaying=!0},t)}else this.isPlaying=!0},i.prototype.onUpdate=function(t){if(this.isPlaying){if(this.timer>590)return this.y=this.initialY,this.timeout-=t,void(this.timeout<=0&&(this.timeout=this.timeoutDuraiton,this.timer=0));this.timer+=t,this.y+=.4*Math.cos(this.phase+.01*this.timer);this.finLeft.rotation=.6*Math.cos(.2+.01*this.timer)-.7,this.finRight.rotation=.7-.6*Math.cos(.2+.01*this.timer),this.legLeft.rotation=.3*Math.cos(.01*this.timer),this.legRight.rotation=.3*-Math.cos(.01*this.timer)}},t.JumpingPenguin=i}(window),function(t,e){function i(){this.initialize()}i.prototype=Object.create(PIXI.Container.prototype),i.prototype.constructor=i,i.prototype.initialize=function(){PIXI.Container.call(this),this.base=PIXI.Sprite.from("empty_plate"),this.base.centered(),this.addChild(this.base),this.foodIcon=PIXI.Sprite.from("order_fish"),this.foodIcon.centered(),this.addChild(this.foodIcon),this.foodType=null,this.index=null,this.setType(Food.TYPE_NONE),this.locked=!1,this.interactive=!0,this.buttonMode=!0,this.pointerdown=this.onPress.bind(this),this.pointerover=function(){this.filters=[new PIXI.filters.GlowFilter({color:Guest.highlightColor,distance:4,outerStrength:1,innerStrength:0})]}.bind(this),this.pointerout=function(){this.filters=[]}.bind(this)},i.prototype.setType=function(t){if(this.foodType=t,this.visible=!1,t&&"none"!==t){this.visible=!0,this.foodIcon.visible=!0,this.foodIcon.texture=PIXI.utils.TextureCache["order_"+t],this.foodIcon.scale.set(.94);this.foodIcon.y={fish:-2,icecream_1:-7,steak:-3,sushi:-1,icecream_2:-15,soup:-3,shrimps:-2,lemonade:-11,cola:-11}[t]||0}else this.foodIcon.visible=!1},i.prototype.onRelease=function(){},i.prototype.onPress=function(){this.locked||(SoundManager.getInstance().startSound("click_game_object"),this.filters=[])},t.OrderPlate=i}(window),function(t,e){function i(){this.initialize()}i.prototype=Object.create(PIXI.Container.prototype),i.prototype.constructor=i,i.prototype.initialize=function(){PIXI.Container.call(this)},t.PauseMenu=i}(window),function(t,e){function i(){this.initialize()}i.prototype=Object.create(PIXI.Container.prototype),i.prototype.constructor=i,i.prototype.initialize=function(){PIXI.Container.call(this),this.delegate=null,this.locked=!1;var t=PIXI.Sprite.from("enterier_shadow");t.centered(),t.scale.set(1.6),t.alpha=.5,t.position.set(0,25),this.addChild(t);var e=PIXI.Sprite.from("enterier_shadow");e.centered(),e.scale.set(1.2),e.alpha=.5,e.position.set(-70,25),this.addChild(e);var i=PIXI.Sprite.from("enterier_shadow");i.centered(),i.scale.set(1.2),i.alpha=.5,i.position.set(70,25),this.addChild(i),this.base=PIXI.Sprite.from("table_top"),this.base.centered(),this.addChild(this.base),this.plate_0=new OrderPlate,this.plate_0.interactive=!1,this.plate_1=new OrderPlate,this.plate_1.interactive=!1,this.money=PIXI.Sprite.from("tip_1"),this.stools=PIXI.Sprite.from("chairs_1"),this.stools.centered(),this.stools.position.set(0,20),this.addChild(this.stools),this.plate_0.position.set(25,-15),this.addChild(this.plate_0),this.plate_1.position.set(-25,-15),this.addChild(this.plate_1),this.money.centered(),this.money.position.set(0,-15),this.addChild(this.money),this.guests=[],this.earnings=0,this.guestsEating=0,this.tileUpCoords=null,this.tileDownCoords=null,this.tileLeftPlace=null,this.tileRightPlace=null,this.guestsSpeeds=[];var n="chairs_"+(SOManager.getInstance().upgradeStool+2),a=PIXI.utils.TextureCache[n];a&&(this.stools.texture=a),this.plate_0.visible=!1,this.plate_1.visible=!1,this.money.visible=!1,this.interactive=!0,this.buttonMode=!0,this.pointerover=function(){this.filters=[new PIXI.filters.GlowFilter({color:Guest.highlightColor,distance:3,outerStrength:1,innerStrength:1,quality:1})]}.bind(this),this.pointerout=function(){this.filters=[]}.bind(this),this.pointerdown=this.onPress.bind(this)},i.prototype.onPress=function(t){this.locked||(SoundManager.getInstance().startSound("click_game_object"),this.filters=[],this.delegate&&this.delegate.onButtonClick&&this.delegate.onButtonClick(t))},i.prototype.showFood=function(t){for(var e=0;e<this.guests.length;e++)this.guests[e]===t&&(this["plate_"+e].visible=!0,this["plate_"+e].setType(t.food))},i.prototype.setGuests=function(t){void 0===t?this.guests=[]:(this.earnings=0,this.guests=t.slice()),this.guestsEating=this.guests.length},i.prototype.guestFinishedEating=function(t,e){for(var i=0;i<this.guests.length;i++)this.guests[i]===t&&(this["plate_"+i].setType("none"),this["plate_"+i].visible=!0);this.earnings+=GameData.FOOD_PRICE(e),this.showMoney(e)},i.prototype.takeMoney=function(){this.money.visible=!1,this.plate_0.visible=!1,this.plate_1.visible=!1,this.earnings=0},i.prototype.showMoney=function(t){this.guestsEating--,0===this.guestsEating&&this.earnings>0&&(this.money.texture=PIXI.utils.TextureCache["tip_"+t],this.money.visible=!0)},i.prototype.isFree=function(){return 0===this.guests.length&&0===this.earnings},t.Table=i}(window),function(t,e){function i(){this.initialize()}i.prototype=Object.create(PIXI.Container.prototype),i.prototype.constructor=i,i.prototype.initialize=function(){PIXI.Container.call(this),this.tvSet=0,this.timer=0},i.prototype.play=function(t){if(this.scenes=[],this.tvSet=t,this.stand=PIXI.Sprite.from("tv_stand"),this.stand.anchor.set(.5,1),this.addChild(this.stand),1===t){(f=Sprite.from("tv1_tv")).anchor.set(.5,1),f.position.set(0,-28),this.addChild(f),(P=Sprite.from("tv1_background")).anchor.set(.5,1),P.position.set(-1,-41),this.addChild(P);var e=new PIXI.Container,i=new PIXI.Container,n=new PIXI.Container;this.addChild(e),this.addChild(i),this.addChild(n),(a=Sprite.from("tv1_snow_1")).anchor.set(.5,1),a.position.set(-1,-35),e.addChild(a),(r=Sprite.from("tv1_penguin_parts")).anchor.set(.5,1),r.position.set(-12,-8),a.addChild(r);var a,r,s=Sprite.from("tv1_rod");s.anchor.set(.5,1),s.position.set(-5,0),a.addChild(s),s.timer=0,s.sy=-12,s.onUpdate=function(t){this.timer+=t,this.y=this.sy+1*Math.sin(.005*this.timer)},(a=Sprite.from("tv1_snow_2")).anchor.set(.5,1),a.position.set(-1,-35),i.addChild(a),(r=Sprite.from("tv1_penguin_parts")).anchor.set(.5,1),r.position.set(-12,-8),a.addChild(r);var o=Sprite.from("tv1_fish");o.anchor.set(.5,0),o.position.set(-.5,-20),a.addChild(o),o.timer=0,o.onUpdate=function(t){this.timer+=t,this.rotation=.5*Math.sin(.007*this.timer)};var h=Sprite.from("tv1_bad_signal_1");h.anchor.set(.5,.5),h.position.set(-1,-58),n.addChild(h);var l=Sprite.from("tv1_bad_signal_2");l.anchor.set(.5,.5),l.position.set(-1,-58),n.addChild(l);var u=Sprite.from("tv1_bad_signal_3");u.anchor.set(.5,.5),u.position.set(-1,-58),n.addChild(u),n.signal1=h,n.signal2=l,n.signal3=u,n.timer=0,n.onUpdate=function(t){this.timer+=t;var e=Math.floor(this.timer/60)%3;0===e?(this.signal1.visible=!0,this.signal2.visible=!1,this.signal3.visible=!1):1===e?(this.signal1.visible=!1,this.signal2.visible=!0,this.signal3.visible=!1):2===e&&(this.signal1.visible=!1,this.signal2.visible=!1,this.signal3.visible=!0)},this.scenes=[e,n,i]}else if(2===this.tvSet){(f=Sprite.from("tv2_tv")).anchor.set(.5,1),f.position.set(0,-28),this.addChild(f);e=new PIXI.Container,i=new PIXI.Container;this.addChild(e),this.addChild(i),(P=Sprite.from("tv2_foreground")).anchor.set(.5,1),P.position.set(-1,-41),e.addChild(P);var p=new JumpingPenguin(JumpingPenguin.TYPE_1),c=new JumpingPenguin(JumpingPenguin.TYPE_1),d=new JumpingPenguin(JumpingPenguin.TYPE_1),_=new JumpingPenguin(JumpingPenguin.TYPE_2);e.addChild(p),e.addChild(c),e.addChild(d),e.addChild(_),p.position.set(-20,-60),c.position.set(0,-70),d.position.set(20,-60),_.position.set(5,-55),p.play(Math.randomInt(0,80)),c.play(),d.play(Math.randomInt(0,80)),_.play(Math.randomInt(0,80)),(A=Sprite.from("tv_interferance")).anchor.set(.5,1),A.position.set(-1,-41),A.alpha=.2,e.addChild(A),(v=Sprite.from("tv2_background")).anchor.set(.5,1),v.position.set(0,-44),e.addChild(v),e.mask=v;p=new JumpingPenguin(JumpingPenguin.TYPE_1);i.addChild(p),p.position.set(24,-50),p.scale.set(1.5),p.play();c=new JumpingPenguin(JumpingPenguin.TYPE_3);i.addChild(c),c.position.set(-10,-40),c.play(350),(A=Sprite.from("tv_interferance")).anchor.set(.5,1),A.position.set(-1,-41),A.alpha=.2,i.addChild(A),(v=Sprite.from("tv2_background")).anchor.set(.5,1),v.position.set(0,-44),i.addChild(v),i.mask=v,this.scenes=[e,i]}else if(3===this.tvSet){var f;(f=Sprite.from("tv3_tv")).anchor.set(.5,1),f.position.set(0,-28),this.addChild(f);e=new PIXI.Container,i=new PIXI.Container,n=new PIXI.Container;this.addChild(e),this.addChild(i),this.addChild(n),this.scenes=[e,i,n],(P=Sprite.from("tv3_back")).anchor.set(.5,1),P.position.set(-1,-41),e.addChild(P);var m=Sprite.from("tv3_reporter");m.anchor.set(.5,1),m.position.set(1,-26),e.addChild(m);var g=Sprite.from("tv3_reporter_paper");g.anchor.set(.5,1),g.position.set(-32,-35),e.addChild(g);var y=Sprite.from("tv3_reporter_eyes");y.anchor.set(.5,.5),y.position.set(-31.5,-42),m.addChild(y),y.timer=0,y.ty=-42,y.onUpdate=function(t){this.timer+=t,this.y=this.ty+.4*Math.sin(.005*this.timer)};var b=new PIXI.Text("CRASHED\nUFO",Styles.UFO);b.position.set(-5,-63),e.addChild(b),(S=PIXI.Sprite.from("tv3_ppn")).centered(),S.position.set(40,-53),S.scale.set(.25),e.addChild(S),(A=Sprite.from("tv_interferance")).anchor.set(.5,1),A.position.set(-1,-41),A.alpha=.2,e.addChild(A),e.interferance=A,(v=Sprite.from("tv3_mask")).anchor.set(.5,1),v.position.set(0,-44),e.addChild(v),e.mask=v;var v,T=Sprite.from("tv3_ufo");T.anchor.set(1,0),T.position.set(51,-94),i.addChild(T),(A=Sprite.from("tv_interferance")).anchor.set(.5,1),A.position.set(-1,-41),A.alpha=.2,i.addChild(A),(v=Sprite.from("tv3_mask")).anchor.set(.5,1),v.position.set(0,-44),i.addChild(v),i.mask=v,i.ufo=T,i.isPlaying=!1;var I=PIXI.Sprite.from("tv3_one_penguin");i.addChild(I);var P,S,A,D=PIXI.Sprite.from("tv3_2penguins");i.addChild(D),(S=PIXI.Sprite.from("tv3_ppn")).centered(),S.position.set(0,-67),S.scale.set(.8),i.addChild(S),i.up1=I,i.up2=D,i.ppn=S,i.scene1=e,i.play=function(){if(!this.isPlaying){this.isPlaying=!0,this.up1.position.set(-70,-80),this.up2.position.set(-70,-30),this.ufo.scale.set(1),createjs.Tween.get(this.ufo.scale).to({x:2,y:2},900),createjs.Tween.get(this.up1).wait(600).to({x:-20,y:-70},1200),createjs.Tween.get(this.up2).wait(600).to({x:-40,y:-65},1200);var t=this;t.ppn.visible=!1,createjs.Tween.get(this).wait(3e3).call(function(){t.ppn.visible=!0})}},i.onUpdate=function(t){},A.bringToFront(),(P=Sprite.from("tv3_back")).anchor.set(.5,1),P.position.set(-1,-41),n.addChild(P),(S=PIXI.Sprite.from("tv3_ppn")).centered(),S.position.set(0,-67),S.scale.set(.8),n.addChild(S),(A=Sprite.from("tv_interferance")).anchor.set(.5,1),A.position.set(-1,-41),A.alpha=.1,n.addChild(A)}t<=0&&(this.visible=!1)},i.prototype.onUpdate=function(t){this.timer+=t,1===this.tvSet?this.timer<2e3?(this.removeScenes(),this.scenes[0].visible=!0):this.timer<2200?(this.removeScenes(),this.scenes[1].visible=!0):this.timer<4e3?(this.removeScenes(),this.scenes[2].visible=!0):this.timer<4200?(this.removeScenes(),this.scenes[1].visible=!0):this.timer=0:2===this.tvSet?this.timer<3500?(this.removeScenes(),this.scenes[0].visible=!0):this.timer<5e3?(this.removeScenes(),this.scenes[1].visible=!0):this.timer=0:3===this.tvSet&&(this.timer<3e3?(this.removeScenes(),this.scenes[0].visible=!0):this.timer<7e3?(this.scenes[0].interferance.visible=!1,this.scenes[1].visible=!0,this.scenes[1].play()):this.timer<7600?(this.removeScenes(),this.scenes[2].visible=!0):(this.scenes[1].isPlaying=!1,this.timer=0,this.scenes[0].interferance.visible=!0))},i.prototype.removeScenes=function(){for(var t=0;t<this.scenes.length;t++){this.scenes[t].visible=!1}},t.TV=i}(window),function(t,e){function i(){this.initialize()}i.prototype=Object.create(PIXI.Container.prototype),i.prototype.constructor=i,i.prototype.initialize=function(){PIXI.Container.call(this),this.delegate=null,this.locked=!1,this.type="skate",this.typeIndex=0,this.star_effect=PIXI.Sprite.from("big_star"),this.star_effect.centered(),this.addChild(this.star_effect),this.cost_tf=new PIXI.Text("",Styles.RESULT_LABEL),this.cost_tf.centered(),this.cost_tf.y=42,this.addChild(this.cost_tf),this.icon=new PIXI.Sprite,this.icon.centered(),this.addChild(this.icon),this.upgradeItemLocked=!1,this.star_effect_dr=0,this._upgradeType="skate",this._upgradeTypeIndex=0,this.interactive=!0,this.buttonMode=!0,this.pointerover=this.onRollOver.bind(this),this.pointerout=this.onRollOut.bind(this),this.pointerup=this.onRelease.bind(this),this.isRolling=!1,this.speed=0},i.prototype.setType=function(){},i.prototype.setItemIcon=function(){this.icon.texture=PIXI.utils.TextureCache[this.type+"_"+(this.typeIndex+1)],this.cost_tf.text=Utils.formattedCurrency(GameData.UPGRADE_COST(this.upgradeTypeAndIndex)),this.cost_tf.y=this.icon.height/2+12},Object.defineProperty(i.prototype,"upgradeType",{set:function(t){this._upgradeType=t},get:function(){return this._upgradeType}}),Object.defineProperty(i.prototype,"upgradeTypeIndex",{set:function(t){this._upgradeTypeIndex=t},get:function(){return this._upgradeTypeIndex}}),Object.defineProperty(i.prototype,"upgradeTypeAndIndex",{get:function(){return this.type+"_"+this.typeIndex}}),i.prototype.lockUpgradeItem=function(t){this.upgradeItemLocked=!0,this.cost_tf.text=t?"Owned":"?",this.alpha=.6},i.prototype.unlockUpgradeItem=function(){this.upgradeItemLocked=!1,this.cost_tf.text=Utils.formattedCurrency(GameData.UPGRADE_COST(this.upgradeTypeAndIndex)),this.alpha=1,this.filters=[]},i.prototype.onRollOver=function(){this.highlightColor=13949608,this.locked||this.upgradeItemLocked||(this.filters=[new PIXI.filters.GlowFilter({color:this.highlightColor,outerStrength:8,distance:8})],this.star_effect_dr=0,this.isRolling=!0)},i.prototype.onRollOut=function(){this.filters=[],this.isRolling=!1,this.speed=0},i.prototype.onRelease=function(t){this.locked||this.upgradeItemLocked||this.delegate&&this.delegate.onUpgradeBtn&&this.delegate.onUpgradeBtn(t)},i.prototype.onUpdate=function(t){this.isRolling&&(this.speed+=3e-6*t,this.speed=Math.clamp(this.speed,0,.001),this.star_effect.rotation+=t*this.speed)},t.UpgradeItemButton=i}(window);"use strict";var __extends=this&&this.__extends||function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(e,i)};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}();!function(t){var e=function(){function e(e){this._clock=new t.WorldClock,this._events=[],this._objects=[],this._eventManager=null,this._eventManager=e}return e.prototype.advanceTime=function(e){if(this._objects.length>0){for(var i=0,n=this._objects;i<n.length;i++){n[i].returnToPool()}this._objects.length=0}if(this._clock.advanceTime(e),this._events.length>0){for(var a=0;a<this._events.length;++a){var r=this._events[a],s=r.armature;null!==s._armatureData&&(s.eventDispatcher.dispatchDBEvent(r.type,r),r.type===t.EventObject.SOUND_EVENT&&this._eventManager.dispatchDBEvent(r.type,r)),this.bufferObject(r)}this._events.length=0}},e.prototype.bufferEvent=function(t){this._events.indexOf(t)<0&&this._events.push(t)},e.prototype.bufferObject=function(t){this._objects.indexOf(t)<0&&this._objects.push(t)},Object.defineProperty(e.prototype,"clock",{get:function(){return this._clock},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"eventManager",{get:function(){return this._eventManager},enumerable:!0,configurable:!0}),e.VERSION="5.7.000",e.yDown=!0,e.debug=!1,e.debugDraw=!1,e}();t.DragonBones=e}(dragonBones||(dragonBones={})),console.warn||(console.warn=function(){}),console.assert||(console.assert=function(){}),Date.now||(Date.now=function(){return(new Date).getTime()});var dragonBones;__extends=function(t,e){function i(){this.constructor=t}for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);i.prototype=e.prototype,t.prototype=new i};if(void 0===global&&"undefined"!=typeof window)var global=window;"object"==typeof exports&&"object"==typeof module?module.exports=dragonBones:"function"==typeof define&&define.amd?define(["dragonBones"],function(){return dragonBones}):"object"==typeof exports?exports=dragonBones:void 0!==global&&(global.dragonBones=dragonBones),function(t){var e=function(){function t(){this.hashCode=t._hashCode++,this._isInPool=!1}return t._returnObject=function(e){var i=String(e.constructor),n=i in t._maxCountMap?t._maxCountMap[i]:t._defaultMaxCount,a=t._poolsMap[i]=t._poolsMap[i]||[];a.length<n&&(e._isInPool?console.warn("The object is already in the pool."):(e._isInPool=!0,a.push(e)))},t.toString=function(){throw new Error},t.setMaxCount=function(e,i){if((i<0||i!=i)&&(i=0),null!==e)null!==(a=(n=String(e))in t._poolsMap?t._poolsMap[n]:null)&&a.length>i&&(a.length=i),t._maxCountMap[n]=i;else for(var n in t._defaultMaxCount=i,t._poolsMap){var a;(a=t._poolsMap[n]).length>i&&(a.length=i),n in t._maxCountMap&&(t._maxCountMap[n]=i)}},t.clearPool=function(e){if(void 0===e&&(e=null),null!==e){var i=String(e);null!==(a=i in t._poolsMap?t._poolsMap[i]:null)&&a.length>0&&(a.length=0)}else for(var n in t._poolsMap){var a;(a=t._poolsMap[n]).length=0}},t.borrowObject=function(e){var i=String(e),n=i in t._poolsMap?t._poolsMap[i]:null;if(null!==n&&n.length>0){var a=n.pop();return a._isInPool=!1,a}var r=new e;return r._onClear(),r},t.prototype.returnToPool=function(){this._onClear(),t._returnObject(this)},t._hashCode=0,t._defaultMaxCount=3e3,t._maxCountMap={},t._poolsMap={},t}();t.BaseObject=e}(dragonBones||(dragonBones={})),function(t){var e=function(){function t(t,e,i,n,a,r){void 0===t&&(t=1),void 0===e&&(e=0),void 0===i&&(i=0),void 0===n&&(n=1),void 0===a&&(a=0),void 0===r&&(r=0),this.a=t,this.b=e,this.c=i,this.d=n,this.tx=a,this.ty=r}return t.prototype.toString=function(){return"[object dragonBones.Matrix] a:"+this.a+" b:"+this.b+" c:"+this.c+" d:"+this.d+" tx:"+this.tx+" ty:"+this.ty},t.prototype.copyFrom=function(t){return this.a=t.a,this.b=t.b,this.c=t.c,this.d=t.d,this.tx=t.tx,this.ty=t.ty,this},t.prototype.copyFromArray=function(t,e){return void 0===e&&(e=0),this.a=t[e],this.b=t[e+1],this.c=t[e+2],this.d=t[e+3],this.tx=t[e+4],this.ty=t[e+5],this},t.prototype.identity=function(){return this.a=this.d=1,this.b=this.c=0,this.tx=this.ty=0,this},t.prototype.concat=function(t){var e=this.a*t.a,i=0,n=0,a=this.d*t.d,r=this.tx*t.a+t.tx,s=this.ty*t.d+t.ty;return 0===this.b&&0===this.c||(e+=this.b*t.c,i+=this.b*t.d,n+=this.c*t.a,a+=this.c*t.b),0===t.b&&0===t.c||(i+=this.a*t.b,n+=this.d*t.c,r+=this.ty*t.c,s+=this.tx*t.b),this.a=e,this.b=i,this.c=n,this.d=a,this.tx=r,this.ty=s,this},t.prototype.invert=function(){var t=this.a,e=this.b,i=this.c,n=this.d,a=this.tx,r=this.ty;if(0===e&&0===i)return this.b=this.c=0,0===t||0===n?this.a=this.b=this.tx=this.ty=0:(t=this.a=1/t,n=this.d=1/n,this.tx=-t*a,this.ty=-n*r),this;var s=t*n-e*i;if(0===s)return this.a=this.d=1,this.b=this.c=0,this.tx=this.ty=0,this;s=1/s;var o=this.a=n*s;return e=this.b=-e*s,i=this.c=-i*s,n=this.d=t*s,this.tx=-(o*a+i*r),this.ty=-(e*a+n*r),this},t.prototype.transformPoint=function(t,e,i,n){void 0===n&&(n=!1),i.x=this.a*t+this.c*e,i.y=this.b*t+this.d*e,n||(i.x+=this.tx,i.y+=this.ty)},t.prototype.transformRectangle=function(t,e){void 0===e&&(e=!1);var i=this.a,n=this.b,a=this.c,r=this.d,s=e?0:this.tx,o=e?0:this.ty,h=t.x,l=t.y,u=h+t.width,p=l+t.height,c=i*h+a*l+s,d=n*h+r*l+o,_=i*u+a*l+s,f=n*u+r*l+o,m=i*u+a*p+s,g=n*u+r*p+o,y=i*h+a*p+s,b=n*h+r*p+o,v=0;c>_&&(v=c,c=_,_=v),m>y&&(v=m,m=y,y=v),t.x=Math.floor(c<m?c:m),t.width=Math.ceil((_>y?_:y)-t.x),d>f&&(v=d,d=f,f=v),g>b&&(v=g,g=b,b=v),t.y=Math.floor(d<g?d:g),t.height=Math.ceil((f>b?f:b)-t.y)},t}();t.Matrix=e}(dragonBones||(dragonBones={})),function(t){var e=function(){function t(t,e,i,n,a,r){void 0===t&&(t=0),void 0===e&&(e=0),void 0===i&&(i=0),void 0===n&&(n=0),void 0===a&&(a=1),void 0===r&&(r=1),this.x=t,this.y=e,this.skew=i,this.rotation=n,this.scaleX=a,this.scaleY=r}return t.normalizeRadian=function(t){return t=(t+Math.PI)%(2*Math.PI),t+=t>0?-Math.PI:Math.PI},t.prototype.toString=function(){return"[object dragonBones.Transform] x:"+this.x+" y:"+this.y+" skewX:"+180*this.skew/Math.PI+" skewY:"+180*this.rotation/Math.PI+" scaleX:"+this.scaleX+" scaleY:"+this.scaleY},t.prototype.copyFrom=function(t){return this.x=t.x,this.y=t.y,this.skew=t.skew,this.rotation=t.rotation,this.scaleX=t.scaleX,this.scaleY=t.scaleY,this},t.prototype.identity=function(){return this.x=this.y=0,this.skew=this.rotation=0,this.scaleX=this.scaleY=1,this},t.prototype.add=function(t){return this.x+=t.x,this.y+=t.y,this.skew+=t.skew,this.rotation+=t.rotation,this.scaleX*=t.scaleX,this.scaleY*=t.scaleY,this},t.prototype.minus=function(t){return this.x-=t.x,this.y-=t.y,this.skew-=t.skew,this.rotation-=t.rotation,this.scaleX/=t.scaleX,this.scaleY/=t.scaleY,this},t.prototype.fromMatrix=function(e){var i=this.scaleX,n=this.scaleY,a=t.PI_Q;this.x=e.tx,this.y=e.ty,this.rotation=Math.atan(e.b/e.a);var r=Math.atan(-e.c/e.d);return this.scaleX=this.rotation>-a&&this.rotation<a?e.a/Math.cos(this.rotation):e.b/Math.sin(this.rotation),this.scaleY=r>-a&&r<a?e.d/Math.cos(r):-e.c/Math.sin(r),i>=0&&this.scaleX<0&&(this.scaleX=-this.scaleX,this.rotation=this.rotation-Math.PI),n>=0&&this.scaleY<0&&(this.scaleY=-this.scaleY,r-=Math.PI),this.skew=r-this.rotation,this},t.prototype.toMatrix=function(t){return 0===this.rotation?(t.a=1,t.b=0):(t.a=Math.cos(this.rotation),t.b=Math.sin(this.rotation)),0===this.skew?(t.c=-t.b,t.d=t.a):(t.c=-Math.sin(this.skew+this.rotation),t.d=Math.cos(this.skew+this.rotation)),1!==this.scaleX&&(t.a*=this.scaleX,t.b*=this.scaleX),1!==this.scaleY&&(t.c*=this.scaleY,t.d*=this.scaleY),t.tx=this.x,t.ty=this.y,this},t.PI=Math.PI,t.PI_D=2*Math.PI,t.PI_H=Math.PI/2,t.PI_Q=Math.PI/4,t.RAD_DEG=180/Math.PI,t.DEG_RAD=Math.PI/180,t}();t.Transform=e}(dragonBones||(dragonBones={})),function(t){var e=function(){function t(t,e,i,n,a,r,s,o){void 0===t&&(t=1),void 0===e&&(e=1),void 0===i&&(i=1),void 0===n&&(n=1),void 0===a&&(a=0),void 0===r&&(r=0),void 0===s&&(s=0),void 0===o&&(o=0),this.alphaMultiplier=t,this.redMultiplier=e,this.greenMultiplier=i,this.blueMultiplier=n,this.alphaOffset=a,this.redOffset=r,this.greenOffset=s,this.blueOffset=o}return t.prototype.copyFrom=function(t){this.alphaMultiplier=t.alphaMultiplier,this.redMultiplier=t.redMultiplier,this.greenMultiplier=t.greenMultiplier,this.blueMultiplier=t.blueMultiplier,this.alphaOffset=t.alphaOffset,this.redOffset=t.redOffset,this.greenOffset=t.greenOffset,this.blueOffset=t.blueOffset},t.prototype.identity=function(){this.alphaMultiplier=this.redMultiplier=this.greenMultiplier=this.blueMultiplier=1,this.alphaOffset=this.redOffset=this.greenOffset=this.blueOffset=0},t}();t.ColorTransform=e}(dragonBones||(dragonBones={})),function(t){var e=function(){function t(t,e){void 0===t&&(t=0),void 0===e&&(e=0),this.x=t,this.y=e}return t.prototype.copyFrom=function(t){this.x=t.x,this.y=t.y},t.prototype.clear=function(){this.x=this.y=0},t}();t.Point=e}(dragonBones||(dragonBones={})),function(t){var e=function(){function t(t,e,i,n){void 0===t&&(t=0),void 0===e&&(e=0),void 0===i&&(i=0),void 0===n&&(n=0),this.x=t,this.y=e,this.width=i,this.height=n}return t.prototype.copyFrom=function(t){this.x=t.x,this.y=t.y,this.width=t.width,this.height=t.height},t.prototype.clear=function(){this.x=this.y=0,this.width=this.height=0},t}();t.Rectangle=e}(dragonBones||(dragonBones={})),function(t){var e=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.ints=[],e.floats=[],e.strings=[],e}return __extends(e,t),e.toString=function(){return"[class dragonBones.UserData]"},e.prototype._onClear=function(){this.ints.length=0,this.floats.length=0,this.strings.length=0},e.prototype.addInt=function(t){this.ints.push(t)},e.prototype.addFloat=function(t){this.floats.push(t)},e.prototype.addString=function(t){this.strings.push(t)},e.prototype.getInt=function(t){return void 0===t&&(t=0),t>=0&&t<this.ints.length?this.ints[t]:0},e.prototype.getFloat=function(t){return void 0===t&&(t=0),t>=0&&t<this.floats.length?this.floats[t]:0},e.prototype.getString=function(t){return void 0===t&&(t=0),t>=0&&t<this.strings.length?this.strings[t]:""},e}(t.BaseObject);t.UserData=e;var i=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.data=null,e}return __extends(e,t),e.toString=function(){return"[class dragonBones.ActionData]"},e.prototype._onClear=function(){null!==this.data&&this.data.returnToPool(),this.type=0,this.name="",this.bone=null,this.slot=null,this.data=null},e}(t.BaseObject);t.ActionData=i}(dragonBones||(dragonBones={})),function(t){var e=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.frameIndices=[],e.cachedFrames=[],e.armatureNames=[],e.armatures={},e.userData=null,e}return __extends(e,t),e.toString=function(){return"[class dragonBones.DragonBonesData]"},e.prototype._onClear=function(){for(var t in this.armatures)this.armatures[t].returnToPool(),delete this.armatures[t];null!==this.userData&&this.userData.returnToPool(),this.autoSearch=!1,this.frameRate=0,this.version="",this.name="",this.stage=null,this.frameIndices.length=0,this.cachedFrames.length=0,this.armatureNames.length=0,this.binary=null,this.intArray=null,this.floatArray=null,this.frameIntArray=null,this.frameFloatArray=null,this.frameArray=null,this.timelineArray=null,this.colorArray=null,this.userData=null},e.prototype.addArmature=function(t){t.name in this.armatures?console.warn("Same armature: "+t.name):(t.parent=this,this.armatures[t.name]=t,this.armatureNames.push(t.name))},e.prototype.getArmature=function(t){return t in this.armatures?this.armatures[t]:null},e}(t.BaseObject);t.DragonBonesData=e}(dragonBones||(dragonBones={})),function(t){var e=function(e){function i(){var i=null!==e&&e.apply(this,arguments)||this;return i.aabb=new t.Rectangle,i.animationNames=[],i.sortedBones=[],i.sortedSlots=[],i.defaultActions=[],i.actions=[],i.bones={},i.slots={},i.constraints={},i.skins={},i.animations={},i.canvas=null,i.userData=null,i}return __extends(i,e),i.toString=function(){return"[class dragonBones.ArmatureData]"},i.prototype._onClear=function(){for(var t=0,e=this.defaultActions;t<e.length;t++){e[t].returnToPool()}for(var i=0,n=this.actions;i<n.length;i++){n[i].returnToPool()}for(var a in this.bones)this.bones[a].returnToPool(),delete this.bones[a];for(var a in this.slots)this.slots[a].returnToPool(),delete this.slots[a];for(var a in this.constraints)this.constraints[a].returnToPool(),delete this.constraints[a];for(var a in this.skins)this.skins[a].returnToPool(),delete this.skins[a];for(var a in this.animations)this.animations[a].returnToPool(),delete this.animations[a];null!==this.canvas&&this.canvas.returnToPool(),null!==this.userData&&this.userData.returnToPool(),this.type=0,this.frameRate=0,this.cacheFrameRate=0,this.scale=1,this.name="",this.aabb.clear(),this.animationNames.length=0,this.sortedBones.length=0,this.sortedSlots.length=0,this.defaultActions.length=0,this.actions.length=0,this.defaultSkin=null,this.defaultAnimation=null,this.canvas=null,this.userData=null,this.parent=null},i.prototype.sortBones=function(){var t=this.sortedBones.length;if(!(t<=0)){var e=this.sortedBones.concat(),i=0,n=0;for(this.sortedBones.length=0;n<t;){var a=e[i++];if(i>=t&&(i=0),!(this.sortedBones.indexOf(a)>=0)){var r=!1;for(var s in this.constraints){var o=this.constraints[s];if(o.root===a&&this.sortedBones.indexOf(o.target)<0){r=!0;break}}r||null!==a.parent&&this.sortedBones.indexOf(a.parent)<0||(this.sortedBones.push(a),n++)}}}},i.prototype.cacheFrames=function(t){if(!(this.cacheFrameRate>0))for(var e in this.cacheFrameRate=t,this.animations)this.animations[e].cacheFrames(this.cacheFrameRate)},i.prototype.setCacheFrame=function(t,e){var i=this.parent.cachedFrames,n=i.length;return i.length+=10,i[n]=t.a,i[n+1]=t.b,i[n+2]=t.c,i[n+3]=t.d,i[n+4]=t.tx,i[n+5]=t.ty,i[n+6]=e.rotation,i[n+7]=e.skew,i[n+8]=e.scaleX,i[n+9]=e.scaleY,n},i.prototype.getCacheFrame=function(t,e,i){var n=this.parent.cachedFrames;t.a=n[i],t.b=n[i+1],t.c=n[i+2],t.d=n[i+3],t.tx=n[i+4],t.ty=n[i+5],e.rotation=n[i+6],e.skew=n[i+7],e.scaleX=n[i+8],e.scaleY=n[i+9],e.x=t.tx,e.y=t.ty},i.prototype.addBone=function(t){t.name in this.bones?console.warn("Same bone: "+t.name):(this.bones[t.name]=t,this.sortedBones.push(t))},i.prototype.addSlot=function(t){t.name in this.slots?console.warn("Same slot: "+t.name):(this.slots[t.name]=t,this.sortedSlots.push(t))},i.prototype.addConstraint=function(t){t.name in this.constraints?console.warn("Same constraint: "+t.name):this.constraints[t.name]=t},i.prototype.addSkin=function(t){t.name in this.skins?console.warn("Same skin: "+t.name):(t.parent=this,this.skins[t.name]=t,null===this.defaultSkin&&(this.defaultSkin=t),"default"===t.name&&(this.defaultSkin=t))},i.prototype.addAnimation=function(t){t.name in this.animations?console.warn("Same animation: "+t.name):(t.parent=this,this.animations[t.name]=t,this.animationNames.push(t.name),null===this.defaultAnimation&&(this.defaultAnimation=t))},i.prototype.addAction=function(t,e){e?this.defaultActions.push(t):this.actions.push(t)},i.prototype.getBone=function(t){return t in this.bones?this.bones[t]:null},i.prototype.getSlot=function(t){return t in this.slots?this.slots[t]:null},i.prototype.getConstraint=function(t){return t in this.constraints?this.constraints[t]:null},i.prototype.getSkin=function(t){return t in this.skins?this.skins[t]:null},i.prototype.getMesh=function(t,e,i){var n=this.getSkin(t);return null===n?null:n.getDisplay(e,i)},i.prototype.getAnimation=function(t){return t in this.animations?this.animations[t]:null},i}(t.BaseObject);t.ArmatureData=e;var i=function(e){function i(){var i=null!==e&&e.apply(this,arguments)||this;return i.transform=new t.Transform,i.userData=null,i}return __extends(i,e),i.toString=function(){return"[class dragonBones.BoneData]"},i.prototype._onClear=function(){null!==this.userData&&this.userData.returnToPool(),this.inheritTranslation=!1,this.inheritRotation=!1,this.inheritScale=!1,this.inheritReflection=!1,this.type=0,this.length=0,this.alpha=1,this.name="",this.transform.identity(),this.userData=null,this.parent=null},i}(t.BaseObject);t.BoneData=i;var n=function(e){function i(){var i=null!==e&&e.apply(this,arguments)||this;return i.geometry=new t.GeometryData,i}return __extends(i,e),i.toString=function(){return"[class dragonBones.SurfaceData]"},i.prototype._onClear=function(){e.prototype._onClear.call(this),this.type=1,this.segmentX=0,this.segmentY=0,this.geometry.clear()},i}(i);t.SurfaceData=n;var a=function(e){function i(){var t=null!==e&&e.apply(this,arguments)||this;return t.color=null,t.userData=null,t}return __extends(i,e),i.createColor=function(){return new t.ColorTransform},i.toString=function(){return"[class dragonBones.SlotData]"},i.prototype._onClear=function(){null!==this.userData&&this.userData.returnToPool(),this.blendMode=0,this.displayIndex=0,this.zOrder=0,this.zIndex=0,this.alpha=1,this.name="",this.color=null,this.userData=null,this.parent=null},i.DEFAULT_COLOR=new t.ColorTransform,i}(t.BaseObject);t.SlotData=a}(dragonBones||(dragonBones={})),function(t){var e=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return __extends(e,t),e.prototype._onClear=function(){this.order=0,this.name="",this.type=0,this.target=null,this.root=null,this.bone=null},e}(t.BaseObject);t.ConstraintData=e;var i=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return __extends(e,t),e.toString=function(){return"[class dragonBones.IKConstraintData]"},e.prototype._onClear=function(){t.prototype._onClear.call(this),this.scaleEnabled=!1,this.bendPositive=!1,this.weight=1},e}(e);t.IKConstraintData=i;var n=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.bones=[],e}return __extends(e,t),e.toString=function(){return"[class dragonBones.PathConstraintData]"},e.prototype._onClear=function(){t.prototype._onClear.call(this),this.pathSlot=null,this.pathDisplayData=null,this.bones.length=0,this.positionMode=0,this.spacingMode=1,this.rotateMode=1,this.position=0,this.spacing=0,this.rotateOffset=0,this.rotateMix=0,this.translateMix=0},e.prototype.AddBone=function(t){this.bones.push(t)},e}(e);t.PathConstraintData=n}(dragonBones||(dragonBones={})),function(t){var e=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return __extends(e,t),e.toString=function(){return"[class dragonBones.CanvasData]"},e.prototype._onClear=function(){this.hasBackground=!1,this.color=0,this.x=0,this.y=0,this.width=0,this.height=0},e}(t.BaseObject);t.CanvasData=e}(dragonBones||(dragonBones={})),function(t){var e=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.displays={},e}return __extends(e,t),e.toString=function(){return"[class dragonBones.SkinData]"},e.prototype._onClear=function(){for(var t in this.displays){for(var e=0,i=this.displays[t];e<i.length;e++){var n=i[e];null!==n&&n.returnToPool()}delete this.displays[t]}this.name="",this.parent=null},e.prototype.addDisplay=function(t,e){t in this.displays||(this.displays[t]=[]),null!==e&&(e.parent=this),this.displays[t].push(e)},e.prototype.getDisplay=function(t,e){var i=this.getDisplays(t);if(null!==i)for(var n=0,a=i;n<a.length;n++){var r=a[n];if(null!==r&&r.name===e)return r}return null},e.prototype.getDisplays=function(t){return t in this.displays?this.displays[t]:null},e}(t.BaseObject);t.SkinData=e}(dragonBones||(dragonBones={})),function(t){var e=function(){function t(){this.weight=null}return t.prototype.clear=function(){this.isShared||null===this.weight||this.weight.returnToPool(),this.isShared=!1,this.inheritDeform=!1,this.offset=0,this.data=null,this.weight=null},t.prototype.shareFrom=function(t){this.isShared=!0,this.offset=t.offset,this.weight=t.weight},Object.defineProperty(t.prototype,"vertexCount",{get:function(){return this.data.intArray[this.offset+0]},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"triangleCount",{get:function(){return this.data.intArray[this.offset+1]},enumerable:!0,configurable:!0}),t}();t.GeometryData=e;var i=function(e){function i(){var i=null!==e&&e.apply(this,arguments)||this;return i.transform=new t.Transform,i}return __extends(i,e),i.prototype._onClear=function(){this.name="",this.path="",this.transform.identity(),this.parent=null},i}(t.BaseObject);t.DisplayData=i;var n=function(e){function i(){var i=null!==e&&e.apply(this,arguments)||this;return i.pivot=new t.Point,i}return __extends(i,e),i.toString=function(){return"[class dragonBones.ImageDisplayData]"},i.prototype._onClear=function(){e.prototype._onClear.call(this),this.type=0,this.pivot.clear(),this.texture=null},i}(i);t.ImageDisplayData=n;var a=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.actions=[],e}return __extends(e,t),e.toString=function(){return"[class dragonBones.ArmatureDisplayData]"},e.prototype._onClear=function(){t.prototype._onClear.call(this);for(var e=0,i=this.actions;e<i.length;e++){i[e].returnToPool()}this.type=1,this.inheritAnimation=!1,this.actions.length=0,this.armature=null},e.prototype.addAction=function(t){this.actions.push(t)},e}(i);t.ArmatureDisplayData=a;var r=function(t){function i(){var i=null!==t&&t.apply(this,arguments)||this;return i.geometry=new e,i}return __extends(i,t),i.toString=function(){return"[class dragonBones.MeshDisplayData]"},i.prototype._onClear=function(){t.prototype._onClear.call(this),this.type=2,this.geometry.clear(),this.texture=null},i}(i);t.MeshDisplayData=r;var s=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.boundingBox=null,e}return __extends(e,t),e.toString=function(){return"[class dragonBones.BoundingBoxDisplayData]"},e.prototype._onClear=function(){t.prototype._onClear.call(this),null!==this.boundingBox&&this.boundingBox.returnToPool(),this.type=3,this.boundingBox=null},e}(i);t.BoundingBoxDisplayData=s;var o=function(t){function i(){var i=null!==t&&t.apply(this,arguments)||this;return i.geometry=new e,i.curveLengths=[],i}return __extends(i,t),i.toString=function(){return"[class dragonBones.PathDisplayData]"},i.prototype._onClear=function(){t.prototype._onClear.call(this),this.type=4,this.closed=!1,this.constantSpeed=!1,this.geometry.clear(),this.curveLengths.length=0},i}(i);t.PathDisplayData=o;var h=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.bones=[],e}return __extends(e,t),e.toString=function(){return"[class dragonBones.WeightData]"},e.prototype._onClear=function(){this.count=0,this.offset=0,this.bones.length=0},e.prototype.addBone=function(t){this.bones.push(t)},e}(t.BaseObject);t.WeightData=h}(dragonBones||(dragonBones={})),function(t){var e=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return __extends(e,t),e.prototype._onClear=function(){this.color=0,this.width=0,this.height=0},e}(t.BaseObject);t.BoundingBoxData=e;var i=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return __extends(e,t),e.toString=function(){return"[class dragonBones.RectangleBoundingBoxData]"},e._computeOutCode=function(t,e,i,n,a,r){var s=0;return t<i?s|=1:t>a&&(s|=2),e<n?s|=4:e>r&&(s|=8),s},e.rectangleIntersectsSegment=function(t,i,n,a,r,s,o,h,l,u,p){void 0===l&&(l=null),void 0===u&&(u=null),void 0===p&&(p=null);var c=t>r&&t<o&&i>s&&i<h,d=n>r&&n<o&&a>s&&a<h;if(c&&d)return-1;for(var _=0,f=e._computeOutCode(t,i,r,s,o,h),m=e._computeOutCode(n,a,r,s,o,h);;){if(0==(f|m)){_=2;break}if(0!=(f&m))break;var g=0,y=0,b=0,v=0!==f?f:m;0!=(4&v)?(g=t+(n-t)*(s-i)/(a-i),y=s,null!==p&&(b=.5*-Math.PI)):0!=(8&v)?(g=t+(n-t)*(h-i)/(a-i),y=h,null!==p&&(b=.5*Math.PI)):0!=(2&v)?(y=i+(a-i)*(o-t)/(n-t),g=o,null!==p&&(b=0)):0!=(1&v)&&(y=i+(a-i)*(r-t)/(n-t),g=r,null!==p&&(b=Math.PI)),v===f?(t=g,i=y,f=e._computeOutCode(t,i,r,s,o,h),null!==p&&(p.x=b)):(n=g,a=y,m=e._computeOutCode(n,a,r,s,o,h),null!==p&&(p.y=b))}return _&&(c?(_=2,null!==l&&(l.x=n,l.y=a),null!==u&&(u.x=n,u.y=n),null!==p&&(p.x=p.y+Math.PI)):d?(_=1,null!==l&&(l.x=t,l.y=i),null!==u&&(u.x=t,u.y=i),null!==p&&(p.y=p.x+Math.PI)):(_=3,null!==l&&(l.x=t,l.y=i),null!==u&&(u.x=n,u.y=a))),_},e.prototype._onClear=function(){t.prototype._onClear.call(this),this.type=0},e.prototype.containsPoint=function(t,e){var i=.5*this.width;if(t>=-i&&t<=i){var n=.5*this.height;if(e>=-n&&e<=n)return!0}return!1},e.prototype.intersectsSegment=function(t,i,n,a,r,s,o){void 0===r&&(r=null),void 0===s&&(s=null),void 0===o&&(o=null);var h=.5*this.width,l=.5*this.height;return e.rectangleIntersectsSegment(t,i,n,a,-h,-l,h,l,r,s,o)},e}(e);t.RectangleBoundingBoxData=i;var n=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return __extends(e,t),e.toString=function(){return"[class dragonBones.EllipseData]"},e.ellipseIntersectsSegment=function(t,e,i,n,a,r,s,o,h,l,u){void 0===h&&(h=null),void 0===l&&(l=null),void 0===u&&(u=null);var p=s/o,c=p*p,d=i-t,_=(n*=p)-(e*=p),f=Math.sqrt(d*d+_*_),m=d/f,g=_/f,y=(a-t)*m+(r-e)*g,b=s*s,v=b-(t*t+e*e)+y*y,T=0;if(v>=0){var I=Math.sqrt(v),P=y-I,S=y+I,A=P<0?-1:P<=f?0:1,D=S<0?-1:S<=f?0:1,x=A*D;if(x<0)return-1;0===x&&(-1===A?(T=2,i=t+S*m,n=(e+S*g)/p,null!==h&&(h.x=i,h.y=n),null!==l&&(l.x=i,l.y=n),null!==u&&(u.x=Math.atan2(n/b*c,i/b),u.y=u.x+Math.PI)):1===D?(T=1,t+=P*m,e=(e+P*g)/p,null!==h&&(h.x=t,h.y=e),null!==l&&(l.x=t,l.y=e),null!==u&&(u.x=Math.atan2(e/b*c,t/b),u.y=u.x+Math.PI)):(T=3,null!==h&&(h.x=t+P*m,h.y=(e+P*g)/p,null!==u&&(u.x=Math.atan2(h.y/b*c,h.x/b))),null!==l&&(l.x=t+S*m,l.y=(e+S*g)/p,null!==u&&(u.y=Math.atan2(l.y/b*c,l.x/b)))))}return T},e.prototype._onClear=function(){t.prototype._onClear.call(this),this.type=1},e.prototype.containsPoint=function(t,e){var i=.5*this.width;if(t>=-i&&t<=i){var n=.5*this.height;if(e>=-n&&e<=n)return e*=i/n,Math.sqrt(t*t+e*e)<=i}return!1},e.prototype.intersectsSegment=function(t,i,n,a,r,s,o){return void 0===r&&(r=null),void 0===s&&(s=null),void 0===o&&(o=null),e.ellipseIntersectsSegment(t,i,n,a,0,0,.5*this.width,.5*this.height,r,s,o)},e}(e);t.EllipseBoundingBoxData=n;var a=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.vertices=[],e}return __extends(e,t),e.toString=function(){return"[class dragonBones.PolygonBoundingBoxData]"},e.polygonIntersectsSegment=function(t,e,i,n,a,r,s,o){void 0===r&&(r=null),void 0===s&&(s=null),void 0===o&&(o=null),t===i&&(t=i+1e-6),e===n&&(e=n+1e-6);for(var h=a.length,l=t-i,u=e-n,p=t*n-e*i,c=0,d=a[h-2],_=a[h-1],f=0,m=0,g=0,y=0,b=0,v=0,T=0;T<h;T+=2){var I=a[T],P=a[T+1];d===I&&(d=I+1e-4),_===P&&(_=P+1e-4);var S=d-I,A=_-P,D=d*P-_*I,x=l*A-u*S,w=(p*S-l*D)/x;if((w>=d&&w<=I||w>=I&&w<=d)&&(0===l||w>=t&&w<=i||w>=i&&w<=t)){var O=(p*A-u*D)/x;if((O>=_&&O<=P||O>=P&&O<=_)&&(0===u||O>=e&&O<=n||O>=n&&O<=e)){if(null===s){g=w,y=O,b=w,v=O,c++,null!==o&&(o.x=Math.atan2(P-_,I-d)-.5*Math.PI,o.y=o.x);break}var E=w-t;E<0&&(E=-E),0===c?(f=E,m=E,g=w,y=O,b=w,v=O,null!==o&&(o.x=Math.atan2(P-_,I-d)-.5*Math.PI,o.y=o.x)):(E<f&&(f=E,g=w,y=O,null!==o&&(o.x=Math.atan2(P-_,I-d)-.5*Math.PI)),E>m&&(m=E,b=w,v=O,null!==o&&(o.y=Math.atan2(P-_,I-d)-.5*Math.PI))),c++}}d=I,_=P}return 1===c?(null!==r&&(r.x=g,r.y=y),null!==s&&(s.x=g,s.y=y),null!==o&&(o.y=o.x+Math.PI)):c>1&&(c++,null!==r&&(r.x=g,r.y=y),null!==s&&(s.x=b,s.y=v)),c},e.prototype._onClear=function(){t.prototype._onClear.call(this),this.type=2,this.x=0,this.y=0,this.vertices.length=0},e.prototype.containsPoint=function(t,e){var i=!1;if(t>=this.x&&t<=this.width&&e>=this.y&&e<=this.height)for(var n=0,a=this.vertices.length,r=a-2;n<a;n+=2){var s=this.vertices[r+1],o=this.vertices[n+1];if(o<e&&s>=e||s<e&&o>=e){var h=this.vertices[r],l=this.vertices[n];(e-o)*(h-l)/(s-o)+l<t&&(i=!i)}r=n}return i},e.prototype.intersectsSegment=function(t,n,a,r,s,o,h){void 0===s&&(s=null),void 0===o&&(o=null),void 0===h&&(h=null);var l=0;return 0!==i.rectangleIntersectsSegment(t,n,a,r,this.x,this.y,this.x+this.width,this.y+this.height,null,null,null)&&(l=e.polygonIntersectsSegment(t,n,a,r,this.vertices,s,o,h)),l},e}(e);t.PolygonBoundingBoxData=a}(dragonBones||(dragonBones={})),function(t){var e=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.cachedFrames=[],e.boneTimelines={},e.slotTimelines={},e.constraintTimelines={},e.animationTimelines={},e.boneCachedFrameIndices={},e.slotCachedFrameIndices={},e.actionTimeline=null,e.zOrderTimeline=null,e}return __extends(e,t),e.toString=function(){return"[class dragonBones.AnimationData]"},e.prototype._onClear=function(){for(var t in this.boneTimelines){for(var e=0,i=this.boneTimelines[t];e<i.length;e++){i[e].returnToPool()}delete this.boneTimelines[t]}for(var t in this.slotTimelines){for(var n=0,a=this.slotTimelines[t];n<a.length;n++){a[n].returnToPool()}delete this.slotTimelines[t]}for(var t in this.constraintTimelines){for(var r=0,s=this.constraintTimelines[t];r<s.length;r++){s[r].returnToPool()}delete this.constraintTimelines[t]}for(var t in this.animationTimelines){for(var o=0,h=this.animationTimelines[t];o<h.length;o++){h[o].returnToPool()}delete this.animationTimelines[t]}for(var t in this.boneCachedFrameIndices)delete this.boneCachedFrameIndices[t];for(var t in this.slotCachedFrameIndices)delete this.slotCachedFrameIndices[t];null!==this.actionTimeline&&this.actionTimeline.returnToPool(),null!==this.zOrderTimeline&&this.zOrderTimeline.returnToPool(),this.frameIntOffset=0,this.frameFloatOffset=0,this.frameOffset=0,this.blendType=0,this.frameCount=0,this.playTimes=0,this.duration=0,this.scale=1,this.fadeInTime=0,this.cacheFrameRate=0,this.name="",this.cachedFrames.length=0,this.actionTimeline=null,this.zOrderTimeline=null,this.parent=null},e.prototype.cacheFrames=function(t){if(!(this.cacheFrameRate>0)){this.cacheFrameRate=Math.max(Math.ceil(t*this.scale),1);var e=Math.ceil(this.cacheFrameRate*this.duration)+1;this.cachedFrames.length=e;for(var i=0,n=this.cacheFrames.length;i<n;++i)this.cachedFrames[i]=!1;for(var a=0,r=this.parent.sortedBones;a<r.length;a++){var s=r[a];for(i=0,n=(l=new Array(e)).length;i<n;++i)l[i]=-1;this.boneCachedFrameIndices[s.name]=l}for(var o=0,h=this.parent.sortedSlots;o<h.length;o++){var l,u=h[o];for(i=0,n=(l=new Array(e)).length;i<n;++i)l[i]=-1;this.slotCachedFrameIndices[u.name]=l}}},e.prototype.addBoneTimeline=function(t,e){var i=t in this.boneTimelines?this.boneTimelines[t]:this.boneTimelines[t]=[];i.indexOf(e)<0&&i.push(e)},e.prototype.addSlotTimeline=function(t,e){var i=t in this.slotTimelines?this.slotTimelines[t]:this.slotTimelines[t]=[];i.indexOf(e)<0&&i.push(e)},e.prototype.addConstraintTimeline=function(t,e){var i=t in this.constraintTimelines?this.constraintTimelines[t]:this.constraintTimelines[t]=[];i.indexOf(e)<0&&i.push(e)},e.prototype.addAnimationTimeline=function(t,e){var i=t in this.animationTimelines?this.animationTimelines[t]:this.animationTimelines[t]=[];i.indexOf(e)<0&&i.push(e)},e.prototype.getBoneTimelines=function(t){return t in this.boneTimelines?this.boneTimelines[t]:null},e.prototype.getSlotTimelines=function(t){return t in this.slotTimelines?this.slotTimelines[t]:null},e.prototype.getConstraintTimelines=function(t){return t in this.constraintTimelines?this.constraintTimelines[t]:null},e.prototype.getAnimationTimelines=function(t){return t in this.animationTimelines?this.animationTimelines[t]:null},e.prototype.getBoneCachedFrameIndices=function(t){return t in this.boneCachedFrameIndices?this.boneCachedFrameIndices[t]:null},e.prototype.getSlotCachedFrameIndices=function(t){return t in this.slotCachedFrameIndices?this.slotCachedFrameIndices[t]:null},e}(t.BaseObject);t.AnimationData=e;var i=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return __extends(e,t),e.toString=function(){return"[class dragonBones.TimelineData]"},e.prototype._onClear=function(){this.type=10,this.offset=0,this.frameIndicesOffset=-1},e}(t.BaseObject);t.TimelineData=i;var n=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return __extends(e,t),e.toString=function(){return"[class dragonBones.AnimationTimelineData]"},e.prototype._onClear=function(){t.prototype._onClear.call(this),this.x=0,this.y=0},e}(i);t.AnimationTimelineData=n}(dragonBones||(dragonBones={})),function(t){var e=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.boneMask=[],e}return __extends(e,t),e.toString=function(){return"[class dragonBones.AnimationConfig]"},e.prototype._onClear=function(){this.pauseFadeOut=!0,this.fadeOutMode=4,this.fadeOutTweenType=1,this.fadeOutTime=-1,this.actionEnabled=!0,this.additive=!1,this.displayControl=!0,this.pauseFadeIn=!0,this.resetToPose=!0,this.fadeInTweenType=1,this.playTimes=-1,this.layer=0,this.position=0,this.duration=-1,this.timeScale=-100,this.weight=1,this.fadeInTime=-1,this.autoFadeOutTime=-1,this.name="",this.animation="",this.group="",this.boneMask.length=0},e.prototype.clear=function(){this._onClear()},e.prototype.copyFrom=function(t){this.pauseFadeOut=t.pauseFadeOut,this.fadeOutMode=t.fadeOutMode,this.autoFadeOutTime=t.autoFadeOutTime,this.fadeOutTweenType=t.fadeOutTweenType,this.actionEnabled=t.actionEnabled,this.additive=t.additive,this.displayControl=t.displayControl,this.pauseFadeIn=t.pauseFadeIn,this.resetToPose=t.resetToPose,this.playTimes=t.playTimes,this.layer=t.layer,this.position=t.position,this.duration=t.duration,this.timeScale=t.timeScale,this.fadeInTime=t.fadeInTime,this.fadeOutTime=t.fadeOutTime,this.fadeInTweenType=t.fadeInTweenType,this.weight=t.weight,this.name=t.name,this.animation=t.animation,this.group=t.group,this.boneMask.length=t.boneMask.length;for(var e=0,i=this.boneMask.length;e<i;++e)this.boneMask[e]=t.boneMask[e]},e}(t.BaseObject);t.AnimationConfig=e}(dragonBones||(dragonBones={})),function(t){var e=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.textures={},e}return __extends(e,t),e.prototype._onClear=function(){for(var t in this.textures)this.textures[t].returnToPool(),delete this.textures[t];this.autoSearch=!1,this.width=0,this.height=0,this.scale=1,this.name="",this.imagePath=""},e.prototype.copyFrom=function(t){for(var e in this.autoSearch=t.autoSearch,this.scale=t.scale,this.width=t.width,this.height=t.height,this.name=t.name,this.imagePath=t.imagePath,this.textures)this.textures[e].returnToPool(),delete this.textures[e];for(var e in t.textures){var i=this.createTexture();i.copyFrom(t.textures[e]),this.textures[e]=i}},e.prototype.addTexture=function(t){t.name in this.textures?console.warn("Same texture: "+t.name):(t.parent=this,this.textures[t.name]=t)},e.prototype.getTexture=function(t){return t in this.textures?this.textures[t]:null},e}(t.BaseObject);t.TextureAtlasData=e;var i=function(e){function i(){var i=null!==e&&e.apply(this,arguments)||this;return i.region=new t.Rectangle,i.frame=null,i}return __extends(i,e),i.createRectangle=function(){return new t.Rectangle},i.prototype._onClear=function(){this.rotated=!1,this.name="",this.region.clear(),this.parent=null,this.frame=null},i.prototype.copyFrom=function(t){this.rotated=t.rotated,this.name=t.name,this.region.copyFrom(t.region),this.parent=t.parent,null===this.frame&&null!==t.frame?this.frame=i.createRectangle():null!==this.frame&&null===t.frame&&(this.frame=null),null!==this.frame&&null!==t.frame&&this.frame.copyFrom(t.frame)},i}(t.BaseObject);t.TextureData=i}(dragonBones||(dragonBones={})),function(t){var e=function(e){function i(){var t=null!==e&&e.apply(this,arguments)||this;return t._bones=[],t._slots=[],t._constraints=[],t._actions=[],t._animation=null,t._proxy=null,t._replaceTextureAtlasData=null,t._clock=null,t}return __extends(i,e),i.toString=function(){return"[class dragonBones.Armature]"},i._onSortSlots=function(t,e){return 1e3*t._zIndex+t._zOrder>1e3*e._zIndex+e._zOrder?1:-1},i.prototype._onClear=function(){null!==this._clock&&this._clock.remove(this);for(var t=0,e=this._bones;t<e.length;t++){e[t].returnToPool()}for(var i=0,n=this._slots;i<n.length;i++){n[i].returnToPool()}for(var a=0,r=this._constraints;a<r.length;a++){r[a].returnToPool()}for(var s=0,o=this._actions;s<o.length;s++){o[s].returnToPool()}null!==this._animation&&this._animation.returnToPool(),null!==this._proxy&&this._proxy.dbClear(),null!==this._replaceTextureAtlasData&&this._replaceTextureAtlasData.returnToPool(),this.inheritAnimation=!0,this.userData=null,this._lockUpdate=!1,this._slotsDirty=!0,this._zOrderDirty=!1,this._zIndexDirty=!1,this._alphaDirty=!0,this._flipX=!1,this._flipY=!1,this._cacheFrameIndex=-1,this._alpha=1,this._globalAlpha=1,this._bones.length=0,this._slots.length=0,this._constraints.length=0,this._actions.length=0,this._armatureData=null,this._animation=null,this._proxy=null,this._display=null,this._replaceTextureAtlasData=null,this._replacedTexture=null,this._dragonBones=null,this._clock=null,this._parent=null},i.prototype._sortZOrder=function(t,e){var i=this._armatureData.sortedSlots,n=null===t;if(this._zOrderDirty||!n){for(var a=0,r=i.length;a<r;++a){var s=n?a:t[e+a];if(!(s<0||s>=r)){var o=i[s],h=this.getSlot(o.name);null!==h&&h._setZOrder(a)}}this._slotsDirty=!0,this._zOrderDirty=!n}},i.prototype._addBone=function(t){this._bones.indexOf(t)<0&&this._bones.push(t)},i.prototype._addSlot=function(t){this._slots.indexOf(t)<0&&this._slots.push(t)},i.prototype._addConstraint=function(t){this._constraints.indexOf(t)<0&&this._constraints.push(t)},i.prototype._bufferAction=function(t,e){this._actions.indexOf(t)<0&&(e?this._actions.push(t):this._actions.unshift(t))},i.prototype.dispose=function(){null!==this._armatureData&&(this._lockUpdate=!0,this._dragonBones.bufferObject(this))},i.prototype.init=function(e,i,n,a){null===this._armatureData&&(this._armatureData=e,this._animation=t.BaseObject.borrowObject(t.Animation),this._proxy=i,this._display=n,this._dragonBones=a,this._proxy.dbInit(this),this._animation.init(this),this._animation.animations=this._armatureData.animations)},i.prototype.advanceTime=function(t){if(!this._lockUpdate)if(this._lockUpdate=!0,null!==this._armatureData)if(null!==this._armatureData.parent){var e=this._cacheFrameIndex;if(this._animation.advanceTime(t),this._slotsDirty||this._zIndexDirty){if(this._slots.sort(i._onSortSlots),this._zIndexDirty)for(var n=0,a=this._slots.length;n<a;++n)this._slots[n]._setZOrder(n);this._slotsDirty=!1,this._zIndexDirty=!1}if(this._alphaDirty){this._alphaDirty=!1,this._globalAlpha=this._alpha*(null!==this._parent?this._parent._globalAlpha:1);for(var r=0,s=this._bones;r<s.length;r++){s[r]._updateAlpha()}for(var o=0,h=this._slots;o<h.length;o++){(f=h[o])._updateAlpha()}}if(this._cacheFrameIndex<0||this._cacheFrameIndex!==e){n=0,a=0;for(n=0,a=this._bones.length;n<a;++n)this._bones[n].update(this._cacheFrameIndex);for(n=0,a=this._slots.length;n<a;++n)this._slots[n].update(this._cacheFrameIndex)}if(this._actions.length>0){for(var l=0,u=this._actions;l<u.length;l++){var p=u[l],c=p.actionData;if(null!==c)if(0===c.type)if(null!==p.slot)null!==(m=p.slot.childArmature)&&m.animation.fadeIn(c.name);else if(null!==p.bone)for(var d=0,_=this.getSlots();d<_.length;d++){var f,m;if((f=_[d]).parent===p.bone)null!==(m=f.childArmature)&&m.animation.fadeIn(c.name)}else this._animation.fadeIn(c.name);p.returnToPool()}this._actions.length=0}this._lockUpdate=!1,this._proxy.dbUpdate()}else console.warn("The armature data has been disposed.\nPlease make sure dispose armature before call factory.clear().");else console.warn("The armature has been disposed.")},i.prototype.invalidUpdate=function(t,e){if(void 0===t&&(t=null),void 0===e&&(e=!1),null!==t&&t.length>0){if(null!==(s=this.getBone(t))&&(s.invalidUpdate(),e))for(var i=0,n=this._slots;i<n.length;i++){(l=n[i]).parent===s&&l.invalidUpdate()}}else{for(var a=0,r=this._bones;a<r.length;a++){var s;(s=r[a]).invalidUpdate()}if(e)for(var o=0,h=this._slots;o<h.length;o++){var l;(l=h[o]).invalidUpdate()}}},i.prototype.containsPoint=function(t,e){for(var i=0,n=this._slots;i<n.length;i++){var a=n[i];if(a.containsPoint(t,e))return a}return null},i.prototype.intersectsSegment=function(t,e,i,n,a,r,s){void 0===a&&(a=null),void 0===r&&(r=null),void 0===s&&(s=null);for(var o=t===i,h=0,l=0,u=0,p=0,c=0,d=0,_=0,f=0,m=null,g=null,y=0,b=this._slots;y<b.length;y++){var v=b[y];if(v.intersectsSegment(t,e,i,n,a,r,s)>0){if(null===a&&null===r){m=v;break}var T;null!==a&&((T=o?a.y-e:a.x-t)<0&&(T=-T),(null===m||T<h)&&(h=T,u=a.x,p=a.y,m=v,s&&(_=s.x))),null!==r&&((T=r.x-t)<0&&(T=-T),(null===g||T>l)&&(l=T,c=r.x,d=r.y,g=v,null!==s&&(f=s.y)))}}return null!==m&&null!==a&&(a.x=u,a.y=p,null!==s&&(s.x=_)),null!==g&&null!==r&&(r.x=c,r.y=d,null!==s&&(s.y=f)),m},i.prototype.getBone=function(t){for(var e=0,i=this._bones;e<i.length;e++){var n=i[e];if(n.name===t)return n}return null},i.prototype.getBoneByDisplay=function(t){var e=this.getSlotByDisplay(t);return null!==e?e.parent:null},i.prototype.getSlot=function(t){for(var e=0,i=this._slots;e<i.length;e++){var n=i[e];if(n.name===t)return n}return null},i.prototype.getSlotByDisplay=function(t){if(null!==t)for(var e=0,i=this._slots;e<i.length;e++){var n=i[e];if(n.display===t)return n}return null},i.prototype.getBones=function(){return this._bones},i.prototype.getSlots=function(){return this._slots},Object.defineProperty(i.prototype,"flipX",{get:function(){return this._flipX},set:function(t){this._flipX!==t&&(this._flipX=t,this.invalidUpdate())},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"flipY",{get:function(){return this._flipY},set:function(t){this._flipY!==t&&(this._flipY=t,this.invalidUpdate())},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"cacheFrameRate",{get:function(){return this._armatureData.cacheFrameRate},set:function(t){if(this._armatureData.cacheFrameRate!==t){this._armatureData.cacheFrames(t);for(var e=0,i=this._slots;e<i.length;e++){var n=i[e].childArmature;null!==n&&(n.cacheFrameRate=t)}}},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"name",{get:function(){return this._armatureData.name},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"armatureData",{get:function(){return this._armatureData},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"animation",{get:function(){return this._animation},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"proxy",{get:function(){return this._proxy},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"eventDispatcher",{get:function(){return this._proxy},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"display",{get:function(){return this._display},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"replacedTexture",{get:function(){return this._replacedTexture},set:function(t){if(this._replacedTexture!==t){null!==this._replaceTextureAtlasData&&(this._replaceTextureAtlasData.returnToPool(),this._replaceTextureAtlasData=null),this._replacedTexture=t;for(var e=0,i=this._slots;e<i.length;e++){var n=i[e];n.invalidUpdate(),n.update(-1)}}},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"clock",{get:function(){return this._clock},set:function(t){if(this._clock!==t){null!==this._clock&&this._clock.remove(this),this._clock=t,this._clock&&this._clock.add(this);for(var e=0,i=this._slots;e<i.length;e++){var n=i[e].childArmature;null!==n&&(n.clock=this._clock)}}},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"parent",{get:function(){return this._parent},enumerable:!0,configurable:!0}),i.prototype.getDisplay=function(){return this._display},i}(t.BaseObject);t.Armature=e}(dragonBones||(dragonBones={})),function(t){var e=function(e){function i(){var i=null!==e&&e.apply(this,arguments)||this;return i.globalTransformMatrix=new t.Matrix,i.global=new t.Transform,i.offset=new t.Transform,i}return __extends(i,e),i.prototype._onClear=function(){this.globalTransformMatrix.identity(),this.global.identity(),this.offset.identity(),this.origin=null,this.userData=null,this._globalDirty=!1,this._alpha=1,this._globalAlpha=1,this._armature=null},i.prototype.updateGlobalTransform=function(){this._globalDirty&&(this._globalDirty=!1,this.global.fromMatrix(this.globalTransformMatrix))},Object.defineProperty(i.prototype,"armature",{get:function(){return this._armature},enumerable:!0,configurable:!0}),i._helpMatrix=new t.Matrix,i._helpTransform=new t.Transform,i._helpPoint=new t.Point,i}(t.BaseObject);t.TransformObject=e}(dragonBones||(dragonBones={})),function(t){var e=function(e){function i(){var i=null!==e&&e.apply(this,arguments)||this;return i.animationPose=new t.Transform,i}return __extends(i,e),i.toString=function(){return"[class dragonBones.Bone]"},i.prototype._onClear=function(){e.prototype._onClear.call(this),this.offsetMode=1,this.animationPose.identity(),this._transformDirty=!1,this._childrenTransformDirty=!1,this._localDirty=!0,this._hasConstraint=!1,this._visible=!0,this._cachedFrameIndex=-1,this._boneData=null,this._parent=null,this._cachedFrameIndices=null},i.prototype._updateGlobalTransformMatrix=function(e){var i=this._boneData,n=this.global,a=this.globalTransformMatrix,r=this.origin,s=this.offset,o=this.animationPose,h=this._parent,l=this._armature.flipX,u=this._armature.flipY===t.DragonBones.yDown,p=null!==h,c=0;if(1===this.offsetMode?null!==r?(n.x=r.x+s.x+o.x,n.scaleX=r.scaleX*s.scaleX*o.scaleX,n.scaleY=r.scaleY*s.scaleY*o.scaleY,t.DragonBones.yDown?(n.y=r.y+s.y+o.y,n.skew=r.skew+s.skew+o.skew,n.rotation=r.rotation+s.rotation+o.rotation):(n.y=r.y-s.y+o.y,n.skew=r.skew-s.skew+o.skew,n.rotation=r.rotation-s.rotation+o.rotation)):(n.copyFrom(s),t.DragonBones.yDown||(n.y=-n.y,n.skew=-n.skew,n.rotation=-n.rotation),n.add(o)):0===this.offsetMode?null!==r?n.copyFrom(r).add(o):n.copyFrom(o):(p=!1,n.copyFrom(s),t.DragonBones.yDown||(n.y=-n.y,n.skew=-n.skew,n.rotation=-n.rotation)),p){var d=1===h._boneData.type,_=d?h._bone:null,f=d?h._getGlobalTransformMatrix(n.x,n.y):h.globalTransformMatrix;if(!i.inheritScale||d&&null===_){if(i.inheritTranslation){var m=n.x,g=n.y;n.x=f.a*m+f.c*g+f.tx,n.y=f.b*m+f.d*g+f.ty}else l&&(n.x=-n.x),u&&(n.y=-n.y);i.inheritRotation?(h.updateGlobalTransform(),c=h.global.scaleX<0?n.rotation+h.global.rotation+Math.PI:n.rotation+h.global.rotation,f.a*f.d-f.b*f.c<0&&(c-=2*n.rotation,(l!==u||i.inheritReflection)&&(n.skew+=Math.PI),t.DragonBones.yDown||(n.skew=-n.skew)),n.rotation=c):(l||u)&&(l&&u?c=n.rotation+Math.PI:(c=l?Math.PI-n.rotation:-n.rotation,n.skew+=Math.PI),n.rotation=c),n.toMatrix(a)}else d?(i.inheritRotation&&(n.rotation+=h.global.rotation),_.updateGlobalTransform(),n.scaleX*=_.global.scaleX,n.scaleY*=_.global.scaleY,f.transformPoint(n.x,n.y,n),n.toMatrix(a),i.inheritTranslation?(n.x=a.tx,n.y=a.ty):(a.tx=n.x,a.ty=n.y)):(i.inheritRotation||(h.updateGlobalTransform(),c=l&&u?n.rotation-(h.global.rotation+Math.PI):l?n.rotation+h.global.rotation+Math.PI:u?n.rotation+h.global.rotation:n.rotation-h.global.rotation,n.rotation=c),n.toMatrix(a),a.concat(f),i.inheritTranslation?(n.x=a.tx,n.y=a.ty):(a.tx=n.x,a.ty=n.y),e?n.fromMatrix(a):this._globalDirty=!0)}else(l||u)&&(l&&(n.x=-n.x),u&&(n.y=-n.y),l&&u?c=n.rotation+Math.PI:(c=l?Math.PI-n.rotation:-n.rotation,n.skew+=Math.PI),n.rotation=c),n.toMatrix(a)},i.prototype._updateAlpha=function(){null!==this._parent?this._globalAlpha=this._alpha*this._parent._globalAlpha:this._globalAlpha=this._alpha*this._armature._globalAlpha},i.prototype.init=function(t,e){null===this._boneData&&(this._boneData=t,this._armature=e,this._alpha=this._boneData.alpha,null!==this._boneData.parent&&(this._parent=this._armature.getBone(this._boneData.parent.name)),this._armature._addBone(this),this.origin=this._boneData.transform)},i.prototype.update=function(t){if(t>=0&&null!==this._cachedFrameIndices){var e=this._cachedFrameIndices[t];if(e>=0&&this._cachedFrameIndex===e)this._transformDirty=!1;else if(e>=0)this._transformDirty=!0,this._cachedFrameIndex=e;else{if(this._hasConstraint)for(var i=0,n=this._armature._constraints;i<n.length;i++){(s=n[i])._root===this&&s.update()}this._transformDirty||null!==this._parent&&this._parent._childrenTransformDirty?(this._transformDirty=!0,this._cachedFrameIndex=-1):this._cachedFrameIndex>=0?(this._transformDirty=!1,this._cachedFrameIndices[t]=this._cachedFrameIndex):(this._transformDirty=!0,this._cachedFrameIndex=-1)}}else{if(this._hasConstraint)for(var a=0,r=this._armature._constraints;a<r.length;a++){var s;(s=r[a])._root===this&&s.update()}(this._transformDirty||null!==this._parent&&this._parent._childrenTransformDirty)&&(t=-1,this._transformDirty=!0,this._cachedFrameIndex=-1)}if(this._transformDirty)if(this._transformDirty=!1,this._childrenTransformDirty=!0,this._cachedFrameIndex<0){var o=t>=0;this._localDirty&&this._updateGlobalTransformMatrix(o),o&&null!==this._cachedFrameIndices&&(this._cachedFrameIndex=this._cachedFrameIndices[t]=this._armature._armatureData.setCacheFrame(this.globalTransformMatrix,this.global))}else this._armature._armatureData.getCacheFrame(this.globalTransformMatrix,this.global,this._cachedFrameIndex);else this._childrenTransformDirty&&(this._childrenTransformDirty=!1);this._localDirty=!0},i.prototype.updateByConstraint=function(){this._localDirty&&(this._localDirty=!1,(this._transformDirty||null!==this._parent&&this._parent._childrenTransformDirty)&&this._updateGlobalTransformMatrix(!0),this._transformDirty=!0)},i.prototype.invalidUpdate=function(){this._transformDirty=!0},i.prototype.contains=function(t){if(t===this)return!1;for(var e=t;e!==this&&null!==e;)e=e.parent;return e===this},Object.defineProperty(i.prototype,"boneData",{get:function(){return this._boneData},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"visible",{get:function(){return this._visible},set:function(t){if(this._visible!==t){this._visible=t;for(var e=0,i=this._armature.getSlots();e<i.length;e++){var n=i[e];n.parent===this&&n._updateVisible()}}},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"name",{get:function(){return this._boneData.name},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"parent",{get:function(){return this._parent},enumerable:!0,configurable:!0}),i}(t.TransformObject);t.Bone=e}(dragonBones||(dragonBones={})),function(t){var e=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e._vertices=[],e._deformVertices=[],e._hullCache=[],e._matrixCahce=[],e}return __extends(e,t),e.toString=function(){return"[class dragonBones.Surface]"},e.prototype._onClear=function(){t.prototype._onClear.call(this),this._dX=0,this._dY=0,this._k=0,this._kX=0,this._kY=0,this._vertices.length=0,this._deformVertices.length=0,this._matrixCahce.length=0,this._hullCache.length=0,this._bone=null},e.prototype._getAffineTransform=function(t,e,i,n,a,r,s,o,h,l,u,p,c){var d=s-a,_=o-r,f=h-a,m=l-r;u.rotation=Math.atan2(_,d),u.skew=Math.atan2(m,f)-.5*Math.PI-u.rotation,c&&(u.rotation+=Math.PI),u.scaleX=Math.sqrt(d*d+_*_)/i,u.scaleY=Math.sqrt(f*f+m*m)/n,u.toMatrix(p),u.x=p.tx=a-(p.a*t+p.c*e),u.y=p.ty=r-(p.b*t+p.d*e)},e.prototype._updateVertices=function(){var t=this._armature.armatureData.parent,e=this._boneData.geometry,i=t.intArray,n=t.floatArray,a=i[e.offset+0],r=i[e.offset+2],s=this._vertices,o=this._deformVertices;if(null!==this._parent)if(1===this._parent._boneData.type)for(var h=0,l=a;h<l;++h){var u=n[r+(_=2*h)]+o[_],p=n[r+_+1]+o[_+1],c=this._parent._getGlobalTransformMatrix(u,p);s[_]=c.a*u+c.c*p+c.tx,s[_+1]=c.b*u+c.d*p+c.ty}else{var d=this._parent.globalTransformMatrix;for(h=0,l=a;h<l;++h){u=n[r+(_=2*h)]+o[_],p=n[r+_+1]+o[_+1];s[_]=d.a*u+d.c*p+d.tx,s[_+1]=d.b*u+d.d*p+d.ty}}else for(h=0,l=a;h<l;++h){var _;s[_=2*h]=n[r+_]+o[_],s[_+1]=n[r+_+1]+o[_+1]}},e.prototype._updateGlobalTransformMatrix=function(t){var e=2*this._boneData.segmentX,i=this._vertices.length-2,n=this._vertices[0],a=this._vertices[1],r=this._vertices[e],s=this._vertices[e+1],o=this._vertices[i],h=this._vertices[i+1],l=this._vertices[i-e],u=this._vertices[i-e+1],p=n+.5*(o-n),c=a+.5*(h-a),d=p+.5*(r+.5*(l-r)-p),_=c+.5*(s+.5*(u-s)-c),f=r+.5*(o-r),m=s+.5*(h-s),g=l+.5*(o-l),y=u+.5*(h-u);this._getAffineTransform(0,0,200,200,d,_,f,m,g,y,this.global,this.globalTransformMatrix,!1),this._globalDirty=!1},e.prototype._getGlobalTransformMatrix=function(t,i){var n=200,a=1e3;if(t<-a||a<t||i<-a||a<i)return this.globalTransformMatrix;var r=!1,s=this._boneData,o=s.segmentX,h=s.segmentY,l=2*s.segmentX,u=this._dX,p=this._dY,c=Math.floor((t+n)/u),d=Math.floor((i+n)/p),_=0,f=c*u-n,m=d*p-n,g=this._matrixCahce,y=e._helpMatrix;if(t<-n){if(i<-n||i>=n)return this.globalTransformMatrix;if(g[_=7*(2*(o*h+o+h+h+d)+((r=i>this._kX*(t+n)+m)?1:0))]>0)y.copyFromArray(g,_+1);else{var b=d*(l+2),v=this._hullCache[4],T=this._hullCache[5],I=this._hullCache[2]-(h-d)*v,P=this._hullCache[3]-(h-d)*T,S=this._vertices;r?this._getAffineTransform(-n,m+p,800,p,S[b+l+2],S[b+l+3],I+v,P+T,S[b],S[b+1],e._helpTransform,y,!0):this._getAffineTransform(-a,m,800,p,I,P,S[b],S[b+1],I+v,P+T,e._helpTransform,y,!1),g[_]=1,g[_+1]=y.a,g[_+2]=y.b,g[_+3]=y.c,g[_+4]=y.d,g[_+5]=y.tx,g[_+6]=y.ty}}else if(t>=n){if(i<-n||i>=n)return this.globalTransformMatrix;if(g[_=7*(2*(o*h+o+d)+((r=i>this._kX*(t-a)+m)?1:0))]>0)y.copyFromArray(g,_+1);else{b=(d+1)*(l+2)-2,v=this._hullCache[4],T=this._hullCache[5],I=this._hullCache[0]+d*v,P=this._hullCache[1]+d*T,S=this._vertices;r?this._getAffineTransform(a,m+p,800,p,I+v,P+T,S[b+l+2],S[b+l+3],I,P,e._helpTransform,y,!0):this._getAffineTransform(n,m,800,p,S[b],S[b+1],I,P,S[b+l+2],S[b+l+3],e._helpTransform,y,!1),g[_]=1,g[_+1]=y.a,g[_+2]=y.b,g[_+3]=y.c,g[_+4]=y.d,g[_+5]=y.tx,g[_+6]=y.ty}}else if(i<-n){if(t<-n||t>=n)return this.globalTransformMatrix;if(g[_=7*(2*(o*h+c)+((r=i>this._kY*(t-f-u)-a)?1:0))]>0)y.copyFromArray(g,_+1);else{b=2*c,v=this._hullCache[10],T=this._hullCache[11],I=this._hullCache[8]+c*v,P=this._hullCache[9]+c*T,S=this._vertices;r?this._getAffineTransform(f+u,-n,u,800,S[b+2],S[b+3],S[b],S[b+1],I+v,P+T,e._helpTransform,y,!0):this._getAffineTransform(f,-a,u,800,I,P,I+v,P+T,S[b],S[b+1],e._helpTransform,y,!1),g[_]=1,g[_+1]=y.a,g[_+2]=y.b,g[_+3]=y.c,g[_+4]=y.d,g[_+5]=y.tx,g[_+6]=y.ty}}else if(i>=n){if(t<-n||t>=n)return this.globalTransformMatrix;if(g[_=7*(2*(o*h+o+h+c)+((r=i>this._kY*(t-f-u)+n)?1:0))]>0)y.copyFromArray(g,_+1);else{b=h*(l+2)+2*c,v=this._hullCache[10],T=this._hullCache[11],I=this._hullCache[6]-(o-c)*v,P=this._hullCache[7]-(o-c)*T,S=this._vertices;r?this._getAffineTransform(f+u,a,u,800,I+v,P+T,I,P,S[b+2],S[b+3],e._helpTransform,y,!0):this._getAffineTransform(f,n,u,800,S[b],S[b+1],S[b+2],S[b+3],I,P,e._helpTransform,y,!1),g[_]=1,g[_+1]=y.a,g[_+2]=y.b,g[_+3]=y.c,g[_+4]=y.d,g[_+5]=y.tx,g[_+6]=y.ty}}else if(g[_=7*(2*(o*d+c)+((r=i>this._k*(t-f-u)+m)?1:0))]>0)y.copyFromArray(g,_+1);else{b=2*c+d*(l+2),S=this._vertices;r?this._getAffineTransform(f+u,m+p,u,p,S[b+l+4],S[b+l+5],S[b+l+2],S[b+l+3],S[b+2],S[b+3],e._helpTransform,y,!0):this._getAffineTransform(f,m,u,p,S[b],S[b+1],S[b+2],S[b+3],S[b+l+2],S[b+l+3],e._helpTransform,y,!1),g[_]=1,g[_+1]=y.a,g[_+2]=y.b,g[_+3]=y.c,g[_+4]=y.d,g[_+5]=y.tx,g[_+6]=y.ty}return y},e.prototype.init=function(e,i){if(null===this._boneData){t.prototype.init.call(this,e,i);var n=e.segmentX,a=e.segmentY,r=this._armature.armatureData.parent.intArray[e.geometry.offset+0];this._dX=400/n,this._dY=400/a,this._k=-this._dY/this._dX,this._kX=-this._dY/800,this._kY=-800/this._dX,this._vertices.length=2*r,this._deformVertices.length=2*r,this._matrixCahce.length=2*(n*a+2*n+2*a)*7,this._hullCache.length=10;for(var s=0;s<2*r;++s)this._deformVertices[s]=0;null!==this._parent&&(0===this._parent.boneData.type?this._bone=this._parent:this._bone=this._parent._bone)}},e.prototype.update=function(t){if(t>=0&&null!==this._cachedFrameIndices){var i=this._cachedFrameIndices[t];if(i>=0&&this._cachedFrameIndex===i)this._transformDirty=!1;else if(i>=0)this._transformDirty=!0,this._cachedFrameIndex=i;else{if(this._hasConstraint)for(var n=0,a=this._armature._constraints;n<a.length;n++){(o=a[n])._root===this&&o.update()}this._transformDirty||null!==this._parent&&this._parent._childrenTransformDirty?(this._transformDirty=!0,this._cachedFrameIndex=-1):this._cachedFrameIndex>=0?(this._transformDirty=!1,this._cachedFrameIndices[t]=this._cachedFrameIndex):(this._transformDirty=!0,this._cachedFrameIndex=-1)}}else{if(this._hasConstraint)for(var r=0,s=this._armature._constraints;r<s.length;r++){var o;(o=s[r])._root===this&&o.update()}(this._transformDirty||null!==this._parent&&this._parent._childrenTransformDirty)&&(t=-1,this._transformDirty=!0,this._cachedFrameIndex=-1)}if(this._transformDirty){this._transformDirty=!1,this._childrenTransformDirty=!0;for(var h=0,l=this._matrixCahce.length;h<l;h+=7)this._matrixCahce[h]=-1;if(this._updateVertices(),this._cachedFrameIndex<0){var u=t>=0;this._localDirty&&this._updateGlobalTransformMatrix(u),u&&null!==this._cachedFrameIndices&&(this._cachedFrameIndex=this._cachedFrameIndices[t]=this._armature._armatureData.setCacheFrame(this.globalTransformMatrix,this.global))}else this._armature._armatureData.getCacheFrame(this.globalTransformMatrix,this.global,this._cachedFrameIndex);var p=2*this.global.x,c=2*this.global.y,d=e._helpPoint;this.globalTransformMatrix.transformPoint(1e3,-200,d),this._hullCache[0]=d.x,this._hullCache[1]=d.y,this._hullCache[2]=p-d.x,this._hullCache[3]=c-d.y,this.globalTransformMatrix.transformPoint(0,this._dY,d,!0),this._hullCache[4]=d.x,this._hullCache[5]=d.y,this.globalTransformMatrix.transformPoint(200,1e3,d),this._hullCache[6]=d.x,this._hullCache[7]=d.y,this._hullCache[8]=p-d.x,this._hullCache[9]=c-d.y,this.globalTransformMatrix.transformPoint(this._dX,0,d,!0),this._hullCache[10]=d.x,this._hullCache[11]=d.y}else this._childrenTransformDirty&&(this._childrenTransformDirty=!1);this._localDirty=!0},e}(t.Bone);t.Surface=e}(dragonBones||(dragonBones={})),function(t){var e=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.deformVertices=[],e}return __extends(e,t),e.toString=function(){return"[class dragonBones.DisplayFrame]"},e.prototype._onClear=function(){this.rawDisplayData=null,this.displayData=null,this.textureData=null,this.display=null,this.deformVertices.length=0},e.prototype.updateDeformVertices=function(){if(null!==this.rawDisplayData&&0===this.deformVertices.length){var t;if(2===this.rawDisplayData.type)t=this.rawDisplayData.geometry;else{if(4!==this.rawDisplayData.type)return;t=this.rawDisplayData.geometry}var e=0;e=null!==t.weight?2*t.weight.count:2*t.data.intArray[t.offset+0],this.deformVertices.length=e;for(var i=0,n=this.deformVertices.length;i<n;++i)this.deformVertices[i]=0}},e.prototype.getGeometryData=function(){if(null!==this.displayData){if(2===this.displayData.type)return this.displayData.geometry;if(4===this.displayData.type)return this.displayData.geometry}if(null!==this.rawDisplayData){if(2===this.rawDisplayData.type)return this.rawDisplayData.geometry;if(4===this.rawDisplayData.type)return this.rawDisplayData.geometry}return null},e.prototype.getBoundingBox=function(){return null!==this.displayData&&3===this.displayData.type?this.displayData.boundingBox:null!==this.rawDisplayData&&3===this.rawDisplayData.type?this.rawDisplayData.boundingBox:null},e.prototype.getTextureData=function(){if(null!==this.displayData){if(0===this.displayData.type)return this.displayData.texture;if(2===this.displayData.type)return this.displayData.texture}if(null!==this.textureData)return this.textureData;if(null!==this.rawDisplayData){if(0===this.rawDisplayData.type)return this.rawDisplayData.texture;if(2===this.rawDisplayData.type)return this.rawDisplayData.texture}return null},e}(t.BaseObject);t.DisplayFrame=e;var i=function(i){function n(){var e=null!==i&&i.apply(this,arguments)||this;return e._localMatrix=new t.Matrix,e._colorTransform=new t.ColorTransform,e._displayFrames=[],e._geometryBones=[],e._rawDisplay=null,e._meshDisplay=null,e._display=null,e}return __extends(n,i),n.prototype._onClear=function(){i.prototype._onClear.call(this);for(var e=[],n=0,a=this._displayFrames;n<a.length;n++){var r=a[n],s=r.display;s!==this._rawDisplay&&s!==this._meshDisplay&&e.indexOf(s)<0&&e.push(s),r.returnToPool()}for(var o=0,h=e;o<h.length;o++){var l=h[o];l instanceof t.Armature?l.dispose():this._disposeDisplay(l,!0)}null!==this._meshDisplay&&this._meshDisplay!==this._rawDisplay&&this._disposeDisplay(this._meshDisplay,!1),null!==this._rawDisplay&&this._disposeDisplay(this._rawDisplay,!1),this.displayController=null,this._displayDataDirty=!1,this._displayDirty=!1,this._geometryDirty=!1,this._textureDirty=!1,this._visibleDirty=!1,this._blendModeDirty=!1,this._zOrderDirty=!1,this._colorDirty=!1,this._verticesDirty=!1,this._transformDirty=!1,this._visible=!0,this._blendMode=0,this._displayIndex=-1,this._animationDisplayIndex=-1,this._zOrder=0,this._zIndex=0,this._cachedFrameIndex=-1,this._pivotX=0,this._pivotY=0,this._localMatrix.identity(),this._colorTransform.identity(),this._displayFrames.length=0,this._geometryBones.length=0,this._slotData=null,this._displayFrame=null,this._geometryData=null,this._boundingBoxData=null,this._textureData=null,this._rawDisplay=null,this._meshDisplay=null,this._display=null,this._childArmature=null,this._parent=null,this._cachedFrameIndices=null},n.prototype._hasDisplay=function(t){for(var e=0,i=this._displayFrames;e<i.length;e++){if(i[e].display===t)return!0}return!1},n.prototype._isBonesUpdate=function(){for(var t=0,e=this._geometryBones;t<e.length;t++){var i=e[t];if(null!==i&&i._childrenTransformDirty)return!0}return!1},n.prototype._updateAlpha=function(){var t=this._alpha*this._parent._globalAlpha;this._globalAlpha!==t&&(this._globalAlpha=t,this._colorDirty=!0)},n.prototype._updateDisplayData=function(){var e=this._displayFrame,i=this._geometryData,a=this._textureData,r=null,s=null;if(this._displayFrame=null,this._geometryData=null,this._boundingBoxData=null,this._textureData=null,this._displayIndex>=0&&this._displayIndex<this._displayFrames.length&&(this._displayFrame=this._displayFrames[this._displayIndex],r=this._displayFrame.rawDisplayData,s=this._displayFrame.displayData,this._geometryData=this._displayFrame.getGeometryData(),this._boundingBoxData=this._displayFrame.getBoundingBox(),this._textureData=this._displayFrame.getTextureData()),this._displayFrame!==e||this._geometryData!==i||this._textureData!==a){if(null===this._geometryData&&null!==this._textureData){var o=null!==s&&0===s.type?s:r,h=this._textureData.parent.scale*this._armature._armatureData.scale,l=this._textureData.frame;this._pivotX=o.pivot.x,this._pivotY=o.pivot.y;var u=null!==l?l:this._textureData.region,p=u.width,c=u.height;this._textureData.rotated&&null===l&&(p=u.height,c=u.width),this._pivotX*=p*h,this._pivotY*=c*h,null!==l&&(this._pivotX+=l.x*h,this._pivotY+=l.y*h),null!==r&&o!==r&&(r.transform.toMatrix(n._helpMatrix),n._helpMatrix.invert(),n._helpMatrix.transformPoint(0,0,n._helpPoint),this._pivotX-=n._helpPoint.x,this._pivotY-=n._helpPoint.y,o.transform.toMatrix(n._helpMatrix),n._helpMatrix.invert(),n._helpMatrix.transformPoint(0,0,n._helpPoint),this._pivotX+=n._helpPoint.x,this._pivotY+=n._helpPoint.y),t.DragonBones.yDown||(this._pivotY=(this._textureData.rotated?this._textureData.region.width:this._textureData.region.height)*h-this._pivotY)}else this._pivotX=0,this._pivotY=0;if(this.origin=null!==r?r.transform:null!==s?s.transform:null,null!==this.origin?this.global.copyFrom(this.origin).add(this.offset).toMatrix(this._localMatrix):this.global.copyFrom(this.offset).toMatrix(this._localMatrix),this._geometryData!==i)if(this._geometryDirty=!0,this._verticesDirty=!0,null!==this._geometryData){if(this._geometryBones.length=0,null!==this._geometryData.weight)for(var d=0,_=this._geometryData.weight.bones.length;d<_;++d){var f=this._armature.getBone(this._geometryData.weight.bones[d].name);this._geometryBones.push(f)}}else this._geometryBones.length=0,this._geometryData=null;this._textureDirty=this._textureData!==a,this._transformDirty=!0}},n.prototype._updateDisplay=function(){var e=null!==this._display?this._display:this._rawDisplay,i=this._childArmature;if(null!==this._displayFrame?(this._display=this._displayFrame.display,null!==this._display&&this._display instanceof t.Armature?(this._childArmature=this._display,this._display=this._childArmature.display):this._childArmature=null):(this._display=null,this._childArmature=null),(null!==this._display?this._display:this._rawDisplay)!==e&&(this._textureDirty=!0,this._visibleDirty=!0,this._blendModeDirty=!0,this._colorDirty=!0,this._transformDirty=!0,this._onUpdateDisplay(),this._replaceDisplay(e)),this._childArmature!==i&&(null!==i&&(i._parent=null,i.clock=null,i.inheritAnimation&&i.animation.reset()),null!==this._childArmature&&(this._childArmature._parent=this,this._childArmature.clock=this._armature.clock,this._childArmature.inheritAnimation))){if(0===this._childArmature.cacheFrameRate){var n=this._armature.cacheFrameRate;0!==n&&(this._childArmature.cacheFrameRate=n)}if(null!==this._displayFrame){var a=null,r=null!==this._displayFrame.displayData?this._displayFrame.displayData:this._displayFrame.rawDisplayData;if(null!==r&&1===r.type&&(a=r.actions),null!==a&&a.length>0)for(var s=0,o=a;s<o.length;s++){var h=o[s],l=t.BaseObject.borrowObject(t.EventObject);t.EventObject.actionDataToInstance(h,l,this._armature),l.slot=this,this._armature._bufferAction(l,!1)}else this._childArmature.animation.play()}}},n.prototype._updateGlobalTransformMatrix=function(t){var e=0===this._parent._boneData.type?this._parent.globalTransformMatrix:this._parent._getGlobalTransformMatrix(this.global.x,this.global.y);this.globalTransformMatrix.copyFrom(this._localMatrix),this.globalTransformMatrix.concat(e),t?this.global.fromMatrix(this.globalTransformMatrix):this._globalDirty=!0},n.prototype._setDisplayIndex=function(t,e){if(void 0===e&&(e=!1),e){if(this._animationDisplayIndex===t)return;this._animationDisplayIndex=t}this._displayIndex!==t&&(this._displayIndex=t<this._displayFrames.length?t:this._displayFrames.length-1,this._displayDataDirty=!0,this._displayDirty=this._displayIndex<0||this._display!==this._displayFrames[this._displayIndex].display)},n.prototype._setZOrder=function(t){return this._zOrder,this._zOrder=t,this._zOrderDirty=!0,this._zOrderDirty},n.prototype._setColor=function(t){return this._colorTransform.copyFrom(t),this._colorDirty=!0},n.prototype.init=function(t,e,i,n){if(null===this._slotData){this._slotData=t,this._colorDirty=!0,this._blendModeDirty=!0,this._blendMode=this._slotData.blendMode,this._zOrder=this._slotData.zOrder,this._zIndex=this._slotData.zIndex,this._alpha=this._slotData.alpha,this._colorTransform.copyFrom(this._slotData.color),this._rawDisplay=i,this._meshDisplay=n,this._armature=e;var a=this._armature.getBone(this._slotData.parent.name);null!==a&&(this._parent=a),this._armature._addSlot(this),this._initDisplay(this._rawDisplay,!1),this._rawDisplay!==this._meshDisplay&&this._initDisplay(this._meshDisplay,!1),this._onUpdateDisplay(),this._addDisplay()}},n.prototype.update=function(t){if(this._displayDataDirty&&(this._updateDisplayData(),this._displayDataDirty=!1),this._displayDirty&&(this._updateDisplay(),this._displayDirty=!1),(this._geometryDirty||this._textureDirty)&&(null!==this._display&&this._display!==this._rawDisplay&&this._display!==this._meshDisplay||this._updateFrame(),this._geometryDirty=!1,this._textureDirty=!1),null!==this._display){if(this._visibleDirty&&(this._updateVisible(),this._visibleDirty=!1),this._blendModeDirty&&(this._updateBlendMode(),this._blendModeDirty=!1),this._colorDirty&&(this._updateColor(),this._colorDirty=!1),this._zOrderDirty&&(this._updateZOrder(),this._zOrderDirty=!1),null!==this._geometryData&&this._display===this._meshDisplay){var e=null!==this._geometryData.weight,i=0!==this._parent._boneData.type;if((this._verticesDirty||e&&this._isBonesUpdate()||i&&this._parent._childrenTransformDirty)&&(this._verticesDirty=!1,this._updateMesh()),e||i)return}if(t>=0&&null!==this._cachedFrameIndices){var n=this._cachedFrameIndices[t];n>=0&&this._cachedFrameIndex===n?this._transformDirty=!1:n>=0?(this._transformDirty=!0,this._cachedFrameIndex=n):this._transformDirty||this._parent._childrenTransformDirty?(this._transformDirty=!0,this._cachedFrameIndex=-1):this._cachedFrameIndex>=0?(this._transformDirty=!1,this._cachedFrameIndices[t]=this._cachedFrameIndex):(this._transformDirty=!0,this._cachedFrameIndex=-1)}else(this._transformDirty||this._parent._childrenTransformDirty)&&(t=-1,this._transformDirty=!0,this._cachedFrameIndex=-1);if(this._transformDirty){if(this._cachedFrameIndex<0){var a=t>=0;this._updateGlobalTransformMatrix(a),a&&null!==this._cachedFrameIndices&&(this._cachedFrameIndex=this._cachedFrameIndices[t]=this._armature._armatureData.setCacheFrame(this.globalTransformMatrix,this.global))}else this._armature._armatureData.getCacheFrame(this.globalTransformMatrix,this.global,this._cachedFrameIndex);this._updateTransform(),this._transformDirty=!1}}},n.prototype.invalidUpdate=function(){this._displayDataDirty=!0,this._displayDirty=!0,this._transformDirty=!0},n.prototype.updateTransformAndMatrix=function(){this._transformDirty&&(this._updateGlobalTransformMatrix(!1),this._transformDirty=!1)},n.prototype.replaceRawDisplayData=function(t,e){if(void 0===e&&(e=-1),e<0)e=this._displayIndex<0?0:this._displayIndex;else if(e>=this._displayFrames.length)return;var i=this._displayFrames[e];if(i.rawDisplayData!==t){if(i.deformVertices.length=0,i.rawDisplayData=t,null===i.rawDisplayData){var n=this._armature._armatureData.defaultSkin;if(null!==n){var a=n.getDisplays(this._slotData.name);null!==a&&e<a.length&&(i.rawDisplayData=a[e])}}e===this._displayIndex&&(this._displayDataDirty=!0)}},n.prototype.replaceDisplayData=function(t,e){if(void 0===e&&(e=-1),e<0)e=this._displayIndex<0?0:this._displayIndex;else if(e>=this._displayFrames.length)return;var i=this._displayFrames[e];i.displayData!==t&&i.rawDisplayData!==t&&(i.displayData=t,e===this._displayIndex&&(this._displayDataDirty=!0))},n.prototype.replaceTextureData=function(t,e){if(void 0===e&&(e=-1),e<0)e=this._displayIndex<0?0:this._displayIndex;else if(e>=this._displayFrames.length)return;var i=this._displayFrames[e];i.textureData!==t&&(i.textureData=t,e===this._displayIndex&&(this._displayDataDirty=!0))},n.prototype.replaceDisplay=function(e,i){if(void 0===i&&(i=-1),i<0)i=this._displayIndex<0?0:this._displayIndex;else if(i>=this._displayFrames.length)return;var n=this._displayFrames[i];if(n.display!==e){var a=n.display;n.display=e,null===a||a===this._rawDisplay||a===this._meshDisplay||this._hasDisplay(a)||a instanceof t.Armature||this._disposeDisplay(a,!0),null===e||e===this._rawDisplay||e===this._meshDisplay||this._hasDisplay(a)||e instanceof t.Armature||this._initDisplay(e,!0),i===this._displayIndex&&(this._displayDirty=!0)}},n.prototype.containsPoint=function(t,e){return null!==this._boundingBoxData&&(this.updateTransformAndMatrix(),n._helpMatrix.copyFrom(this.globalTransformMatrix),n._helpMatrix.invert(),n._helpMatrix.transformPoint(t,e,n._helpPoint),this._boundingBoxData.containsPoint(n._helpPoint.x,n._helpPoint.y))},n.prototype.intersectsSegment=function(t,e,i,a,r,s,o){if(void 0===r&&(r=null),void 0===s&&(s=null),void 0===o&&(o=null),null===this._boundingBoxData)return 0;this.updateTransformAndMatrix(),n._helpMatrix.copyFrom(this.globalTransformMatrix),n._helpMatrix.invert(),n._helpMatrix.transformPoint(t,e,n._helpPoint),t=n._helpPoint.x,e=n._helpPoint.y,n._helpMatrix.transformPoint(i,a,n._helpPoint),i=n._helpPoint.x,a=n._helpPoint.y;var h=this._boundingBoxData.intersectsSegment(t,e,i,a,r,s,o);return h>0&&(1===h||2===h?null!==r?(this.globalTransformMatrix.transformPoint(r.x,r.y,r),null!==s&&(s.x=r.x,s.y=r.y)):null!==s&&this.globalTransformMatrix.transformPoint(s.x,s.y,s):(null!==r&&this.globalTransformMatrix.transformPoint(r.x,r.y,r),null!==s&&this.globalTransformMatrix.transformPoint(s.x,s.y,s)),null!==o&&(this.globalTransformMatrix.transformPoint(Math.cos(o.x),Math.sin(o.x),n._helpPoint,!0),o.x=Math.atan2(n._helpPoint.y,n._helpPoint.x),this.globalTransformMatrix.transformPoint(Math.cos(o.y),Math.sin(o.y),n._helpPoint,!0),o.y=Math.atan2(n._helpPoint.y,n._helpPoint.x))),h},n.prototype.getDisplayFrameAt=function(t){return this._displayFrames[t]},Object.defineProperty(n.prototype,"visible",{get:function(){return this._visible},set:function(t){this._visible!==t&&(this._visible=t,this._updateVisible())},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"displayFrameCount",{get:function(){return this._displayFrames.length},set:function(i){var n=this._displayFrames.length;if(n<i){this._displayFrames.length=i;for(var a=n;a<i;++a)this._displayFrames[a]=t.BaseObject.borrowObject(e)}else if(n>i){for(a=n-1;a<i;--a)this.replaceDisplay(null,a),this._displayFrames[a].returnToPool();this._displayFrames.length=i}},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"displayIndex",{get:function(){return this._displayIndex},set:function(t){this._setDisplayIndex(t),this.update(-1)},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"name",{get:function(){return this._slotData.name},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"displayList",{get:function(){for(var t=new Array,e=0,i=this._displayFrames;e<i.length;e++){var n=i[e];t.push(n.display)}return t},set:function(t){this.displayFrameCount=t.length;for(var e=0,i=0,n=t;i<n.length;i++){var a=n[i];this.replaceDisplay(a,e++)}},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"slotData",{get:function(){return this._slotData},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"boundingBoxData",{get:function(){return this._boundingBoxData},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"rawDisplay",{get:function(){return this._rawDisplay},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"meshDisplay",{get:function(){return this._meshDisplay},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"display",{get:function(){return this._display},set:function(t){this._display!==t&&(0===this._displayFrames.length&&(this.displayFrameCount=1,this._displayIndex=0),this.replaceDisplay(t,this._displayIndex))},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"childArmature",{get:function(){return this._childArmature},set:function(t){this._childArmature!==t&&(this.display=t)},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"parent",{get:function(){return this._parent},enumerable:!0,configurable:!0}),n.prototype.getDisplay=function(){return this._display},n.prototype.setDisplay=function(t){this.display=t},n}(t.TransformObject);t.Slot=i}(dragonBones||(dragonBones={})),function(t){var e=function(e){function i(){return null!==e&&e.apply(this,arguments)||this}return __extends(i,e),i.prototype._onClear=function(){this._armature=null,this._target=null,this._root=null,this._bone=null},Object.defineProperty(i.prototype,"name",{get:function(){return this._constraintData.name},enumerable:!0,configurable:!0}),i._helpMatrix=new t.Matrix,i._helpTransform=new t.Transform,i._helpPoint=new t.Point,i}(t.BaseObject);t.Constraint=e;var i=function(e){function i(){return null!==e&&e.apply(this,arguments)||this}return __extends(i,e),i.toString=function(){return"[class dragonBones.IKConstraint]"},i.prototype._onClear=function(){e.prototype._onClear.call(this),this._scaleEnabled=!1,this._bendPositive=!1,this._weight=1,this._constraintData=null},i.prototype._computeA=function(){var e=this._target.global,i=this._root.global,n=this._root.globalTransformMatrix,a=Math.atan2(e.y-i.y,e.x-i.x);i.scaleX<0&&(a+=Math.PI),i.rotation+=t.Transform.normalizeRadian(a-i.rotation)*this._weight,i.toMatrix(n)},i.prototype._computeB=function(){var e=this._bone._boneData.length,i=this._root,n=this._target.global,a=i.global,r=this._bone.global,s=this._bone.globalTransformMatrix,o=s.a*e,h=s.b*e,l=o*o+h*h,u=Math.sqrt(l),p=r.x-a.x,c=r.y-a.y,d=p*p+c*c,_=Math.sqrt(d),f=r.rotation,m=a.rotation,g=Math.atan2(c,p),y=(p=n.x-a.x)*p+(c=n.y-a.y)*c,b=Math.sqrt(y),v=0;if(u+_<=b||b+u<=_||b+_<=u)v=Math.atan2(n.y-a.y,n.x-a.x),u+_<=b||_<u&&(v+=Math.PI);else{var T=(d-l+y)/(2*y),I=Math.sqrt(d-T*T*y)/b,P=a.x+p*T,S=a.y+c*T,A=-c*I,D=p*I,x=!1,w=i.parent;if(null!==w){var O=w.globalTransformMatrix;x=O.a*O.d-O.b*O.c<0}x!==this._bendPositive?(r.x=P-A,r.y=S-D):(r.x=P+A,r.y=S+D),v=Math.atan2(r.y-a.y,r.x-a.x)}var E=t.Transform.normalizeRadian(v-g);a.rotation=m+E*this._weight,a.toMatrix(i.globalTransformMatrix);var C=g+E*this._weight;r.x=a.x+Math.cos(C)*_,r.y=a.y+Math.sin(C)*_;var M=Math.atan2(n.y-r.y,n.x-r.x);r.scaleX<0&&(M+=Math.PI),r.rotation=a.rotation+f-m+t.Transform.normalizeRadian(M-E-f)*this._weight,r.toMatrix(s)},i.prototype.init=function(t,e){if(null===this._constraintData){this._constraintData=t,this._armature=e,this._target=this._armature.getBone(this._constraintData.target.name),this._root=this._armature.getBone(this._constraintData.root.name),this._bone=null!==this._constraintData.bone?this._armature.getBone(this._constraintData.bone.name):null;var i=this._constraintData;this._scaleEnabled=i.scaleEnabled,this._bendPositive=i.bendPositive,this._weight=i.weight,this._root._hasConstraint=!0}},i.prototype.update=function(){this._root.updateByConstraint(),null!==this._bone?(this._bone.updateByConstraint(),this._computeB()):this._computeA()},i.prototype.invalidUpdate=function(){this._root.invalidUpdate(),null!==this._bone&&this._bone.invalidUpdate()},i}(e);t.IKConstraint=i;var n=function(e){function i(){var t=null!==e&&e.apply(this,arguments)||this;return t._bones=[],t._spaces=[],t._positions=[],t._curves=[],t._boneLengths=[],t._pathGlobalVertices=[],t._segments=[10],t}return __extends(i,e),i.toString=function(){return"[class dragonBones.PathConstraint]"},i.prototype._onClear=function(){e.prototype._onClear.call(this),this.dirty=!1,this.pathOffset=0,this.position=0,this.spacing=0,this.rotateOffset=0,this.rotateMix=1,this.translateMix=1,this._pathSlot=null,this._bones.length=0,this._spaces.length=0,this._positions.length=0,this._curves.length=0,this._boneLengths.length=0,this._pathGlobalVertices.length=0},i.prototype._updatePathVertices=function(t){var e=this._armature,i=e.armatureData.parent,n=e.armatureData.scale,a=i.intArray,r=i.floatArray,s=t.offset,o=a[s+0],h=a[s+2];this._pathGlobalVertices.length=2*o;var l=t.weight;if(null!==l)for(var u=this._pathSlot._geometryBones,p=l.bones.length,c=l.offset,d=a[c+1],_=c+2+p,f=(S=0,0);S<o;S++){for(var m=0,g=0,y=0,b=a[_++];y<b;y++){var v=u[a[_++]];if(null!==v){v.updateByConstraint();P=v.globalTransformMatrix;var T=r[d++];D=r[d++]*n,x=r[d++]*n;m+=(P.a*D+P.c*x+P.tx)*T,g+=(P.b*D+P.d*x+P.ty)*T}}this._pathGlobalVertices[f++]=m,this._pathGlobalVertices[f++]=g}else{var I=this._pathSlot.parent;I.updateByConstraint();for(var P=I.globalTransformMatrix,S=0,A=h;S<o;S+=2){var D=r[A++]*n,x=r[A++]*n,w=P.a*D+P.c*x+P.tx,O=P.b*D+P.d*x+P.ty;this._pathGlobalVertices[S]=w,this._pathGlobalVertices[S+1]=O}}},i.prototype._computeVertices=function(t,e,i,n){for(var a=i,r=t;a<e;a+=2)n[a]=this._pathGlobalVertices[r++],n[a+1]=this._pathGlobalVertices[r++]},i.prototype._computeBezierCurve=function(t,e,i,n,a){var r=this._armature.armatureData.parent.intArray[t.geometry.offset+0],s=this._positions,o=this._spaces,h=t.closed,l=Array(),u=2*r,p=u/6,c=-1,d=this.position;s.length=3*e+2;var _=0;if(t.constantSpeed){h?(u+=2,l.length=r,this._computeVertices(2,u-4,0,l),this._computeVertices(0,2,u-4,l),l[u-2]=l[0],l[u-1]=l[1]):(p--,u-=4,l.length=u,this._computeVertices(2,u,0,l));var f=new Array(p);_=0;for(var m,g,y,b,v,T,I,P,S=l[0],A=l[1],D=0,x=0,w=0,O=0,E=0,C=0,M=(U=0,2);U<p;U++,M+=6)D=l[M],x=l[M+1],w=l[M+2],O=l[M+3],E=l[M+4],C=l[M+5],v=2*(m=.1875*(S-2*D+w))+(y=.09375*(3*(D-w)-S+E)),T=2*(g=.1875*(A-2*x+O))+(b=.09375*(3*(x-O)-A+C)),I=.75*(D-S)+m+.16666667*y,P=.75*(x-A)+g+.16666667*b,_+=Math.sqrt(I*I+P*P),I+=v,P+=T,v+=y,T+=b,_+=Math.sqrt(I*I+P*P),I+=v,P+=T,_+=Math.sqrt(I*I+P*P),I+=v+y,P+=T+b,_+=Math.sqrt(I*I+P*P),f[U]=_,S=E,A=C;if(n&&(d*=_),a)for(U=0;U<e;U++)o[U]*=_;for(var B=this._segments,k=0,F=(U=0,H=0,Y=0,0);U<e;U++,H+=3){var N=d+=o[U];if(h)(N%=_)<0&&(N+=_),Y=0;else{if(N<0)continue;if(N>_)continue}for(;;Y++){var R=f[Y];if(!(N>R)){if(0===Y)N/=R;else N=(N-(X=f[Y-1]))/(R-X);break}}if(Y!==c){c=Y;var L=6*Y;for(S=l[L],A=l[L+1],D=l[L+2],x=l[L+3],w=l[L+4],O=l[L+5],E=l[L+6],C=l[L+7],v=2*(m=.03*(S-2*D+w))+(y=.006*(3*(D-w)-S+E)),T=2*(g=.03*(A-2*x+O))+(b=.006*(3*(x-O)-A+C)),I=.3*(D-S)+m+.16666667*y,P=.3*(x-A)+g+.16666667*b,k=Math.sqrt(I*I+P*P),B[0]=k,L=1;L<8;L++)I+=v,P+=T,v+=y,T+=b,k+=Math.sqrt(I*I+P*P),B[L]=k;I+=v,P+=T,k+=Math.sqrt(I*I+P*P),B[8]=k,I+=v+y,P+=T+b,k+=Math.sqrt(I*I+P*P),B[9]=k,F=0}for(N*=k;;F++){var j=B[F];if(!(N>j)){var X;if(0===F)N/=j;else N=F+(N-(X=B[F-1]))/(j-X);break}}this.addCurvePosition(.1*N,S,A,D,x,w,O,E,C,s,H,i)}}else{var G=t.curveLengths;if(_=G[p-=h?1:2],n&&(d*=_),a)for(var U=0;U<e;U++)o[U]*=_;l.length=8;for(var U=0,H=0,Y=0;U<e;U++,H+=3){if(d+=o[U],h)(d%=_)<0&&(d+=_),Y=0;else{if(d<0)continue;if(d>_)continue}for(var V=0;;Y++){var z=G[Y];if(!(d>z)){if(0===Y)V=d/z;else{var W=G[Y-1];V=(d-W)/(z-W)}break}}Y!==c&&(c=Y,h&&Y===p?(this._computeVertices(u-4,4,0,l),this._computeVertices(0,4,4,l)):this._computeVertices(6*Y+2,8,0,l)),this.addCurvePosition(V,l[0],l[1],l[2],l[3],l[4],l[5],l[6],l[7],s,H,i)}}},i.prototype.addCurvePosition=function(t,e,i,n,a,r,s,o,h,l,u,p){if(0===t)return l[u]=e,l[u+1]=i,void(l[u+2]=0);if(1===t)return l[u]=o,l[u+1]=h,void(l[u+2]=0);var c=1-t,d=c*c,_=t*t,f=d*c,m=d*t*3,g=c*_*3,y=t*_,b=f*e+m*n+g*r+y*o,v=f*i+m*a+g*s+y*h;l[u]=b,l[u+1]=v,l[u+2]=p?Math.atan2(v-(f*i+m*a+g*s),b-(f*e+m*n+g*r)):0},i.prototype.init=function(t,e){this._constraintData=t,this._armature=e;var i=t;this.pathOffset=i.pathDisplayData.geometry.offset,this.position=i.position,this.spacing=i.spacing,this.rotateOffset=i.rotateOffset,this.rotateMix=i.rotateMix,this.translateMix=i.translateMix,this._root=this._armature.getBone(i.root.name),this._target=this._armature.getBone(i.target.name),this._pathSlot=this._armature.getSlot(i.pathSlot.name);for(var n=0,a=i.bones.length;n<a;n++){var r=this._armature.getBone(i.bones[n].name);null!==r&&this._bones.push(r)}2===i.rotateMode&&(this._boneLengths.length=this._bones.length),this._root._hasConstraint=!0},i.prototype.update=function(){var e=this._pathSlot;if(null!==e._geometryData&&e._geometryData.offset===this.pathOffset){var i=this._constraintData,n=!1;if(this._root._childrenTransformDirty?(this._updatePathVertices(e._geometryData),n=!0):(e._verticesDirty||e._isBonesUpdate())&&(this._updatePathVertices(e._geometryData),e._verticesDirty=!1,n=!0),n||this.dirty){var a=i.positionMode,r=i.spacingMode,s=i.rotateMode,o=this._bones,h=0===r,l=2===s,u=0===s,p=o.length,c=u?p:p+1,d=this.spacing,_=this._spaces;if(_.length=c,l||h){_[0]=0;for(var f=0,m=c-1;f<m;f++){(O=o[f]).updateByConstraint();var g=O._boneData.length,y=g*(E=O.globalTransformMatrix).a,b=g*E.b,v=Math.sqrt(y*y+b*b);l&&(this._boneLengths[f]=v),_[f+1]=(g+d)*v/g}}else for(f=0;f<c;f++)_[f]=d;this._computeBezierCurve(e._displayFrame.rawDisplayData,c,u,1===a,2===r);var T,I=this._positions,P=this.rotateOffset,S=I[0],A=I[1];if(0===P)T=1===s;else if(T=!1,null!==(O=e.parent))P*=(E=O.globalTransformMatrix).a*E.d-E.b*E.c>0?t.Transform.DEG_RAD:-t.Transform.DEG_RAD;for(var D=this.rotateMix,x=this.translateMix,w=(f=0,3);f<p;f++,w+=3){var O,E;(O=o[f]).updateByConstraint(),(E=O.globalTransformMatrix).tx+=(S-E.tx)*x,E.ty+=(A-E.ty)*x;var C=(y=I[w])-S,M=(b=I[w+1])-A;if(l){var B=this._boneLengths[f],k=(Math.sqrt(C*C+M*M)/B-1)*D+1;E.a*=k,E.b*=k}if(S=y,A=b,D>0){var F=E.a,N=E.b,R=E.c,L=E.d,j=void 0,X=void 0,G=void 0;if(j=u?I[w-1]:Math.atan2(M,C),j-=Math.atan2(N,F),T){X=Math.cos(j),G=Math.sin(j);var U=O._boneData.length;S+=(U*(X*F-G*N)-C)*D,A+=(U*(G*F+X*N)-M)*D}else j+=P;j>t.Transform.PI?j-=t.Transform.PI_D:j<-t.Transform.PI&&(j+=t.Transform.PI_D),j*=D,X=Math.cos(j),G=Math.sin(j),E.a=X*F-G*N,E.b=G*F+X*N,E.c=X*R-G*L,E.d=G*R+X*L}O.global.fromMatrix(E)}this.dirty=!1}}},i.prototype.invalidUpdate=function(){},i}(e);t.PathConstraint=n}(dragonBones||(dragonBones={})),function(t){var e=function(){function t(t){void 0===t&&(t=0),this.time=0,this.timeScale=1,this._systemTime=0,this._animatebles=[],this._clock=null,this.time=t,this._systemTime=.001*(new Date).getTime()}return t.prototype.advanceTime=function(t){t!=t&&(t=0);var e=.001*Date.now();if(t<0&&(t=e-this._systemTime),this._systemTime=e,1!==this.timeScale&&(t*=this.timeScale),0!==t){t<0?this.time-=t:this.time+=t;for(var i=0,n=0,a=this._animatebles.length;i<a;++i){var r=this._animatebles[i];null!==r?(n>0&&(this._animatebles[i-n]=r,this._animatebles[i]=null),r.advanceTime(t)):n++}if(n>0){for(a=this._animatebles.length;i<a;++i){var s=this._animatebles[i];null!==s?this._animatebles[i-n]=s:n++}this._animatebles.length-=n}}},t.prototype.contains=function(t){if(t===this)return!1;for(var e=t;e!==this&&null!==e;)e=e.clock;return e===this},t.prototype.add=function(t){this._animatebles.indexOf(t)<0&&(this._animatebles.push(t),t.clock=this)},t.prototype.remove=function(t){var e=this._animatebles.indexOf(t);e>=0&&(this._animatebles[e]=null,t.clock=null)},t.prototype.clear=function(){for(var t=0,e=this._animatebles;t<e.length;t++){var i=e[t];null!==i&&(i.clock=null)}},Object.defineProperty(t.prototype,"clock",{get:function(){return this._clock},set:function(t){this._clock!==t&&(null!==this._clock&&this._clock.remove(this),this._clock=t,null!==this._clock&&this._clock.add(this))},enumerable:!0,configurable:!0}),t}();t.WorldClock=e}(dragonBones||(dragonBones={})),function(t){var e=function(e){function i(){var t=null!==e&&e.apply(this,arguments)||this;return t._animationNames=[],t._animationStates=[],t._animations={},t._blendStates={},t._animationConfig=null,t}return __extends(i,e),i.toString=function(){return"[class dragonBones.Animation]"},i.prototype._onClear=function(){for(var t=0,e=this._animationStates;t<e.length;t++){e[t].returnToPool()}for(var i in this._animations)delete this._animations[i];for(var i in this._blendStates){var n=this._blendStates[i];for(var a in n)n[a].returnToPool();delete this._blendStates[i]}null!==this._animationConfig&&this._animationConfig.returnToPool(),this.timeScale=1,this._animationDirty=!1,this._inheritTimeScale=1,this._animationNames.length=0,this._animationStates.length=0,this._armature=null,this._animationConfig=null,this._lastAnimationState=null},i.prototype._fadeOut=function(t){switch(t.fadeOutMode){case 1:for(var e=0,i=this._animationStates;e<i.length;e++){null===(l=i[e])._parent&&(l.layer===t.layer&&l.fadeOut(t.fadeOutTime,t.pauseFadeOut))}break;case 2:for(var n=0,a=this._animationStates;n<a.length;n++){null===(l=a[n])._parent&&(l.group===t.group&&l.fadeOut(t.fadeOutTime,t.pauseFadeOut))}break;case 3:for(var r=0,s=this._animationStates;r<s.length;r++){null===(l=s[r])._parent&&(l.layer===t.layer&&l.group===t.group&&l.fadeOut(t.fadeOutTime,t.pauseFadeOut))}break;case 4:for(var o=0,h=this._animationStates;o<h.length;o++){var l;null===(l=h[o])._parent&&l.fadeOut(t.fadeOutTime,t.pauseFadeOut)}}},i.prototype.init=function(e){null===this._armature&&(this._armature=e,this._animationConfig=t.BaseObject.borrowObject(t.AnimationConfig))},i.prototype.advanceTime=function(t){for(var e in t<0&&(t=-t),this._armature.inheritAnimation&&null!==this._armature._parent?this._inheritTimeScale=this._armature._parent._armature.animation._inheritTimeScale*this.timeScale:this._inheritTimeScale=this.timeScale,1!==this._inheritTimeScale&&(t*=this._inheritTimeScale),this._blendStates){var i=this._blendStates[e];for(var n in i)i[n].reset()}var a=this._animationStates.length;if(1===a)if((m=this._animationStates[0])._fadeState>0&&m._subFadeState>0)this._armature._dragonBones.bufferObject(m),this._animationStates.length=0,this._lastAnimationState=null;else{var r=m.animationData,s=r.cacheFrameRate;if(this._animationDirty&&s>0){this._animationDirty=!1;for(var o=0,h=this._armature.getBones();o<h.length;o++){var l=h[o];l._cachedFrameIndices=r.getBoneCachedFrameIndices(l.name)}for(var u=0,p=this._armature.getSlots();u<p.length;u++){var c=p[u];if(c.displayFrameCount>0){var d=c.getDisplayFrameAt(0).rawDisplayData;if(null!==d&&d.parent===this._armature.armatureData.defaultSkin){c._cachedFrameIndices=r.getSlotCachedFrameIndices(c.name);continue}}c._cachedFrameIndices=null}}m.advanceTime(t,s)}else if(a>1){for(var _=0,f=0;_<a;++_){var m;(m=this._animationStates[_])._fadeState>0&&m._subFadeState>0?(f++,this._armature._dragonBones.bufferObject(m),this._animationDirty=!0,this._lastAnimationState===m&&(this._lastAnimationState=null)):(f>0&&(this._animationStates[_-f]=m),m.advanceTime(t,0)),_===a-1&&f>0&&(this._animationStates.length-=f,null===this._lastAnimationState&&this._animationStates.length>0&&(this._lastAnimationState=this._animationStates[this._animationStates.length-1]))}this._armature._cacheFrameIndex=-1}else this._armature._cacheFrameIndex=-1},i.prototype.reset=function(){for(var t=0,e=this._animationStates;t<e.length;t++){e[t].returnToPool()}this._animationDirty=!1,this._animationConfig.clear(),this._animationStates.length=0,this._lastAnimationState=null},i.prototype.stop=function(t){if(void 0===t&&(t=null),null!==t)null!==(n=this.getState(t))&&n.stop();else for(var e=0,i=this._animationStates;e<i.length;e++){var n;(n=i[e]).stop()}},i.prototype.playConfig=function(e){var i=e.animation;if(!(i in this._animations))return console.warn("Non-existent animation.\n","DragonBones name: "+this._armature.armatureData.parent.name,"Armature name: "+this._armature.name,"Animation name: "+i),null;var n=this._animations[i];if(5===e.fadeOutMode)for(var a=0,r=this._animationStates;a<r.length;a++){var s=r[a];if(s._fadeState<1&&s.layer===e.layer&&s.animationData===n)return s}0===this._animationStates.length?e.fadeInTime=0:e.fadeInTime<0&&(e.fadeInTime=n.fadeInTime),e.fadeOutTime<0&&(e.fadeOutTime=e.fadeInTime),e.timeScale<=-100&&(e.timeScale=1/n.scale),n.frameCount>0?(e.position<0?(e.position%=n.duration,e.position=n.duration-e.position):e.position===n.duration?e.position-=1e-6:e.position>n.duration&&(e.position%=n.duration),e.duration>0&&e.position+e.duration>n.duration&&(e.duration=n.duration-e.position),e.playTimes<0&&(e.playTimes=n.playTimes)):(e.playTimes=1,e.position=0,e.duration>0&&(e.duration=0)),0===e.duration&&(e.duration=-1),this._fadeOut(e);var o=t.BaseObject.borrowObject(t.AnimationState);if(o.init(this._armature,n,e),this._animationDirty=!0,this._armature._cacheFrameIndex=-1,this._animationStates.length>0){for(var h=!1,l=0,u=this._animationStates.length;l<u;++l){if(o.layer>this._animationStates[l].layer){h=!0,this._animationStates.splice(l,0,o);break}if(l!==u-1&&o.layer>this._animationStates[l+1].layer){h=!0,this._animationStates.splice(l+1,0,o);break}}h||this._animationStates.push(o)}else this._animationStates.push(o);for(var p=0,c=this._armature.getSlots();p<c.length;p++){var d=c[p].childArmature;null!==d&&d.inheritAnimation&&d.animation.hasAnimation(i)&&null===d.animation.getState(i)&&d.animation.fadeIn(i)}for(var _ in n.animationTimelines){var f=this.fadeIn(_,0,1,o.layer,"",5);if(null!==f){var m=n.animationTimelines[_];f.actionEnabled=!1,f.resetToPose=!1,f.stop(),o.addState(f,m);var g=this._animationStates.indexOf(o),y=this._animationStates.indexOf(f);y<g&&(this._animationStates.splice(g,1),this._animationStates.splice(y,0,o))}}return this._lastAnimationState=o,o},i.prototype.play=function(t,e){if(void 0===t&&(t=null),void 0===e&&(e=-1),this._animationConfig.clear(),this._animationConfig.resetToPose=!0,this._animationConfig.playTimes=e,this._animationConfig.fadeInTime=0,this._animationConfig.animation=null!==t?t:"",null!==t&&t.length>0)this.playConfig(this._animationConfig);else if(null===this._lastAnimationState){var i=this._armature.armatureData.defaultAnimation;null!==i&&(this._animationConfig.animation=i.name,this.playConfig(this._animationConfig))}else this._lastAnimationState.isPlaying||this._lastAnimationState.isCompleted?(this._animationConfig.animation=this._lastAnimationState.name,this.playConfig(this._animationConfig)):this._lastAnimationState.play();return this._lastAnimationState},i.prototype.fadeIn=function(t,e,i,n,a,r){return void 0===e&&(e=-1),void 0===i&&(i=-1),void 0===n&&(n=0),void 0===a&&(a=null),void 0===r&&(r=3),this._animationConfig.clear(),this._animationConfig.fadeOutMode=r,this._animationConfig.playTimes=i,this._animationConfig.layer=n,this._animationConfig.fadeInTime=e,this._animationConfig.animation=t,this._animationConfig.group=null!==a?a:"",this.playConfig(this._animationConfig)},i.prototype.gotoAndPlayByTime=function(t,e,i){return void 0===e&&(e=0),void 0===i&&(i=-1),this._animationConfig.clear(),this._animationConfig.resetToPose=!0,this._animationConfig.playTimes=i,this._animationConfig.position=e,this._animationConfig.fadeInTime=0,this._animationConfig.animation=t,this.playConfig(this._animationConfig)},i.prototype.gotoAndPlayByFrame=function(t,e,i){void 0===e&&(e=0),void 0===i&&(i=-1),this._animationConfig.clear(),this._animationConfig.resetToPose=!0,this._animationConfig.playTimes=i,this._animationConfig.fadeInTime=0,this._animationConfig.animation=t;var n=t in this._animations?this._animations[t]:null;return null!==n&&(this._animationConfig.position=n.frameCount>0?n.duration*e/n.frameCount:0),this.playConfig(this._animationConfig)},i.prototype.gotoAndPlayByProgress=function(t,e,i){void 0===e&&(e=0),void 0===i&&(i=-1),this._animationConfig.clear(),this._animationConfig.resetToPose=!0,this._animationConfig.playTimes=i,this._animationConfig.fadeInTime=0,this._animationConfig.animation=t;var n=t in this._animations?this._animations[t]:null;return null!==n&&(this._animationConfig.position=n.duration*(e>0?e:0)),this.playConfig(this._animationConfig)},i.prototype.gotoAndStopByTime=function(t,e){void 0===e&&(e=0);var i=this.gotoAndPlayByTime(t,e,1);return null!==i&&i.stop(),i},i.prototype.gotoAndStopByFrame=function(t,e){void 0===e&&(e=0);var i=this.gotoAndPlayByFrame(t,e,1);return null!==i&&i.stop(),i},i.prototype.gotoAndStopByProgress=function(t,e){void 0===e&&(e=0);var i=this.gotoAndPlayByProgress(t,e,1);return null!==i&&i.stop(),i},i.prototype.getBlendState=function(e,i,n){e in this._blendStates||(this._blendStates[e]={});var a=this._blendStates[e];i in a||((a[i]=t.BaseObject.borrowObject(t.BlendState)).target=n);return a[i]},i.prototype.getState=function(t,e){void 0===e&&(e=-1);for(var i=this._animationStates.length;i--;){var n=this._animationStates[i];if(n.name===t&&(e<0||n.layer===e))return n}return null},i.prototype.hasAnimation=function(t){return t in this._animations},i.prototype.getStates=function(){return this._animationStates},Object.defineProperty(i.prototype,"isPlaying",{get:function(){for(var t=0,e=this._animationStates;t<e.length;t++){if(e[t].isPlaying)return!0}return!1},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"isCompleted",{get:function(){for(var t=0,e=this._animationStates;t<e.length;t++){if(!e[t].isCompleted)return!1}return this._animationStates.length>0},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"lastAnimationName",{get:function(){return null!==this._lastAnimationState?this._lastAnimationState.name:""},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"animationNames",{get:function(){return this._animationNames},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"animations",{get:function(){return this._animations},set:function(t){if(this._animations!==t){for(var e in this._animationNames.length=0,this._animations)delete this._animations[e];for(var e in t)this._animationNames.push(e),this._animations[e]=t[e]}},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"animationConfig",{get:function(){return this._animationConfig.clear(),this._animationConfig},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"lastAnimationState",{get:function(){return this._lastAnimationState},enumerable:!0,configurable:!0}),i}(t.BaseObject);t.Animation=e}(dragonBones||(dragonBones={})),function(t){var e=function(e){function n(){var t=null!==e&&e.apply(this,arguments)||this;return t._boneMask=[],t._boneTimelines=[],t._boneBlendTimelines=[],t._slotTimelines=[],t._slotBlendTimelines=[],t._constraintTimelines=[],t._animationTimelines=[],t._poseTimelines=[],t._actionTimeline=null,t._zOrderTimeline=null,t}return __extends(n,e),n.toString=function(){return"[class dragonBones.AnimationState]"},n.prototype._onClear=function(){for(var t=0,e=this._boneTimelines;t<e.length;t++){(c=e[t]).returnToPool()}for(var i=0,n=this._boneBlendTimelines;i<n.length;i++){(c=n[i]).returnToPool()}for(var a=0,r=this._slotTimelines;a<r.length;a++){(c=r[a]).returnToPool()}for(var s=0,o=this._slotBlendTimelines;s<o.length;s++){(c=o[s]).returnToPool()}for(var h=0,l=this._constraintTimelines;h<l.length;h++){(c=l[h]).returnToPool()}for(var u=0,p=this._animationTimelines;u<p.length;u++){var c,d=(c=p[u]).target;d._parent===this&&(d._fadeState=1,d._subFadeState=1,d._parent=null),c.returnToPool()}null!==this._actionTimeline&&this._actionTimeline.returnToPool(),null!==this._zOrderTimeline&&this._zOrderTimeline.returnToPool(),this.actionEnabled=!1,this.additive=!1,this.displayControl=!1,this.resetToPose=!1,this.blendType=0,this.playTimes=1,this.layer=0,this.timeScale=1,this._weight=1,this.parameterX=0,this.parameterY=0,this.positionX=0,this.positionY=0,this.autoFadeOutTime=0,this.fadeTotalTime=0,this.name="",this.group="",this._timelineDirty=2,this._playheadState=0,this._fadeState=-1,this._subFadeState=-1,this._position=0,this._duration=0,this._fadeTime=0,this._time=0,this._fadeProgress=0,this._weightResult=0,this._boneMask.length=0,this._boneTimelines.length=0,this._boneBlendTimelines.length=0,this._slotTimelines.length=0,this._slotBlendTimelines.length=0,this._constraintTimelines.length=0,this._animationTimelines.length=0,this._poseTimelines.length=0,this._animationData=null,this._armature=null,this._actionTimeline=null,this._zOrderTimeline=null,this._activeChildA=null,this._activeChildB=null,this._parent=null},n.prototype._updateTimelines=function(){for(var e=0,i=this._armature._constraints;e<i.length;e++){var n=i[e],a=this._animationData.getConstraintTimelines(n.name);if(null!==a)for(var r=0,s=a;r<s.length;r++){var o=s[r];switch(o.type){case 30:(h=t.BaseObject.borrowObject(t.IKConstraintTimelineState)).target=n,h.init(this._armature,this,o),this._constraintTimelines.push(h)}}else if(this.resetToPose){var h;(h=t.BaseObject.borrowObject(t.IKConstraintTimelineState)).target=n,h.init(this._armature,this,null),this._constraintTimelines.push(h),this._poseTimelines.push(h)}}},n.prototype._updateBoneAndSlotTimelines=function(){for(var e={},n=0,a=this._boneTimelines;n<a.length;n++){(u=(y=a[n]).target.target.name)in e||(e[u]=[]),e[u].push(y)}for(var r=0,s=this._boneBlendTimelines;r<s.length;r++){(u=(y=s[r]).target.target.name)in e||(e[u]=[]),e[u].push(y)}for(var o=0,h=this._armature.getBones();o<h.length;o++){var l=h[o],u=l.name;if(this.containsBoneMask(u))if(u in e)delete e[u];else{var p=this._animationData.getBoneTimelines(u),c=this._armature.animation.getBlendState(i.BONE_TRANSFORM,l.name,l);if(null!==p)for(var d=0,_=p;d<_.length;d++){switch((B=_[d]).type){case 10:(y=t.BaseObject.borrowObject(t.BoneAllTimelineState)).target=c,y.init(this._armature,this,B),this._boneTimelines.push(y);break;case 11:(y=t.BaseObject.borrowObject(t.BoneTranslateTimelineState)).target=c,y.init(this._armature,this,B),this._boneTimelines.push(y);break;case 12:(y=t.BaseObject.borrowObject(t.BoneRotateTimelineState)).target=c,y.init(this._armature,this,B),this._boneTimelines.push(y);break;case 13:(y=t.BaseObject.borrowObject(t.BoneScaleTimelineState)).target=c,y.init(this._armature,this,B),this._boneTimelines.push(y);break;case 60:(y=t.BaseObject.borrowObject(t.AlphaTimelineState)).target=this._armature.animation.getBlendState(i.BONE_ALPHA,l.name,l),y.init(this._armature,this,B),this._boneBlendTimelines.push(y);break;case 50:(y=t.BaseObject.borrowObject(t.SurfaceTimelineState)).target=this._armature.animation.getBlendState(i.SURFACE,l.name,l),y.init(this._armature,this,B),this._boneBlendTimelines.push(y)}}else if(this.resetToPose){if(0===l._boneData.type)(y=t.BaseObject.borrowObject(t.BoneAllTimelineState)).target=c,y.init(this._armature,this,null),this._boneTimelines.push(y),this._poseTimelines.push(y);else(y=t.BaseObject.borrowObject(t.SurfaceTimelineState)).target=this._armature.animation.getBlendState(i.SURFACE,l.name,l),y.init(this._armature,this,null),this._boneBlendTimelines.push(y),this._poseTimelines.push(y)}}}for(var f in e)for(var m=0,g=e[f];m<g.length;m++){var y=g[m];(X=this._boneTimelines.indexOf(y))>=0&&(this._boneTimelines.splice(X,1),y.returnToPool()),(X=this._boneBlendTimelines.indexOf(y))>=0&&(this._boneBlendTimelines.splice(X,1),y.returnToPool())}for(var b={},v=[],T=0,I=this._slotTimelines;T<I.length;T++){(u=(y=I[T]).target.name)in b||(b[u]=[]),b[u].push(y)}for(var P=0,S=this._slotBlendTimelines;P<S.length;P++){(u=(y=S[P]).target.target.name)in b||(b[u]=[]),b[u].push(y)}for(var A=0,D=this._armature.getSlots();A<D.length;A++){var x=D[A],w=x.parent.name;if(this.containsBoneMask(w))if((u=x.name)in b)delete b[u];else{var O=!1,E=!1;if(v.length=0,null!==(p=this._animationData.getSlotTimelines(u)))for(var C=0,M=p;C<M.length;C++){var B;switch((B=M[C]).type){case 20:(y=t.BaseObject.borrowObject(t.SlotDisplayTimelineState)).target=x,y.init(this._armature,this,B),this._slotTimelines.push(y),O=!0;break;case 23:(y=t.BaseObject.borrowObject(t.SlotZIndexTimelineState)).target=this._armature.animation.getBlendState(i.SLOT_Z_INDEX,x.name,x),y.init(this._armature,this,B),this._slotBlendTimelines.push(y);break;case 21:(y=t.BaseObject.borrowObject(t.SlotColorTimelineState)).target=x,y.init(this._armature,this,B),this._slotTimelines.push(y),E=!0;break;case 22:(y=t.BaseObject.borrowObject(t.DeformTimelineState)).target=this._armature.animation.getBlendState(i.SLOT_DEFORM,x.name,x),y.init(this._armature,this,B),null!==y.target?(this._slotBlendTimelines.push(y),v.push(y.geometryOffset)):y.returnToPool();break;case 24:(y=t.BaseObject.borrowObject(t.AlphaTimelineState)).target=this._armature.animation.getBlendState(i.SLOT_ALPHA,x.name,x),y.init(this._armature,this,B),this._slotBlendTimelines.push(y)}}if(this.resetToPose){if(!O)(y=t.BaseObject.borrowObject(t.SlotDisplayTimelineState)).target=x,y.init(this._armature,this,null),this._slotTimelines.push(y),this._poseTimelines.push(y);if(!E)(y=t.BaseObject.borrowObject(t.SlotColorTimelineState)).target=x,y.init(this._armature,this,null),this._slotTimelines.push(y),this._poseTimelines.push(y);for(var k=0,F=x.displayFrameCount;k<F;++k){var N=x.getDisplayFrameAt(k);if(0!==N.deformVertices.length){var R=N.getGeometryData();if(null!==R&&v.indexOf(R.offset)<0)(y=t.BaseObject.borrowObject(t.DeformTimelineState)).geometryOffset=R.offset,y.displayFrame=N,y.target=this._armature.animation.getBlendState(i.SLOT_DEFORM,x.name,x),y.init(this._armature,this,null),this._slotBlendTimelines.push(y),this._poseTimelines.push(y)}}}}}for(var f in b)for(var L=0,j=b[f];L<j.length;L++){var X;y=j[L];(X=this._slotTimelines.indexOf(y))>=0&&(this._slotTimelines.splice(X,1),y.returnToPool()),(X=this._slotBlendTimelines.indexOf(y))>=0&&(this._slotBlendTimelines.splice(X,1),y.returnToPool())}},n.prototype._advanceFadeTime=function(e){var i=this._fadeState>0;if(this._subFadeState<0&&(this._subFadeState=0,null===this._parent&&this.actionEnabled)){var n=i?t.EventObject.FADE_OUT:t.EventObject.FADE_IN;if(this._armature.eventDispatcher.hasDBEventListener(n))(a=t.BaseObject.borrowObject(t.EventObject)).type=n,a.armature=this._armature,a.animationState=this,this._armature._dragonBones.bufferEvent(a)}if((e<0&&(e=-e),this._fadeTime+=e,this._fadeTime>=this.fadeTotalTime?(this._subFadeState=1,this._fadeProgress=i?0:1):this._fadeTime>0?this._fadeProgress=i?1-this._fadeTime/this.fadeTotalTime:this._fadeTime/this.fadeTotalTime:this._fadeProgress=i?1:0,this._subFadeState>0)&&(i||(this._playheadState|=1,this._fadeState=0),null===this._parent&&this.actionEnabled)){var a;n=i?t.EventObject.FADE_OUT_COMPLETE:t.EventObject.FADE_IN_COMPLETE;if(this._armature.eventDispatcher.hasDBEventListener(n))(a=t.BaseObject.borrowObject(t.EventObject)).type=n,a.armature=this._armature,a.animationState=this,this._armature._dragonBones.bufferEvent(a)}},n.prototype.init=function(e,i,n){if(null===this._armature){if(this._armature=e,this._animationData=i,this.resetToPose=n.resetToPose,this.additive=n.additive,this.displayControl=n.displayControl,this.actionEnabled=n.actionEnabled,this.blendType=i.blendType,this.layer=n.layer,this.playTimes=n.playTimes,this.timeScale=n.timeScale,this.fadeTotalTime=n.fadeInTime,this.autoFadeOutTime=n.autoFadeOutTime,this.name=n.name.length>0?n.name:n.animation,this.group=n.group,this._weight=n.weight,n.pauseFadeIn?this._playheadState=2:this._playheadState=3,n.duration<0?(this._position=0,this._duration=this._animationData.duration,0!==n.position?this.timeScale>=0?this._time=n.position:this._time=n.position-this._duration:this._time=0):(this._position=n.position,this._duration=n.duration,this._time=0),this.timeScale<0&&0===this._time&&(this._time=-1e-6),this.fadeTotalTime<=0&&(this._fadeProgress=.999999),n.boneMask.length>0){this._boneMask.length=n.boneMask.length;for(var a=0,r=this._boneMask.length;a<r;++a)this._boneMask[a]=n.boneMask[a]}this._actionTimeline=t.BaseObject.borrowObject(t.ActionTimelineState),this._actionTimeline.init(this._armature,this,this._animationData.actionTimeline),this._actionTimeline.currentTime=this._time,this._actionTimeline.currentTime<0&&(this._actionTimeline.currentTime=this._duration-this._actionTimeline.currentTime),null!==this._animationData.zOrderTimeline&&(this._zOrderTimeline=t.BaseObject.borrowObject(t.ZOrderTimelineState),this._zOrderTimeline.init(this._armature,this,this._animationData.zOrderTimeline))}},n.prototype.advanceTime=function(t,e){0===this._fadeState&&0===this._subFadeState||this._advanceFadeTime(t),3===this._playheadState&&(1!==this.timeScale&&(t*=this.timeScale),this._time+=t),0!==this._timelineDirty&&(2===this._timelineDirty&&this._updateTimelines(),this._timelineDirty=0,this._updateBoneAndSlotTimelines());var i=0!==this._fadeState||0===this._subFadeState,n=0===this._fadeState&&e>0,a=!0,r=!0,s=this._time;if(this._weightResult=this._weight*this._fadeProgress,null!==this._parent&&(this._weightResult*=this._parent._weightResult),this._actionTimeline.playState<=0&&this._actionTimeline.update(s),0!==this._weight){if(n){var o=2*e;this._actionTimeline.currentTime=Math.floor(this._actionTimeline.currentTime*o)/o}if(null!==this._zOrderTimeline&&this._zOrderTimeline.playState<=0&&this._zOrderTimeline.update(s),n){var h=Math.floor(this._actionTimeline.currentTime*e);this._armature._cacheFrameIndex===h?(a=!1,r=!1):(this._armature._cacheFrameIndex=h,this._animationData.cachedFrames[h]?r=!1:this._animationData.cachedFrames[h]=!0)}if(a){var l=!1,u=null;if(r)for(var p=0,c=this._boneTimelines.length;p<c;++p){if((S=this._boneTimelines[p]).playState<=0&&S.update(s),S.target!==u)if(l=(f=S.target).update(this),u=f,1===f.dirty){var d=f.target.animationPose;d.x=0,d.y=0,d.rotation=0,d.skew=0,d.scaleX=1,d.scaleY=1}l&&S.blend(i)}for(p=0,c=this._boneBlendTimelines.length;p<c;++p){(S=this._boneBlendTimelines[p]).playState<=0&&S.update(s),S.target.update(this)&&S.blend(i)}if(this.displayControl)for(p=0,c=this._slotTimelines.length;p<c;++p){if((S=this._slotTimelines[p]).playState<=0){var _=S.target.displayController;null!==_&&_!==this.name&&_!==this.group||S.update(s)}}for(p=0,c=this._slotBlendTimelines.length;p<c;++p){if((S=this._slotBlendTimelines[p]).playState<=0){var f=S.target;S.update(s),f.update(this)&&S.blend(i)}}for(p=0,c=this._constraintTimelines.length;p<c;++p){(S=this._constraintTimelines[p]).playState<=0&&S.update(s)}if(this._animationTimelines.length>0){var m=100,g=100,y=null,b=null;for(p=0,c=this._animationTimelines.length;p<c;++p){if((S=this._animationTimelines[p]).playState<=0&&S.update(s),1===this.blendType){var v=S.target,T=this.parameterX-v.positionX;T>=0?T<m&&(m=T,y=v):-T<g&&(g=-T,b=v)}}null!==y&&(this._activeChildA!==y&&(null!==this._activeChildA&&(this._activeChildA.weight=0),this._activeChildA=y,this._activeChildA.activeTimeline()),this._activeChildB!==b&&(null!==this._activeChildB&&(this._activeChildB.weight=0),this._activeChildB=b),y.weight=g/(m+g),b&&(b.weight=1-y.weight))}}if(0===this._fadeState){if(this._subFadeState>0&&(this._subFadeState=0,this._poseTimelines.length>0)){for(var I=0,P=this._poseTimelines;I<P.length;I++){var S=P[I],A=this._boneTimelines.indexOf(S);A>=0?(this._boneTimelines.splice(A,1),S.returnToPool()):(A=this._boneBlendTimelines.indexOf(S))>=0?(this._boneBlendTimelines.splice(A,1),S.returnToPool()):(A=this._slotTimelines.indexOf(S))>=0?(this._slotTimelines.splice(A,1),S.returnToPool()):(A=this._slotBlendTimelines.indexOf(S))>=0?(this._slotBlendTimelines.splice(A,1),S.returnToPool()):(A=this._constraintTimelines.indexOf(S))>=0&&(this._constraintTimelines.splice(A,1),S.returnToPool())}this._poseTimelines.length=0}this._actionTimeline.playState>0&&this.autoFadeOutTime>=0&&this.fadeOut(this.autoFadeOutTime)}}},n.prototype.play=function(){this._playheadState=3},n.prototype.stop=function(){this._playheadState&=1},n.prototype.fadeOut=function(t,e){if(void 0===e&&(e=!0),t<0&&(t=0),e&&(this._playheadState&=2),this._fadeState>0){if(t>this.fadeTotalTime-this._fadeTime)return}else{this._fadeState=1,this._subFadeState=-1,(t<=0||this._fadeProgress<=0)&&(this._fadeProgress=1e-6);for(var i=0,n=this._boneTimelines;i<n.length;i++){(_=n[i]).fadeOut()}for(var a=0,r=this._boneBlendTimelines;a<r.length;a++){(_=r[a]).fadeOut()}for(var s=0,o=this._slotTimelines;s<o.length;s++){(_=o[s]).fadeOut()}for(var h=0,l=this._slotBlendTimelines;h<l.length;h++){(_=l[h]).fadeOut()}for(var u=0,p=this._constraintTimelines;u<p.length;u++){(_=p[u]).fadeOut()}for(var c=0,d=this._animationTimelines;c<d.length;c++){var _;(_=d[c]).fadeOut(),_.target.fadeOut(999999,!0)}}this.displayControl=!1,this.fadeTotalTime=this._fadeProgress>1e-6?t/this._fadeProgress:0,this._fadeTime=this.fadeTotalTime*(1-this._fadeProgress)},n.prototype.containsBoneMask=function(t){return 0===this._boneMask.length||this._boneMask.indexOf(t)>=0},n.prototype.addBoneMask=function(t,e){void 0===e&&(e=!0);var i=this._armature.getBone(t);if(null!==i){if(this._boneMask.indexOf(t)<0&&this._boneMask.push(t),e)for(var n=0,a=this._armature.getBones();n<a.length;n++){var r=a[n];this._boneMask.indexOf(r.name)<0&&i.contains(r)&&this._boneMask.push(r.name)}this._timelineDirty=1}},n.prototype.removeBoneMask=function(t,e){void 0===e&&(e=!0);var i=this._boneMask.indexOf(t);if(i>=0&&this._boneMask.splice(i,1),e){var n=this._armature.getBone(t);if(null!==n){var a=this._armature.getBones();if(this._boneMask.length>0)for(var r=0,s=a;r<s.length;r++){var o=s[r],h=this._boneMask.indexOf(o.name);h>=0&&n.contains(o)&&this._boneMask.splice(h,1)}else for(var l=0,u=a;l<u.length;l++){(o=u[l])!==n&&(n.contains(o)||this._boneMask.push(o.name))}}}this._timelineDirty=1},n.prototype.removeAllBoneMask=function(){this._boneMask.length=0,this._timelineDirty=1},n.prototype.addState=function(e,i){if(void 0===i&&(i=null),null!==i)for(var n=0,a=i;n<a.length;n++){var r=a[n];switch(r.type){case 40:if((o=t.BaseObject.borrowObject(t.AnimationProgressTimelineState)).target=e,o.init(this._armature,this,r),this._animationTimelines.push(o),0!==this.blendType){var s=r;e.positionX=s.x,e.positionY=s.y,e.weight=0}e._parent=this,this.resetToPose=!1;break;case 41:(o=t.BaseObject.borrowObject(t.AnimationWeightTimelineState)).target=e,o.init(this._armature,this,r),this._animationTimelines.push(o);break;case 42:var o;(o=t.BaseObject.borrowObject(t.AnimationParametersTimelineState)).target=e,o.init(this._armature,this,r),this._animationTimelines.push(o)}}null===e._parent&&(e._parent=this)},n.prototype.activeTimeline=function(){for(var t=0,e=this._slotTimelines;t<e.length;t++){var i=e[t];i.dirty=!0,i.currentTime=-1}},Object.defineProperty(n.prototype,"isFadeIn",{get:function(){return this._fadeState<0},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"isFadeOut",{get:function(){return this._fadeState>0},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"isFadeComplete",{get:function(){return 0===this._fadeState},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"isPlaying",{get:function(){return 0!=(2&this._playheadState)&&this._actionTimeline.playState<=0},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"isCompleted",{get:function(){return this._actionTimeline.playState>0},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"currentPlayTimes",{get:function(){return this._actionTimeline.currentPlayTimes},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"totalTime",{get:function(){return this._duration},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"currentTime",{get:function(){return this._actionTimeline.currentTime},set:function(t){var e=this._actionTimeline.currentPlayTimes-(this._actionTimeline.playState>0?1:0);if((t<0||this._duration<t)&&(t=t%this._duration+e*this._duration)<0&&(t+=this._duration),this.playTimes>0&&e===this.playTimes-1&&t===this._duration&&null===this._parent&&(t=this._duration-1e-6),this._time!==t){this._time=t,this._actionTimeline.setCurrentTime(this._time),null!==this._zOrderTimeline&&(this._zOrderTimeline.playState=-1);for(var i=0,n=this._boneTimelines;i<n.length;i++){n[i].playState=-1}for(var a=0,r=this._slotTimelines;a<r.length;a++){r[a].playState=-1}}},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"weight",{get:function(){return this._weight},set:function(t){if(this._weight!==t){this._weight=t;for(var e=0,i=this._boneTimelines;e<i.length;e++){i[e].dirty=!0}for(var n=0,a=this._boneBlendTimelines;n<a.length;n++){a[n].dirty=!0}for(var r=0,s=this._slotBlendTimelines;r<s.length;r++){s[r].dirty=!0}}},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"animationData",{get:function(){return this._animationData},enumerable:!0,configurable:!0}),n}(t.BaseObject);t.AnimationState=e;var i=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return __extends(e,t),e.toString=function(){return"[class dragonBones.BlendState]"},e.prototype._onClear=function(){this.reset(),this.target=null},e.prototype.update=function(t){var e=t.layer,i=t._weightResult;if(this.dirty>0){if(this.leftWeight>0){if(this.layer!==e){if(this.layerWeight>=this.leftWeight)return this.dirty++,this.layer=e,this.leftWeight=0,this.blendWeight=0,!1;this.layer=e,this.leftWeight-=this.layerWeight,this.layerWeight=0}return i*=this.leftWeight,this.dirty++,this.blendWeight=i,this.layerWeight+=this.blendWeight,!0}return!1}return this.dirty++,this.layer=e,this.leftWeight=1,this.blendWeight=i,this.layerWeight=i,!0},e.prototype.reset=function(){this.dirty=0,this.layer=0,this.leftWeight=0,this.layerWeight=0,this.blendWeight=0},e.BONE_TRANSFORM="boneTransform",e.BONE_ALPHA="boneAlpha",e.SURFACE="surface",e.SLOT_DEFORM="slotDeform",e.SLOT_ALPHA="slotAlpha",e.SLOT_Z_INDEX="slotZIndex",e}(t.BaseObject);t.BlendState=i}(dragonBones||(dragonBones={})),function(t){var e=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return __extends(e,t),e.prototype._onClear=function(){this.dirty=!1,this.playState=-1,this.currentPlayTimes=0,this.currentTime=-1,this.target=null,this._isTween=!1,this._valueOffset=0,this._frameValueOffset=0,this._frameOffset=0,this._frameRate=0,this._frameCount=0,this._frameIndex=-1,this._frameRateR=0,this._position=0,this._duration=0,this._timeScale=1,this._timeOffset=0,this._animationData=null,this._timelineData=null,this._armature=null,this._animationState=null,this._actionTimeline=null,this._frameArray=null,this._valueArray=null,this._timelineArray=null,this._frameIndices=null},e.prototype._setCurrentTime=function(t){var e=this.playState,i=this.currentPlayTimes,n=this.currentTime;if(null!==this._actionTimeline&&this._frameCount<=1)this.playState=this._actionTimeline.playState>=0?1:-1,this.currentPlayTimes=1,this.currentTime=this._actionTimeline.currentTime;else if(null===this._actionTimeline||1!==this._timeScale||0!==this._timeOffset){var a=this._animationState.playTimes,r=a*this._duration;t*=this._timeScale,0!==this._timeOffset&&(t+=this._timeOffset*this._animationData.duration),a>0&&(t>=r||t<=-r)?(this.playState<=0&&3===this._animationState._playheadState&&(this.playState=1),this.currentPlayTimes=a,this.currentTime=t<0?0:1===this.playState?this._duration+1e-6:this._duration):(0!==this.playState&&3===this._animationState._playheadState&&(this.playState=0),t<0?(t=-t,this.currentPlayTimes=Math.floor(t/this._duration),this.currentTime=this._duration-t%this._duration):(this.currentPlayTimes=Math.floor(t/this._duration),this.currentTime=t%this._duration)),this.currentTime+=this._position}else this.playState=this._actionTimeline.playState,this.currentPlayTimes=this._actionTimeline.currentPlayTimes,this.currentTime=this._actionTimeline.currentTime;return(this.currentPlayTimes!==i||this.currentTime!==n)&&((e<0&&this.playState!==e||this.playState<=0&&this.currentPlayTimes!==i)&&(this._frameIndex=-1),!0)},e.prototype.init=function(t,e,i){if(this._armature=t,this._animationState=e,this._timelineData=i,this._actionTimeline=this._animationState._actionTimeline,this===this._actionTimeline&&(this._actionTimeline=null),this._animationData=this._animationState.animationData,this._frameRate=this._animationData.parent.frameRate,this._frameRateR=1/this._frameRate,this._position=this._animationState._position,this._duration=this._animationState._duration,null!==this._timelineData){var n=this._animationData.parent.parent;this._frameArray=n.frameArray,this._timelineArray=n.timelineArray,this._frameIndices=n.frameIndices,this._frameCount=this._timelineArray[this._timelineData.offset+2],this._frameValueOffset=this._timelineArray[this._timelineData.offset+4],this._timeScale=100/this._timelineArray[this._timelineData.offset+0],this._timeOffset=.01*this._timelineArray[this._timelineData.offset+1]}},e.prototype.fadeOut=function(){this.dirty=!1},e.prototype.update=function(t){if(this._setCurrentTime(t)){if(this._frameCount>1){var e=Math.floor(this.currentTime*this._frameRate),i=this._frameIndices[this._timelineData.frameIndicesOffset+e];this._frameIndex!==i&&(this._frameIndex=i,this._frameOffset=this._animationData.frameOffset+this._timelineArray[this._timelineData.offset+5+this._frameIndex],this._onArriveAtFrame())}else this._frameIndex<0&&(this._frameIndex=0,null!==this._timelineData&&(this._frameOffset=this._animationData.frameOffset+this._timelineArray[this._timelineData.offset+5]),this._onArriveAtFrame());(this._isTween||this.dirty)&&this._onUpdateFrame()}},e.prototype.blend=function(t){},e}(t.BaseObject);t.TimelineState=e;var i=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return __extends(e,t),e._getEasingValue=function(t,e,i){var n=e;switch(t){case 3:n=Math.pow(e,2);break;case 4:n=1-Math.pow(1-e,2);break;case 5:n=.5*(1-Math.cos(e*Math.PI))}return(n-e)*i+e},e._getEasingCurveValue=function(t,e,i,n){if(t<=0)return 0;if(t>=1)return 1;var a=i>0,r=i+1,s=Math.floor(t*r),o=0,h=0;return a?(o=0===s?0:e[n+s-1],h=s===r-1?1e4:e[n+s]):(o=e[n+s-1],h=e[n+s]),1e-4*(o+(h-o)*(t*r-s))},e.prototype._onClear=function(){t.prototype._onClear.call(this),this._tweenType=0,this._curveCount=0,this._framePosition=0,this._frameDurationR=0,this._tweenEasing=0,this._tweenProgress=0,this._valueScale=1},e.prototype._onArriveAtFrame=function(){if(this._frameCount>1&&(this._frameIndex!==this._frameCount-1||0===this._animationState.playTimes||this._animationState.currentPlayTimes<this._animationState.playTimes-1))if(this._tweenType=this._frameArray[this._frameOffset+1],this._isTween=0!==this._tweenType,this._isTween?2===this._tweenType?this._curveCount=this._frameArray[this._frameOffset+2]:0!==this._tweenType&&1!==this._tweenType&&(this._tweenEasing=.01*this._frameArray[this._frameOffset+2]):this.dirty=!0,this._framePosition=this._frameArray[this._frameOffset]*this._frameRateR,this._frameIndex===this._frameCount-1)this._frameDurationR=1/(this._animationData.duration-this._framePosition);else{var t=this._animationData.frameOffset+this._timelineArray[this._timelineData.offset+5+this._frameIndex+1],e=this._frameArray[t]*this._frameRateR-this._framePosition;this._frameDurationR=e>0?1/e:0}else this.dirty=!0,this._isTween=!1},e.prototype._onUpdateFrame=function(){this._isTween&&(this.dirty=!0,this._tweenProgress=(this.currentTime-this._framePosition)*this._frameDurationR,2===this._tweenType?this._tweenProgress=e._getEasingCurveValue(this._tweenProgress,this._frameArray,this._curveCount,this._frameOffset+3):1!==this._tweenType&&(this._tweenProgress=e._getEasingValue(this._tweenType,this._tweenProgress,this._tweenEasing)))},e}(e);t.TweenTimelineState=i;var n=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return __extends(e,t),e.prototype._onClear=function(){t.prototype._onClear.call(this),this._current=0,this._difference=0,this._result=0},e.prototype._onArriveAtFrame=function(){if(t.prototype._onArriveAtFrame.call(this),null!==this._timelineData){var e=this._valueScale,i=this._valueArray,n=this._valueOffset+this._frameValueOffset+this._frameIndex;if(this._isTween){var a=this._frameIndex===this._frameCount-1?this._valueOffset+this._frameValueOffset:n+1;1===e?(this._current=i[n],this._difference=i[a]-this._current):(this._current=i[n]*e,this._difference=i[a]*e-this._current)}else this._result=i[n]*e}else this._result=0},e.prototype._onUpdateFrame=function(){t.prototype._onUpdateFrame.call(this),this._isTween&&(this._result=this._current+this._difference*this._tweenProgress)},e}(i);t.SingleValueTimelineState=n;var a=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return __extends(e,t),e.prototype._onClear=function(){t.prototype._onClear.call(this),this._currentA=0,this._currentB=0,this._differenceA=0,this._differenceB=0,this._resultA=0,this._resultB=0},e.prototype._onArriveAtFrame=function(){if(t.prototype._onArriveAtFrame.call(this),null!==this._timelineData){var e=this._valueScale,i=this._valueArray,n=this._valueOffset+this._frameValueOffset+2*this._frameIndex;if(this._isTween){var a=this._frameIndex===this._frameCount-1?this._valueOffset+this._frameValueOffset:n+2;1===e?(this._currentA=i[n],this._currentB=i[n+1],this._differenceA=i[a]-this._currentA,this._differenceB=i[a+1]-this._currentB):(this._currentA=i[n]*e,this._currentB=i[n+1]*e,this._differenceA=i[a]*e-this._currentA,this._differenceB=i[a+1]*e-this._currentB)}else this._resultA=i[n]*e,this._resultB=i[n+1]*e}else this._resultA=0,this._resultB=0},e.prototype._onUpdateFrame=function(){t.prototype._onUpdateFrame.call(this),this._isTween&&(this._resultA=this._currentA+this._differenceA*this._tweenProgress,this._resultB=this._currentB+this._differenceB*this._tweenProgress)},e}(i);t.DoubleValueTimelineState=a;var r=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e._rd=[],e}return __extends(e,t),e.prototype._onClear=function(){t.prototype._onClear.call(this),this._valueCount=0,this._rd.length=0},e.prototype._onArriveAtFrame=function(){t.prototype._onArriveAtFrame.call(this);var e=this._valueCount,i=this._rd;if(null!==this._timelineData){var n=this._valueScale,a=this._valueArray,r=this._valueOffset+this._frameValueOffset+this._frameIndex*e;if(this._isTween){var s=this._frameIndex===this._frameCount-1?this._valueOffset+this._frameValueOffset:r+e;if(1===n)for(var o=0;o<e;++o)i[e+o]=a[s+o]-a[r+o];else for(o=0;o<e;++o)i[e+o]=(a[s+o]-a[r+o])*n}else if(1===n)for(o=0;o<e;++o)i[o]=a[r+o];else for(o=0;o<e;++o)i[o]=a[r+o]*n}else for(o=0;o<e;++o)i[o]=0},e.prototype._onUpdateFrame=function(){if(t.prototype._onUpdateFrame.call(this),this._isTween){var e=this._valueCount,i=this._valueScale,n=this._tweenProgress,a=this._valueArray,r=this._rd,s=this._valueOffset+this._frameValueOffset+this._frameIndex*e;if(1===i)for(var o=0;o<e;++o)r[o]=a[s+o]+r[e+o]*n;else for(o=0;o<e;++o)r[o]=a[s+o]*i+r[e+o]*n}},e}(i);t.MutilpleValueTimelineState=r}(dragonBones||(dragonBones={})),function(t){var e=function(e){function i(){return null!==e&&e.apply(this,arguments)||this}return __extends(i,e),i.toString=function(){return"[class dragonBones.ActionTimelineState]"},i.prototype._onCrossFrame=function(e){var i=this._armature.eventDispatcher;if(this._animationState.actionEnabled)for(var n=this._animationData.frameOffset+this._timelineArray[this._timelineData.offset+5+e],a=this._frameArray[n+1],r=this._animationData.parent.actions,s=0;s<a;++s){var o=r[this._frameArray[n+2+s]];if(0===o.type){(h=t.BaseObject.borrowObject(t.EventObject)).time=this._frameArray[n]/this._frameRate,h.animationState=this._animationState,t.EventObject.actionDataToInstance(o,h,this._armature),this._armature._bufferAction(h,!0)}else{var h,l=10===o.type?t.EventObject.FRAME_EVENT:t.EventObject.SOUND_EVENT;if(11===o.type||i.hasDBEventListener(l))(h=t.BaseObject.borrowObject(t.EventObject)).time=this._frameArray[n]/this._frameRate,h.animationState=this._animationState,t.EventObject.actionDataToInstance(o,h,this._armature),this._armature._dragonBones.bufferEvent(h)}}},i.prototype._onArriveAtFrame=function(){},i.prototype._onUpdateFrame=function(){},i.prototype.update=function(e){var i=this.playState,n=this.currentPlayTimes,a=this.currentTime;if(this._setCurrentTime(e)){var r=null===this._animationState._parent&&this._animationState.actionEnabled,s=this._armature.eventDispatcher;if(i<0){if(this.playState===i)return;if(this._animationState.displayControl&&this._animationState.resetToPose&&this._armature._sortZOrder(null,0),r&&s.hasDBEventListener(t.EventObject.START)){var o=t.BaseObject.borrowObject(t.EventObject);o.type=t.EventObject.START,o.armature=this._armature,o.animationState=this._animationState,this._armature._dragonBones.bufferEvent(o)}}var h=this._animationState.timeScale<0,l=null,u=null;if(r&&this.currentPlayTimes!==n&&(s.hasDBEventListener(t.EventObject.LOOP_COMPLETE)&&((l=t.BaseObject.borrowObject(t.EventObject)).type=t.EventObject.LOOP_COMPLETE,l.armature=this._armature,l.animationState=this._animationState),this.playState>0&&s.hasDBEventListener(t.EventObject.COMPLETE)&&((u=t.BaseObject.borrowObject(t.EventObject)).type=t.EventObject.COMPLETE,u.armature=this._armature,u.animationState=this._animationState)),this._frameCount>1){var p=this._timelineData,c=Math.floor(this.currentTime*this._frameRate),d=this._frameIndices[p.frameIndicesOffset+c];if(this._frameIndex!==d){var _=this._frameIndex;if(this._frameIndex=d,null!==this._timelineArray)if(this._frameOffset=this._animationData.frameOffset+this._timelineArray[p.offset+5+this._frameIndex],h){if(_<0){var f=Math.floor(a*this._frameRate);_=this._frameIndices[p.frameIndicesOffset+f],this.currentPlayTimes===n&&_===d&&(_=-1)}for(;_>=0;){var m=this._animationData.frameOffset+this._timelineArray[p.offset+5+_],g=this._frameArray[m]/this._frameRate;if(this._position<=g&&g<=this._position+this._duration&&this._onCrossFrame(_),null!==l&&0===_&&(this._armature._dragonBones.bufferEvent(l),l=null),_>0?_--:_=this._frameCount-1,_===d)break}}else{if(_<0){f=Math.floor(a*this._frameRate);_=this._frameIndices[p.frameIndicesOffset+f];m=this._animationData.frameOffset+this._timelineArray[p.offset+5+_],g=this._frameArray[m]/this._frameRate;this.currentPlayTimes===n&&(a<=g?_>0?_--:_=this._frameCount-1:_===d&&(_=-1))}for(;_>=0;){_<this._frameCount-1?_++:_=0;m=this._animationData.frameOffset+this._timelineArray[p.offset+5+_],g=this._frameArray[m]/this._frameRate;if(this._position<=g&&g<=this._position+this._duration&&this._onCrossFrame(_),null!==l&&0===_&&(this._armature._dragonBones.bufferEvent(l),l=null),_===d)break}}}}else if(this._frameIndex<0&&(this._frameIndex=0,null!==this._timelineData)){this._frameOffset=this._animationData.frameOffset+this._timelineArray[this._timelineData.offset+5];g=this._frameArray[this._frameOffset]/this._frameRate;this.currentPlayTimes===n?a<=g&&this._onCrossFrame(this._frameIndex):this._position<=g&&(h||null===l||(this._armature._dragonBones.bufferEvent(l),l=null),this._onCrossFrame(this._frameIndex))}null!==l&&this._armature._dragonBones.bufferEvent(l),null!==u&&this._armature._dragonBones.bufferEvent(u)}},i.prototype.setCurrentTime=function(t){this._setCurrentTime(t),this._frameIndex=-1},i}(t.TimelineState);t.ActionTimelineState=e;var i=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return __extends(e,t),e.toString=function(){return"[class dragonBones.ZOrderTimelineState]"},e.prototype._onArriveAtFrame=function(){this.playState>=0&&(this._frameArray[this._frameOffset+1]>0?this._armature._sortZOrder(this._frameArray,this._frameOffset+2):this._armature._sortZOrder(null,0))},e.prototype._onUpdateFrame=function(){},e}(t.TimelineState);t.ZOrderTimelineState=i;var n=function(e){function i(){return null!==e&&e.apply(this,arguments)||this}return __extends(i,e),i.toString=function(){return"[class dragonBones.BoneAllTimelineState]"},i.prototype._onArriveAtFrame=function(){e.prototype._onArriveAtFrame.call(this),this._isTween&&this._frameIndex===this._frameCount-1&&(this._rd[2]=t.Transform.normalizeRadian(this._rd[2]),this._rd[3]=t.Transform.normalizeRadian(this._rd[3])),null===this._timelineData&&(this._rd[4]=1,this._rd[5]=1)},i.prototype.init=function(t,i,n){e.prototype.init.call(this,t,i,n),this._valueOffset=this._animationData.frameFloatOffset,this._valueCount=6,this._valueArray=this._animationData.parent.parent.frameFloatArray},i.prototype.fadeOut=function(){this.dirty=!1,this._rd[2]=t.Transform.normalizeRadian(this._rd[2]),this._rd[3]=t.Transform.normalizeRadian(this._rd[3])},i.prototype.blend=function(t){var e=this._armature.armatureData.scale,i=this._rd,n=this.target,a=n.target,r=n.blendWeight,s=a.animationPose;n.dirty>1?(s.x+=i[0]*r*e,s.y+=i[1]*r*e,s.rotation+=i[2]*r,s.skew+=i[3]*r,s.scaleX+=(i[4]-1)*r,s.scaleY+=(i[5]-1)*r):(s.x=i[0]*r*e,s.y=i[1]*r*e,s.rotation=i[2]*r,s.skew=i[3]*r,s.scaleX=(i[4]-1)*r+1,s.scaleY=(i[5]-1)*r+1),(t||this.dirty)&&(this.dirty=!1,a._transformDirty=!0)},i}(t.MutilpleValueTimelineState);t.BoneAllTimelineState=n;var a=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return __extends(e,t),e.toString=function(){return"[class dragonBones.BoneTranslateTimelineState]"},e.prototype.init=function(e,i,n){t.prototype.init.call(this,e,i,n),this._valueOffset=this._animationData.frameFloatOffset,this._valueScale=this._armature.armatureData.scale,this._valueArray=this._animationData.parent.parent.frameFloatArray},e.prototype.blend=function(t){var e=this.target,i=e.target,n=e.blendWeight,a=i.animationPose;e.dirty>1?(a.x+=this._resultA*n,a.y+=this._resultB*n):1!==n?(a.x=this._resultA*n,a.y=this._resultB*n):(a.x=this._resultA,a.y=this._resultB),(t||this.dirty)&&(this.dirty=!1,i._transformDirty=!0)},e}(t.DoubleValueTimelineState);t.BoneTranslateTimelineState=a;var r=function(e){function i(){return null!==e&&e.apply(this,arguments)||this}return __extends(i,e),i.toString=function(){return"[class dragonBones.BoneRotateTimelineState]"},i.prototype._onArriveAtFrame=function(){e.prototype._onArriveAtFrame.call(this),this._isTween&&this._frameIndex===this._frameCount-1&&(this._differenceA=t.Transform.normalizeRadian(this._differenceA),this._differenceB=t.Transform.normalizeRadian(this._differenceB))},i.prototype.init=function(t,i,n){e.prototype.init.call(this,t,i,n),this._valueOffset=this._animationData.frameFloatOffset,this._valueArray=this._animationData.parent.parent.frameFloatArray},i.prototype.fadeOut=function(){this.dirty=!1,this._resultA=t.Transform.normalizeRadian(this._resultA),this._resultB=t.Transform.normalizeRadian(this._resultB)},i.prototype.blend=function(t){var e=this.target,i=e.target,n=e.blendWeight,a=i.animationPose;e.dirty>1?(a.rotation+=this._resultA*n,a.skew+=this._resultB*n):1!==n?(a.rotation=this._resultA*n,a.skew=this._resultB*n):(a.rotation=this._resultA,a.skew=this._resultB),(t||this.dirty)&&(this.dirty=!1,i._transformDirty=!0)},i}(t.DoubleValueTimelineState);t.BoneRotateTimelineState=r;var s=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return __extends(e,t),e.toString=function(){return"[class dragonBones.BoneScaleTimelineState]"},e.prototype._onArriveAtFrame=function(){t.prototype._onArriveAtFrame.call(this),null===this._timelineData&&(this._resultA=1,this._resultB=1)},e.prototype.init=function(e,i,n){t.prototype.init.call(this,e,i,n),this._valueOffset=this._animationData.frameFloatOffset,this._valueArray=this._animationData.parent.parent.frameFloatArray},e.prototype.blend=function(t){var e=this.target,i=e.target,n=e.blendWeight,a=i.animationPose;e.dirty>1?(a.scaleX+=(this._resultA-1)*n,a.scaleY+=(this._resultB-1)*n):1!==n?(a.scaleX=(this._resultA-1)*n+1,a.scaleY=(this._resultB-1)*n+1):(a.scaleX=this._resultA,a.scaleY=this._resultB),(t||this.dirty)&&(this.dirty=!1,i._transformDirty=!0)},e}(t.DoubleValueTimelineState);t.BoneScaleTimelineState=s;var o=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return __extends(e,t),e.toString=function(){return"[class dragonBones.SurfaceTimelineState]"},e.prototype._onClear=function(){t.prototype._onClear.call(this),this._deformCount=0,this._deformOffset=0,this._sameValueOffset=0},e.prototype.init=function(e,i,n){if(t.prototype.init.call(this,e,i,n),null!==this._timelineData){var a=this._animationData.parent.parent,r=a.frameIntArray,s=this._animationData.frameIntOffset+this._timelineArray[this._timelineData.offset+3];this._valueOffset=this._animationData.frameFloatOffset,this._valueCount=r[s+2],this._deformCount=r[s+1],this._deformOffset=r[s+3],this._sameValueOffset=r[s+4]+this._animationData.frameFloatOffset,this._valueScale=this._armature.armatureData.scale,this._valueArray=a.frameFloatArray,this._rd.length=2*this._valueCount}else this._deformCount=this.target.target._deformVertices.length},e.prototype.blend=function(t){var e=this.target,i=e.target,n=e.blendWeight,a=i._deformVertices,r=this._valueArray;if(null!==r)for(var s=this._valueCount,o=this._deformOffset,h=this._sameValueOffset,l=this._rd,u=0;u<this._deformCount;++u){var p=0;p=u<o?r[h+u]:u<o+s?l[u-o]:r[h+u-s],e.dirty>1?a[u]+=p*n:a[u]=p*n}else if(1===e.dirty)for(u=0;u<this._deformCount;++u)a[u]=0;(t||this.dirty)&&(this.dirty=!1,i._transformDirty=!0)},e}(t.MutilpleValueTimelineState);t.SurfaceTimelineState=o;var h=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return __extends(e,t),e.toString=function(){return"[class dragonBones.AlphaTimelineState]"},e.prototype._onArriveAtFrame=function(){t.prototype._onArriveAtFrame.call(this),null===this._timelineData&&(this._result=1)},e.prototype.init=function(e,i,n){t.prototype.init.call(this,e,i,n),this._valueOffset=this._animationData.frameIntOffset,this._valueScale=.01,this._valueArray=this._animationData.parent.parent.frameIntArray},e.prototype.blend=function(t){var e=this.target,i=e.target,n=e.blendWeight;e.dirty>1?(i._alpha+=this._result*n,i._alpha>1&&(i._alpha=1)):i._alpha=this._result*n,(t||this.dirty)&&(this.dirty=!1,this._armature._alphaDirty=!0)},e}(t.SingleValueTimelineState);t.AlphaTimelineState=h;var l=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return __extends(e,t),e.toString=function(){return"[class dragonBones.SlotDisplayTimelineState]"},e.prototype._onArriveAtFrame=function(){if(this.playState>=0){var t=this.target,e=null!==this._timelineData?this._frameArray[this._frameOffset+1]:t._slotData.displayIndex;t.displayIndex!==e&&t._setDisplayIndex(e,!0)}},e.prototype._onUpdateFrame=function(){},e}(t.TimelineState);t.SlotDisplayTimelineState=l;var u=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e._current=[0,0,0,0,0,0,0,0],e._difference=[0,0,0,0,0,0,0,0],e._result=[0,0,0,0,0,0,0,0],e}return __extends(e,t),e.toString=function(){return"[class dragonBones.SlotColorTimelineState]"},e.prototype._onArriveAtFrame=function(){if(t.prototype._onArriveAtFrame.call(this),null!==this._timelineData){var e=this._animationData.parent.parent,i=e.colorArray,n=e.frameIntArray,a=this._animationData.frameIntOffset+this._frameValueOffset+this._frameIndex,r=n[a];r<0&&(r+=65536),this._isTween?(this._current[0]=i[r++],this._current[1]=i[r++],this._current[2]=i[r++],this._current[3]=i[r++],this._current[4]=i[r++],this._current[5]=i[r++],this._current[6]=i[r++],this._current[7]=i[r++],(r=this._frameIndex===this._frameCount-1?n[this._animationData.frameIntOffset+this._frameValueOffset]:n[a+1])<0&&(r+=65536),this._difference[0]=i[r++]-this._current[0],this._difference[1]=i[r++]-this._current[1],this._difference[2]=i[r++]-this._current[2],this._difference[3]=i[r++]-this._current[3],this._difference[4]=i[r++]-this._current[4],this._difference[5]=i[r++]-this._current[5],this._difference[6]=i[r++]-this._current[6],this._difference[7]=i[r++]-this._current[7]):(this._result[0]=.01*i[r++],this._result[1]=.01*i[r++],this._result[2]=.01*i[r++],this._result[3]=.01*i[r++],this._result[4]=i[r++],this._result[5]=i[r++],this._result[6]=i[r++],this._result[7]=i[r++])}else{var s=this.target.slotData.color;this._result[0]=s.alphaMultiplier,this._result[1]=s.redMultiplier,this._result[2]=s.greenMultiplier,this._result[3]=s.blueMultiplier,this._result[4]=s.alphaOffset,this._result[5]=s.redOffset,this._result[6]=s.greenOffset,this._result[7]=s.blueOffset}},e.prototype._onUpdateFrame=function(){t.prototype._onUpdateFrame.call(this),this._isTween&&(this._result[0]=.01*(this._current[0]+this._difference[0]*this._tweenProgress),this._result[1]=.01*(this._current[1]+this._difference[1]*this._tweenProgress),this._result[2]=.01*(this._current[2]+this._difference[2]*this._tweenProgress),this._result[3]=.01*(this._current[3]+this._difference[3]*this._tweenProgress),this._result[4]=this._current[4]+this._difference[4]*this._tweenProgress,this._result[5]=this._current[5]+this._difference[5]*this._tweenProgress,this._result[6]=this._current[6]+this._difference[6]*this._tweenProgress,this._result[7]=this._current[7]+this._difference[7]*this._tweenProgress)},e.prototype.fadeOut=function(){this._isTween=!1},e.prototype.update=function(e){if(t.prototype.update.call(this,e),this._isTween||this.dirty){var i=this.target,n=i._colorTransform;if(0!==this._animationState._fadeState||0!==this._animationState._subFadeState){if(n.alphaMultiplier!==this._result[0]||n.redMultiplier!==this._result[1]||n.greenMultiplier!==this._result[2]||n.blueMultiplier!==this._result[3]||n.alphaOffset!==this._result[4]||n.redOffset!==this._result[5]||n.greenOffset!==this._result[6]||n.blueOffset!==this._result[7]){var a=Math.pow(this._animationState._fadeProgress,4);n.alphaMultiplier+=(this._result[0]-n.alphaMultiplier)*a,n.redMultiplier+=(this._result[1]-n.redMultiplier)*a,n.greenMultiplier+=(this._result[2]-n.greenMultiplier)*a,n.blueMultiplier+=(this._result[3]-n.blueMultiplier)*a,n.alphaOffset+=(this._result[4]-n.alphaOffset)*a,n.redOffset+=(this._result[5]-n.redOffset)*a,n.greenOffset+=(this._result[6]-n.greenOffset)*a,n.blueOffset+=(this._result[7]-n.blueOffset)*a,i._colorDirty=!0}}else this.dirty&&(this.dirty=!1,n.alphaMultiplier===this._result[0]&&n.redMultiplier===this._result[1]&&n.greenMultiplier===this._result[2]&&n.blueMultiplier===this._result[3]&&n.alphaOffset===this._result[4]&&n.redOffset===this._result[5]&&n.greenOffset===this._result[6]&&n.blueOffset===this._result[7]||(n.alphaMultiplier=this._result[0],n.redMultiplier=this._result[1],n.greenMultiplier=this._result[2],n.blueMultiplier=this._result[3],n.alphaOffset=this._result[4],n.redOffset=this._result[5],n.greenOffset=this._result[6],n.blueOffset=this._result[7],i._colorDirty=!0))}},e}(t.TweenTimelineState);t.SlotColorTimelineState=u;var p=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return __extends(e,t),e.toString=function(){return"[class dragonBones.SlotZIndexTimelineState]"},e.prototype._onArriveAtFrame=function(){if(t.prototype._onArriveAtFrame.call(this),null===this._timelineData){var e=this.target.target;this._result=e.slotData.zIndex}},e.prototype.init=function(e,i,n){t.prototype.init.call(this,e,i,n),this._valueOffset=this._animationData.frameIntOffset,this._valueArray=this._animationData.parent.parent.frameIntArray},e.prototype.blend=function(t){var e=this.target,i=e.target,n=e.blendWeight;e.dirty>1?i._zIndex+=this._result*n:i._zIndex=this._result*n,(t||this.dirty)&&(this.dirty=!1,this._armature._zIndexDirty=!0)},e}(t.SingleValueTimelineState);t.SlotZIndexTimelineState=p;var c=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return __extends(e,t),e.toString=function(){return"[class dragonBones.DeformTimelineState]"},e.prototype._onClear=function(){t.prototype._onClear.call(this),this.geometryOffset=0,this.displayFrame=null,this._deformCount=0,this._deformOffset=0,this._sameValueOffset=0},e.prototype.init=function(e,i,n){if(t.prototype.init.call(this,e,i,n),null!==this._timelineData){var a=this._animationData.frameIntOffset+this._timelineArray[this._timelineData.offset+3],r=this._animationData.parent.parent,s=r.frameIntArray,o=this.target.target;this.geometryOffset=s[a+0],this.geometryOffset<0&&(this.geometryOffset+=65536);for(var h=0,l=o.displayFrameCount;h<l;++h){var u=o.getDisplayFrameAt(h),p=u.getGeometryData();if(null!==p&&p.offset===this.geometryOffset){this.displayFrame=u,this.displayFrame.updateDeformVertices();break}}if(null===this.displayFrame)return void this.returnToPool();this._valueOffset=this._animationData.frameFloatOffset,this._valueCount=s[a+2],this._deformCount=s[a+1],this._deformOffset=s[a+3],this._sameValueOffset=s[a+4]+this._animationData.frameFloatOffset,this._valueScale=this._armature.armatureData.scale,this._valueArray=r.frameFloatArray,this._rd.length=2*this._valueCount}else this._deformCount=this.displayFrame.deformVertices.length},e.prototype.blend=function(t){var e=this.target,i=e.target,n=e.blendWeight,a=this.displayFrame.deformVertices,r=this._valueArray;if(null!==r)for(var s=this._valueCount,o=this._deformOffset,h=this._sameValueOffset,l=this._rd,u=0;u<this._deformCount;++u){var p=0;p=u<o?r[h+u]:u<o+s?l[u-o]:r[h+u-s],e.dirty>1?a[u]+=p*n:a[u]=p*n}else if(1===e.dirty)for(u=0;u<this._deformCount;++u)a[u]=0;(t||this.dirty)&&(this.dirty=!1,i._geometryData===this.displayFrame.getGeometryData()&&(i._verticesDirty=!0))},e}(t.MutilpleValueTimelineState);t.DeformTimelineState=c;var d=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return __extends(e,t),e.toString=function(){return"[class dragonBones.IKConstraintTimelineState]"},e.prototype._onUpdateFrame=function(){t.prototype._onUpdateFrame.call(this);var e=this.target;if(null!==this._timelineData)e._bendPositive=this._currentA>0,e._weight=this._currentB;else{var i=e._constraintData;e._bendPositive=i.bendPositive,e._weight=i.weight}e.invalidUpdate(),this.dirty=!1},e.prototype.init=function(e,i,n){t.prototype.init.call(this,e,i,n),this._valueOffset=this._animationData.frameIntOffset,this._valueScale=.01,this._valueArray=this._animationData.parent.parent.frameIntArray},e}(t.DoubleValueTimelineState);t.IKConstraintTimelineState=d;var _=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return __extends(e,t),e.toString=function(){return"[class dragonBones.AnimationProgressTimelineState]"},e.prototype._onUpdateFrame=function(){t.prototype._onUpdateFrame.call(this);var e=this.target;null!==e._parent&&(e.currentTime=this._result*e.totalTime),this.dirty=!1},e.prototype.init=function(e,i,n){t.prototype.init.call(this,e,i,n),this._valueOffset=this._animationData.frameIntOffset,this._valueScale=1e-4,this._valueArray=this._animationData.parent.parent.frameIntArray},e}(t.SingleValueTimelineState);t.AnimationProgressTimelineState=_;var f=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return __extends(e,t),e.toString=function(){return"[class dragonBones.AnimationWeightTimelineState]"},e.prototype._onUpdateFrame=function(){t.prototype._onUpdateFrame.call(this);var e=this.target;null!==e._parent&&(e.weight=this._result),this.dirty=!1},e.prototype.init=function(e,i,n){t.prototype.init.call(this,e,i,n),this._valueOffset=this._animationData.frameIntOffset,this._valueScale=1e-4,this._valueArray=this._animationData.parent.parent.frameIntArray},e}(t.SingleValueTimelineState);t.AnimationWeightTimelineState=f;var m=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return __extends(e,t),e.toString=function(){return"[class dragonBones.AnimationParametersTimelineState]"},e.prototype._onUpdateFrame=function(){t.prototype._onUpdateFrame.call(this);var e=this.target;null!==e._parent&&(e.parameterX=this._resultA,e.parameterY=this._resultB),this.dirty=!1},e.prototype.init=function(e,i,n){t.prototype.init.call(this,e,i,n),this._valueOffset=this._animationData.frameIntOffset,this._valueScale=1e-4,this._valueArray=this._animationData.parent.parent.frameIntArray},e}(t.DoubleValueTimelineState);t.AnimationParametersTimelineState=m}(dragonBones||(dragonBones={})),function(t){var e=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return __extends(e,t),e.actionDataToInstance=function(t,i,n){0===t.type?i.type=e.FRAME_EVENT:i.type=10===t.type?e.FRAME_EVENT:e.SOUND_EVENT,i.name=t.name,i.armature=n,i.actionData=t,i.data=t.data,null!==t.bone&&(i.bone=n.getBone(t.bone.name)),null!==t.slot&&(i.slot=n.getSlot(t.slot.name))},e.toString=function(){return"[class dragonBones.EventObject]"},e.prototype._onClear=function(){this.time=0,this.type="",this.name="",this.armature=null,this.bone=null,this.slot=null,this.animationState=null,this.actionData=null,this.data=null},e.START="start",e.LOOP_COMPLETE="loopComplete",e.COMPLETE="complete",e.FADE_IN="fadeIn",e.FADE_IN_COMPLETE="fadeInComplete",e.FADE_OUT="fadeOut",e.FADE_OUT_COMPLETE="fadeOutComplete",e.FRAME_EVENT="frameEvent",e.SOUND_EVENT="soundEvent",e}(t.BaseObject);t.EventObject=e}(dragonBones||(dragonBones={})),function(t){var e=function(){function t(){}return t._getArmatureType=function(t){switch(t.toLowerCase()){case"stage":return 2;case"armature":return 0;case"movieclip":return 1;default:return 0}},t._getBoneType=function(t){switch(t.toLowerCase()){case"bone":return 0;case"surface":return 1;default:return 0}},t._getPositionMode=function(t){switch(t.toLocaleLowerCase()){case"percent":return 1;case"fixed":return 0;default:return 1}},t._getSpacingMode=function(t){switch(t.toLocaleLowerCase()){case"length":return 0;case"percent":return 2;case"fixed":return 1;default:return 0}},t._getRotateMode=function(t){switch(t.toLocaleLowerCase()){case"tangent":return 0;case"chain":return 1;case"chainscale":return 2;default:return 0}},t._getDisplayType=function(t){switch(t.toLowerCase()){case"image":return 0;case"mesh":return 2;case"armature":return 1;case"boundingbox":return 3;case"path":return 4;default:return 0}},t._getBoundingBoxType=function(t){switch(t.toLowerCase()){case"rectangle":return 0;case"ellipse":return 1;case"polygon":return 2;default:return 0}},t._getBlendMode=function(t){switch(t.toLowerCase()){case"normal":return 0;case"add":return 1;case"alpha":return 2;case"darken":return 3;case"difference":return 4;case"erase":return 5;case"hardlight":return 6;case"invert":return 7;case"layer":return 8;case"lighten":return 9;case"multiply":return 10;case"overlay":return 11;case"screen":return 12;case"subtract":return 13;default:return 0}},t._getAnimationBlendType=function(t){switch(t.toLowerCase()){case"none":return 0;case"1d":return 1;default:return 0}},t._getActionType=function(t){switch(t.toLowerCase()){case"play":return 0;case"frame":return 10;case"sound":return 11;default:return 0}},t.DATA_VERSION_2_3="2.3",t.DATA_VERSION_3_0="3.0",t.DATA_VERSION_4_0="4.0",t.DATA_VERSION_4_5="4.5",t.DATA_VERSION_5_0="5.0",t.DATA_VERSION_5_5="5.5",t.DATA_VERSION_5_6="5.6",t.DATA_VERSION=t.DATA_VERSION_5_6,t.DATA_VERSIONS=[t.DATA_VERSION_4_0,t.DATA_VERSION_4_5,t.DATA_VERSION_5_0,t.DATA_VERSION_5_5,t.DATA_VERSION_5_6],t.TEXTURE_ATLAS="textureAtlas",t.SUB_TEXTURE="SubTexture",t.FORMAT="format",t.IMAGE_PATH="imagePath",t.WIDTH="width",t.HEIGHT="height",t.ROTATED="rotated",t.FRAME_X="frameX",t.FRAME_Y="frameY",t.FRAME_WIDTH="frameWidth",t.FRAME_HEIGHT="frameHeight",t.DRADON_BONES="dragonBones",t.USER_DATA="userData",t.ARMATURE="armature",t.CANVAS="canvas",t.BONE="bone",t.SURFACE="surface",t.SLOT="slot",t.CONSTRAINT="constraint",t.SKIN="skin",t.DISPLAY="display",t.FRAME="frame",t.IK="ik",t.PATH_CONSTRAINT="path",t.ANIMATION="animation",t.TIMELINE="timeline",t.FFD="ffd",t.TRANSLATE_FRAME="translateFrame",t.ROTATE_FRAME="rotateFrame",t.SCALE_FRAME="scaleFrame",t.DISPLAY_FRAME="displayFrame",t.COLOR_FRAME="colorFrame",t.DEFAULT_ACTIONS="defaultActions",t.ACTIONS="actions",t.EVENTS="events",t.INTS="ints",t.FLOATS="floats",t.STRINGS="strings",t.TRANSFORM="transform",t.PIVOT="pivot",t.AABB="aabb",t.COLOR="color",t.VERSION="version",t.COMPATIBLE_VERSION="compatibleVersion",t.FRAME_RATE="frameRate",t.TYPE="type",t.SUB_TYPE="subType",t.NAME="name",t.PARENT="parent",t.TARGET="target",t.STAGE="stage",t.SHARE="share",t.PATH="path",t.LENGTH="length",t.DISPLAY_INDEX="displayIndex",t.Z_ORDER="zOrder",t.Z_INDEX="zIndex",t.BLEND_MODE="blendMode",t.INHERIT_TRANSLATION="inheritTranslation",t.INHERIT_ROTATION="inheritRotation",t.INHERIT_SCALE="inheritScale",t.INHERIT_REFLECTION="inheritReflection",t.INHERIT_ANIMATION="inheritAnimation",t.INHERIT_DEFORM="inheritDeform",t.SEGMENT_X="segmentX",t.SEGMENT_Y="segmentY",t.BEND_POSITIVE="bendPositive",t.CHAIN="chain",t.WEIGHT="weight",t.BLEND_TYPE="blendType",t.FADE_IN_TIME="fadeInTime",t.PLAY_TIMES="playTimes",t.SCALE="scale",t.OFFSET="offset",t.POSITION="position",t.DURATION="duration",t.TWEEN_EASING="tweenEasing",t.TWEEN_ROTATE="tweenRotate",t.TWEEN_SCALE="tweenScale",t.CLOCK_WISE="clockwise",t.CURVE="curve",t.SOUND="sound",t.EVENT="event",t.ACTION="action",t.X="x",t.Y="y",t.SKEW_X="skX",t.SKEW_Y="skY",t.SCALE_X="scX",t.SCALE_Y="scY",t.VALUE="value",t.ROTATE="rotate",t.SKEW="skew",t.ALPHA="alpha",t.ALPHA_OFFSET="aO",t.RED_OFFSET="rO",t.GREEN_OFFSET="gO",t.BLUE_OFFSET="bO",t.ALPHA_MULTIPLIER="aM",t.RED_MULTIPLIER="rM",t.GREEN_MULTIPLIER="gM",t.BLUE_MULTIPLIER="bM",t.UVS="uvs",t.VERTICES="vertices",t.TRIANGLES="triangles",t.WEIGHTS="weights",t.SLOT_POSE="slotPose",t.BONE_POSE="bonePose",t.BONES="bones",t.POSITION_MODE="positionMode",t.SPACING_MODE="spacingMode",t.ROTATE_MODE="rotateMode",t.SPACING="spacing",t.ROTATE_OFFSET="rotateOffset",t.ROTATE_MIX="rotateMix",t.TRANSLATE_MIX="translateMix",t.TARGET_DISPLAY="targetDisplay",t.CLOSED="closed",t.CONSTANT_SPEED="constantSpeed",t.VERTEX_COUNT="vertexCount",t.LENGTHS="lengths",t.GOTO_AND_PLAY="gotoAndPlay",t.DEFAULT_NAME="default",t}();t.DataParser=e}(dragonBones||(dragonBones={})),function(t){var e=function(e){function n(){var i=null!==e&&e.apply(this,arguments)||this;return i._rawTextureAtlasIndex=0,i._rawBones=[],i._data=null,i._armature=null,i._bone=null,i._geometry=null,i._slot=null,i._skin=null,i._mesh=null,i._animation=null,i._timeline=null,i._rawTextureAtlases=null,i._frameValueType=0,i._defaultColorOffset=-1,i._prevClockwise=0,i._prevRotation=0,i._frameDefaultValue=0,i._frameValueScale=1,i._helpMatrixA=new t.Matrix,i._helpMatrixB=new t.Matrix,i._helpTransform=new t.Transform,i._helpColorTransform=new t.ColorTransform,i._helpPoint=new t.Point,i._helpArray=[],i._intArray=[],i._floatArray=[],i._frameIntArray=[],i._frameFloatArray=[],i._frameArray=[],i._timelineArray=[],i._colorArray=[],i._cacheRawMeshes=[],i._cacheMeshes=[],i._actionFrames=[],i._weightSlotPose={},i._weightBonePoses={},i._cacheBones={},i._slotChildActions={},i}return __extends(n,e),n._getBoolean=function(t,e,i){if(e in t){var n=t[e],a=typeof n;if("boolean"===a)return n;if("string"!==a)return!!n;switch(n){case"0":case"NaN":case"":case"false":case"null":case"undefined":return!1;default:return!0}}return i},n._getNumber=function(t,e,i){if(e in t){var n=t[e];return null===n||"NaN"===n?i:+n||0}return i},n._getString=function(t,e,i){if(e in t){var n=t[e];return"string"===typeof n?n:String(n)}return i},n.prototype._getCurvePoint=function(t,e,i,n,a,r,s,o,h,l){var u=1-h,p=u*u,c=h*h,d=u*p,_=3*h*p,f=3*u*c,m=h*c;l.x=d*t+_*i+f*a+m*s,l.y=d*e+_*n+f*r+m*o},n.prototype._samplingEasingCurve=function(t,e){var i=t.length;if(i%3==1){for(var n=-2,a=0,r=e.length;a<r;++a){for(var s=(a+1)/(r+1);(n+6<i?t[n+6]:1)<s;)n+=6;for(var o=n>=0&&n+6<i,h=o?t[n]:0,l=o?t[n+1]:0,u=t[n+2],p=t[n+3],c=t[n+4],d=t[n+5],_=o?t[n+6]:1,f=o?t[n+7]:1,m=0,g=1;g-m>1e-4;){var y=.5*(g+m);this._getCurvePoint(h,l,u,p,c,d,_,f,y,this._helpPoint),s-this._helpPoint.x>0?m=y:g=y}e[a]=this._helpPoint.y}return!0}for(n=0,a=0,r=e.length;a<r;++a){for(s=(a+1)/(r+1);t[n+6]<s;)n+=6;for(h=t[n],l=t[n+1],u=t[n+2],p=t[n+3],c=t[n+4],d=t[n+5],_=t[n+6],f=t[n+7],m=0,g=1;g-m>1e-4;){y=.5*(g+m);this._getCurvePoint(h,l,u,p,c,d,_,f,y,this._helpPoint),s-this._helpPoint.x>0?m=y:g=y}e[a]=this._helpPoint.y}return!1},n.prototype._parseActionDataInFrame=function(e,i,n,a){t.DataParser.EVENT in e&&this._mergeActionFrame(e[t.DataParser.EVENT],i,10,n,a),t.DataParser.SOUND in e&&this._mergeActionFrame(e[t.DataParser.SOUND],i,11,n,a),t.DataParser.ACTION in e&&this._mergeActionFrame(e[t.DataParser.ACTION],i,0,n,a),t.DataParser.EVENTS in e&&this._mergeActionFrame(e[t.DataParser.EVENTS],i,10,n,a),t.DataParser.ACTIONS in e&&this._mergeActionFrame(e[t.DataParser.ACTIONS],i,0,n,a)},n.prototype._mergeActionFrame=function(t,e,n,a,r){for(var s=this._armature.actions.length,o=this._parseActionData(t,n,a,r),h=0,l=null,u=0,p=o;u<p.length;u++){var c=p[u];this._armature.addAction(c,!1)}0===this._actionFrames.length&&((l=new i).frameStart=0,this._actionFrames.push(l),l=null);for(var d=0,_=this._actionFrames;d<_.length;d++){var f=_[d];if(f.frameStart===e){l=f;break}if(f.frameStart>e)break;h++}null===l&&((l=new i).frameStart=e,this._actionFrames.splice(h,0,l));for(var m=0;m<o.length;++m)l.actions.push(s+m)},n.prototype._parseArmature=function(e,i){var a=t.BaseObject.borrowObject(t.ArmatureData);if(a.name=n._getString(e,t.DataParser.NAME,""),a.frameRate=n._getNumber(e,t.DataParser.FRAME_RATE,this._data.frameRate),a.scale=i,t.DataParser.TYPE in e&&"string"==typeof e[t.DataParser.TYPE]?a.type=t.DataParser._getArmatureType(e[t.DataParser.TYPE]):a.type=n._getNumber(e,t.DataParser.TYPE,0),0===a.frameRate&&(a.frameRate=24),this._armature=a,t.DataParser.CANVAS in e){var r=e[t.DataParser.CANVAS],s=t.BaseObject.borrowObject(t.CanvasData);t.DataParser.COLOR in r?s.hasBackground=!0:s.hasBackground=!1,s.color=n._getNumber(r,t.DataParser.COLOR,0),s.x=n._getNumber(r,t.DataParser.X,0)*a.scale,s.y=n._getNumber(r,t.DataParser.Y,0)*a.scale,s.width=n._getNumber(r,t.DataParser.WIDTH,0)*a.scale,s.height=n._getNumber(r,t.DataParser.HEIGHT,0)*a.scale,a.canvas=s}if(t.DataParser.AABB in e){var o=e[t.DataParser.AABB];a.aabb.x=n._getNumber(o,t.DataParser.X,0)*a.scale,a.aabb.y=n._getNumber(o,t.DataParser.Y,0)*a.scale,a.aabb.width=n._getNumber(o,t.DataParser.WIDTH,0)*a.scale,a.aabb.height=n._getNumber(o,t.DataParser.HEIGHT,0)*a.scale}if(t.DataParser.BONE in e)for(var h=0,l=e[t.DataParser.BONE];h<l.length;h++){var u=l[h],p=n._getString(u,t.DataParser.PARENT,""),c=this._parseBone(u);if(p.length>0){var d=a.getBone(p);null!==d?c.parent=d:(p in this._cacheBones||(this._cacheBones[p]=[]),this._cacheBones[p].push(c))}if(c.name in this._cacheBones){for(var _=0,f=this._cacheBones[c.name];_<f.length;_++){f[_].parent=c}delete this._cacheBones[c.name]}a.addBone(c),this._rawBones.push(c)}if(t.DataParser.IK in e)for(var m=0,g=e[t.DataParser.IK];m<g.length;m++){var y=g[m];(w=this._parseIKConstraint(y))&&a.addConstraint(w)}if(a.sortBones(),t.DataParser.SLOT in e)for(var b=0,v=0,T=e[t.DataParser.SLOT];v<T.length;v++){var I=T[v];a.addSlot(this._parseSlot(I,b++))}if(t.DataParser.SKIN in e)for(var P=0,S=e[t.DataParser.SKIN];P<S.length;P++){var A=S[P];a.addSkin(this._parseSkin(A))}if(t.DataParser.PATH_CONSTRAINT in e)for(var D=0,x=e[t.DataParser.PATH_CONSTRAINT];D<x.length;D++){var w,O=x[D];(w=this._parsePathConstraint(O))&&a.addConstraint(w)}for(var E=0,C=this._cacheRawMeshes.length;E<C;++E){var M=this._cacheRawMeshes[E],B=n._getString(M,t.DataParser.SHARE,"");if(0!==B.length){var k=n._getString(M,t.DataParser.SKIN,t.DataParser.DEFAULT_NAME);0===k.length&&(k=t.DataParser.DEFAULT_NAME);var F=a.getMesh(k,"",B);if(null!==F)this._cacheMeshes[E].geometry.shareFrom(F.geometry)}}if(t.DataParser.ANIMATION in e)for(var N=0,R=e[t.DataParser.ANIMATION];N<R.length;N++){var L=R[N],j=this._parseAnimation(L);a.addAnimation(j)}if(t.DataParser.DEFAULT_ACTIONS in e)for(var X=0,G=this._parseActionData(e[t.DataParser.DEFAULT_ACTIONS],0,null,null);X<G.length;X++){var U=G[X];if(a.addAction(U,!0),0===U.type)null!==(j=a.getAnimation(U.name))&&(a.defaultAnimation=j)}if(t.DataParser.ACTIONS in e)for(var H=0,Y=this._parseActionData(e[t.DataParser.ACTIONS],0,null,null);H<Y.length;H++){U=Y[H];a.addAction(U,!1)}for(var V in this._rawBones.length=0,this._cacheRawMeshes.length=0,this._cacheMeshes.length=0,this._armature=null,this._weightSlotPose)delete this._weightSlotPose[V];for(var V in this._weightBonePoses)delete this._weightBonePoses[V];for(var V in this._cacheBones)delete this._cacheBones[V];for(var V in this._slotChildActions)delete this._slotChildActions[V];return a},n.prototype._parseBone=function(e){if(0===(t.DataParser.TYPE in e&&"string"==typeof e[t.DataParser.TYPE]?t.DataParser._getBoneType(e[t.DataParser.TYPE]):n._getNumber(e,t.DataParser.TYPE,0))){var i=this._armature.scale,a=t.BaseObject.borrowObject(t.BoneData);return a.inheritTranslation=n._getBoolean(e,t.DataParser.INHERIT_TRANSLATION,!0),a.inheritRotation=n._getBoolean(e,t.DataParser.INHERIT_ROTATION,!0),a.inheritScale=n._getBoolean(e,t.DataParser.INHERIT_SCALE,!0),a.inheritReflection=n._getBoolean(e,t.DataParser.INHERIT_REFLECTION,!0),a.length=n._getNumber(e,t.DataParser.LENGTH,0)*i,a.alpha=n._getNumber(e,t.DataParser.ALPHA,1),a.name=n._getString(e,t.DataParser.NAME,""),t.DataParser.TRANSFORM in e&&this._parseTransform(e[t.DataParser.TRANSFORM],a.transform,i),a}var r=t.BaseObject.borrowObject(t.SurfaceData);return r.alpha=n._getNumber(e,t.DataParser.ALPHA,1),r.name=n._getString(e,t.DataParser.NAME,""),r.segmentX=n._getNumber(e,t.DataParser.SEGMENT_X,0),r.segmentY=n._getNumber(e,t.DataParser.SEGMENT_Y,0),this._parseGeometry(e,r.geometry),r},n.prototype._parseIKConstraint=function(e){var i=this._armature.getBone(n._getString(e,t.DataParser.BONE,""));if(null===i)return null;var a=this._armature.getBone(n._getString(e,t.DataParser.TARGET,""));if(null===a)return null;var r=n._getNumber(e,t.DataParser.CHAIN,0),s=t.BaseObject.borrowObject(t.IKConstraintData);return s.scaleEnabled=n._getBoolean(e,t.DataParser.SCALE,!1),s.bendPositive=n._getBoolean(e,t.DataParser.BEND_POSITIVE,!0),s.weight=n._getNumber(e,t.DataParser.WEIGHT,1),s.name=n._getString(e,t.DataParser.NAME,""),s.type=0,s.target=a,r>0&&null!==i.parent?(s.root=i.parent,s.bone=i):(s.root=i,s.bone=null),s},n.prototype._parsePathConstraint=function(e){var i=this._armature.getSlot(n._getString(e,t.DataParser.TARGET,""));if(null===i)return null;var a=this._armature.defaultSkin;if(null===a)return null;var r=a.getDisplay(i.name,n._getString(e,t.DataParser.TARGET_DISPLAY,i.name));if(null===r||!(r instanceof t.PathDisplayData))return null;var s=e[t.DataParser.BONES];if(null===s||0===s.length)return null;var o=t.BaseObject.borrowObject(t.PathConstraintData);o.name=n._getString(e,t.DataParser.NAME,""),o.type=1,o.pathSlot=i,o.pathDisplayData=r,o.target=i.parent,o.positionMode=t.DataParser._getPositionMode(n._getString(e,t.DataParser.POSITION_MODE,"")),o.spacingMode=t.DataParser._getSpacingMode(n._getString(e,t.DataParser.SPACING_MODE,"")),o.rotateMode=t.DataParser._getRotateMode(n._getString(e,t.DataParser.ROTATE_MODE,"")),o.position=n._getNumber(e,t.DataParser.POSITION,0),o.spacing=n._getNumber(e,t.DataParser.SPACING,0),o.rotateOffset=n._getNumber(e,t.DataParser.ROTATE_OFFSET,0),o.rotateMix=n._getNumber(e,t.DataParser.ROTATE_MIX,1),o.translateMix=n._getNumber(e,t.DataParser.TRANSLATE_MIX,1);for(var h=0,l=s;h<l.length;h++){var u=l[h],p=this._armature.getBone(u);null!==p&&(o.AddBone(p),null===o.root&&(o.root=p))}return o},n.prototype._parseSlot=function(e,i){var a=t.BaseObject.borrowObject(t.SlotData);return a.displayIndex=n._getNumber(e,t.DataParser.DISPLAY_INDEX,0),a.zOrder=i,a.zIndex=n._getNumber(e,t.DataParser.Z_INDEX,0),a.alpha=n._getNumber(e,t.DataParser.ALPHA,1),a.name=n._getString(e,t.DataParser.NAME,""),a.parent=this._armature.getBone(n._getString(e,t.DataParser.PARENT,"")),t.DataParser.BLEND_MODE in e&&"string"==typeof e[t.DataParser.BLEND_MODE]?a.blendMode=t.DataParser._getBlendMode(e[t.DataParser.BLEND_MODE]):a.blendMode=n._getNumber(e,t.DataParser.BLEND_MODE,0),t.DataParser.COLOR in e?(a.color=t.SlotData.createColor(),this._parseColorTransform(e[t.DataParser.COLOR],a.color)):a.color=t.SlotData.DEFAULT_COLOR,t.DataParser.ACTIONS in e&&(this._slotChildActions[a.name]=this._parseActionData(e[t.DataParser.ACTIONS],0,null,null)),a},n.prototype._parseSkin=function(e){var i=t.BaseObject.borrowObject(t.SkinData);if(i.name=n._getString(e,t.DataParser.NAME,t.DataParser.DEFAULT_NAME),0===i.name.length&&(i.name=t.DataParser.DEFAULT_NAME),t.DataParser.SLOT in e){var a=e[t.DataParser.SLOT];this._skin=i;for(var r=0,s=a;r<s.length;r++){var o=s[r],h=n._getString(o,t.DataParser.NAME,""),l=this._armature.getSlot(h);if(null!==l){if(this._slot=l,t.DataParser.DISPLAY in o)for(var u=0,p=o[t.DataParser.DISPLAY];u<p.length;u++){var c=p[u];c?i.addDisplay(h,this._parseDisplay(c)):i.addDisplay(h,null)}this._slot=null}}this._skin=null}return i},n.prototype._parseDisplay=function(e){var i=n._getString(e,t.DataParser.NAME,""),a=n._getString(e,t.DataParser.PATH,""),r=0,s=null;switch(r=t.DataParser.TYPE in e&&"string"==typeof e[t.DataParser.TYPE]?t.DataParser._getDisplayType(e[t.DataParser.TYPE]):n._getNumber(e,t.DataParser.TYPE,r)){case 0:var o=s=t.BaseObject.borrowObject(t.ImageDisplayData);o.name=i,o.path=a.length>0?a:i,this._parsePivot(e,o);break;case 1:var h=s=t.BaseObject.borrowObject(t.ArmatureDisplayData);if(h.name=i,h.path=a.length>0?a:i,h.inheritAnimation=!0,t.DataParser.ACTIONS in e)for(var l=0,u=this._parseActionData(e[t.DataParser.ACTIONS],0,null,null);l<u.length;l++){var p=u[l];h.addAction(p)}else if(this._slot.name in this._slotChildActions){var c=this._skin.getDisplays(this._slot.name);if(null===c?0===this._slot.displayIndex:this._slot.displayIndex===c.length){for(var d=0,_=this._slotChildActions[this._slot.name];d<_.length;d++){p=_[d];h.addAction(p)}delete this._slotChildActions[this._slot.name]}}break;case 2:var f=s=t.BaseObject.borrowObject(t.MeshDisplayData);f.geometry.inheritDeform=n._getBoolean(e,t.DataParser.INHERIT_DEFORM,!0),f.name=i,f.path=a.length>0?a:i,t.DataParser.SHARE in e?(f.geometry.data=this._data,this._cacheRawMeshes.push(e),this._cacheMeshes.push(f)):this._parseMesh(e,f);break;case 3:var m=this._parseBoundingBox(e);if(null!==m){var g=s=t.BaseObject.borrowObject(t.BoundingBoxDisplayData);g.name=i,g.path=a.length>0?a:i,g.boundingBox=m}break;case 4:var y=e[t.DataParser.LENGTHS],b=s=t.BaseObject.borrowObject(t.PathDisplayData);b.closed=n._getBoolean(e,t.DataParser.CLOSED,!1),b.constantSpeed=n._getBoolean(e,t.DataParser.CONSTANT_SPEED,!1),b.name=i,b.path=a.length>0?a:i,b.curveLengths.length=y.length;for(var v=0,T=y.length;v<T;++v)b.curveLengths[v]=y[v];this._parsePath(e,b)}return null!==s&&t.DataParser.TRANSFORM in e&&this._parseTransform(e[t.DataParser.TRANSFORM],s.transform,this._armature.scale),s},n.prototype._parsePath=function(t,e){this._parseGeometry(t,e.geometry)},n.prototype._parsePivot=function(e,i){if(t.DataParser.PIVOT in e){var a=e[t.DataParser.PIVOT];i.pivot.x=n._getNumber(a,t.DataParser.X,0),i.pivot.y=n._getNumber(a,t.DataParser.Y,0)}else i.pivot.x=.5,i.pivot.y=.5},n.prototype._parseMesh=function(e,i){if(this._parseGeometry(e,i.geometry),t.DataParser.WEIGHTS in e){var n=e[t.DataParser.SLOT_POSE],a=e[t.DataParser.BONE_POSE],r=this._skin.name+"_"+this._slot.name+"_"+i.name;this._weightSlotPose[r]=n,this._weightBonePoses[r]=a}},n.prototype._parseBoundingBox=function(e){var i=null,a=0;switch(a=t.DataParser.SUB_TYPE in e&&"string"==typeof e[t.DataParser.SUB_TYPE]?t.DataParser._getBoundingBoxType(e[t.DataParser.SUB_TYPE]):n._getNumber(e,t.DataParser.SUB_TYPE,a)){case 0:i=t.BaseObject.borrowObject(t.RectangleBoundingBoxData);break;case 1:i=t.BaseObject.borrowObject(t.EllipseBoundingBoxData);break;case 2:i=this._parsePolygonBoundingBox(e)}return null!==i&&(i.color=n._getNumber(e,t.DataParser.COLOR,0),0!==i.type&&1!==i.type||(i.width=n._getNumber(e,t.DataParser.WIDTH,0),i.height=n._getNumber(e,t.DataParser.HEIGHT,0))),i},n.prototype._parsePolygonBoundingBox=function(e){var i=t.BaseObject.borrowObject(t.PolygonBoundingBoxData);if(t.DataParser.VERTICES in e){var n=this._armature.scale,a=e[t.DataParser.VERTICES],r=i.vertices;r.length=a.length;for(var s=0,o=a.length;s<o;s+=2){var h=a[s]*n,l=a[s+1]*n;r[s]=h,r[s+1]=l,0===s?(i.x=h,i.y=l,i.width=h,i.height=l):(h<i.x?i.x=h:h>i.width&&(i.width=h),l<i.y?i.y=l:l>i.height&&(i.height=l))}i.width-=i.x,i.height-=i.y}else console.warn("Data error.\n Please reexport DragonBones Data to fixed the bug.");return i},n.prototype._parseAnimation=function(e){var i=t.BaseObject.borrowObject(t.AnimationData);if(i.blendType=t.DataParser._getAnimationBlendType(n._getString(e,t.DataParser.BLEND_TYPE,"")),i.frameCount=n._getNumber(e,t.DataParser.DURATION,0),i.playTimes=n._getNumber(e,t.DataParser.PLAY_TIMES,1),i.duration=i.frameCount/this._armature.frameRate,i.fadeInTime=n._getNumber(e,t.DataParser.FADE_IN_TIME,0),i.scale=n._getNumber(e,t.DataParser.SCALE,1),i.name=n._getString(e,t.DataParser.NAME,t.DataParser.DEFAULT_NAME),0===i.name.length&&(i.name=t.DataParser.DEFAULT_NAME),i.frameIntOffset=this._frameIntArray.length,i.frameFloatOffset=this._frameFloatArray.length,i.frameOffset=this._frameArray.length,this._animation=i,t.DataParser.FRAME in e){var a=e[t.DataParser.FRAME],r=a.length;if(r>0)for(var s=0,o=0;s<r;++s){var h=a[s];this._parseActionDataInFrame(h,o,null,null),o+=n._getNumber(h,t.DataParser.DURATION,1)}}if(t.DataParser.Z_ORDER in e&&(this._animation.zOrderTimeline=this._parseTimeline(e[t.DataParser.Z_ORDER],null,t.DataParser.FRAME,1,0,0,this._parseZOrderFrame)),t.DataParser.BONE in e)for(var l=0,u=e[t.DataParser.BONE];l<u.length;l++){var p=u[l];this._parseBoneTimeline(p)}if(t.DataParser.SLOT in e)for(var c=0,d=e[t.DataParser.SLOT];c<d.length;c++){p=d[c];this._parseSlotTimeline(p)}if(t.DataParser.FFD in e)for(var _=0,f=e[t.DataParser.FFD];_<f.length;_++){p=f[_];var m=n._getString(p,t.DataParser.SKIN,t.DataParser.DEFAULT_NAME),g=n._getString(p,t.DataParser.SLOT,""),y=n._getString(p,t.DataParser.NAME,"");if(0===m.length&&(m=t.DataParser.DEFAULT_NAME),this._slot=this._armature.getSlot(g),this._mesh=this._armature.getMesh(m,g,y),null!==this._slot&&null!==this._mesh)null!==(D=this._parseTimeline(p,null,t.DataParser.FRAME,22,2,0,this._parseSlotDeformFrame))&&this._animation.addSlotTimeline(g,D),this._slot=null,this._mesh=null}if(t.DataParser.IK in e)for(var b=0,v=e[t.DataParser.IK];b<v.length;b++){p=v[b];var T=n._getString(p,t.DataParser.NAME,"");if(null!==this._armature.getConstraint(T))null!==(D=this._parseTimeline(p,null,t.DataParser.FRAME,30,1,2,this._parseIKConstraintFrame))&&this._animation.addConstraintTimeline(T,D)}if(this._actionFrames.length>0&&(this._animation.actionTimeline=this._parseTimeline(null,this._actionFrames,"",0,0,0,this._parseActionFrame),this._actionFrames.length=0),t.DataParser.TIMELINE in e)for(var I=0,P=e[t.DataParser.TIMELINE];I<P.length;I++){p=P[I];var S=n._getNumber(p,t.DataParser.TYPE,0),A=n._getString(p,t.DataParser.NAME,""),D=null;switch(S){case 0:break;case 20:case 23:case 60:case 24:case 40:case 41:if(20===S?(this._frameValueType=0,this._frameValueScale=1):(this._frameValueType=1,this._frameValueScale=23===S?1:40===S||41===S?1e4:100),this._frameDefaultValue=60===S||24===S||41===S?1:0,40===S&&0!==i.blendType){var x=D=t.BaseObject.borrowObject(t.AnimationTimelineData);x.x=n._getNumber(p,t.DataParser.X,0),x.y=n._getNumber(p,t.DataParser.Y,0)}D=this._parseTimeline(p,null,t.DataParser.FRAME,S,this._frameValueType,1,this._parseSingleValueFrame,D);break;case 11:case 12:case 13:case 30:case 42:30===S||42===S?(this._frameValueType=1,this._frameValueScale=42===S?1e4:100):(this._frameValueScale=12===S?t.Transform.DEG_RAD:1,this._frameValueType=2),this._frameDefaultValue=13===S||30===S?1:0,D=this._parseTimeline(p,null,t.DataParser.FRAME,S,this._frameValueType,2,this._parseDoubleValueFrame);break;case 1:break;case 50:var w=this._armature.getBone(A);if(null===w)continue;this._geometry=w.geometry,D=this._parseTimeline(p,null,t.DataParser.FRAME,S,2,0,this._parseDeformFrame),this._geometry=null;break;case 22:for(var m in this._geometry=null,this._armature.skins){var O=this._armature.skins[m];for(var E in O.displays)for(var C=0,M=O.displays[E];C<M.length;C++){var B=M[C];if(null!==B&&B.name===A){this._geometry=B.geometry;break}}}if(null===this._geometry)continue;D=this._parseTimeline(p,null,t.DataParser.FRAME,S,2,0,this._parseDeformFrame),this._geometry=null;break;case 21:D=this._parseTimeline(p,null,t.DataParser.FRAME,S,1,1,this._parseSlotColorFrame)}if(null!==D)switch(S){case 0:case 1:break;case 11:case 12:case 13:case 50:case 60:this._animation.addBoneTimeline(A,D);break;case 20:case 21:case 22:case 23:case 24:this._animation.addSlotTimeline(A,D);break;case 30:this._animation.addConstraintTimeline(A,D);break;case 40:case 41:case 42:this._animation.addAnimationTimeline(A,D)}}return this._animation=null,i},n.prototype._parseTimeline=function(e,a,r,s,o,h,l,u){if(void 0===u&&(u=null),null!==e&&r.length>0&&r in e&&(a=e[r]),null===a)return null;var p=a.length;if(0===p)return null;var c=this._frameIntArray.length,d=this._frameFloatArray.length,_=this._timelineArray.length;switch(null===u&&(u=t.BaseObject.borrowObject(t.TimelineData)),u.type=s,u.offset=_,this._frameValueType=o,this._timeline=u,this._timelineArray.length+=5+p,null!==e?(this._timelineArray[_+0]=Math.round(100*n._getNumber(e,t.DataParser.SCALE,1)),this._timelineArray[_+1]=Math.round(100*n._getNumber(e,t.DataParser.OFFSET,0))):(this._timelineArray[_+0]=100,this._timelineArray[_+1]=0),this._timelineArray[_+2]=p,this._timelineArray[_+3]=h,this._frameValueType){case 0:this._timelineArray[_+4]=0;break;case 1:this._timelineArray[_+4]=c-this._animation.frameIntOffset;break;case 2:this._timelineArray[_+4]=d-this._animation.frameFloatOffset}if(1===p)u.frameIndicesOffset=-1,this._timelineArray[_+5+0]=l.call(this,a[0],0,0)-this._animation.frameOffset;else{var f=this._animation.frameCount+1,m=this._data.frameIndices,g=m.length;m.length+=f,u.frameIndicesOffset=g;for(var y=0,b=0,v=0,T=0;y<f;++y){if(v+T<=y&&b<p){var I=a[b];v=y,T=b===p-1?this._animation.frameCount-v:I instanceof i?this._actionFrames[b+1].frameStart-v:n._getNumber(I,t.DataParser.DURATION,1),this._timelineArray[_+5+b]=l.call(this,I,v,T)-this._animation.frameOffset,b++}m[g+y]=b-1}}return this._timeline=null,u},n.prototype._parseBoneTimeline=function(e){var i=this._armature.getBone(n._getString(e,t.DataParser.NAME,""));if(null!==i){var a;if(this._bone=i,this._slot=this._armature.getSlot(this._bone.name),t.DataParser.TRANSLATE_FRAME in e)this._frameDefaultValue=0,this._frameValueScale=1,null!==(a=this._parseTimeline(e,null,t.DataParser.TRANSLATE_FRAME,11,2,2,this._parseDoubleValueFrame))&&this._animation.addBoneTimeline(i.name,a);if(t.DataParser.ROTATE_FRAME in e)this._frameDefaultValue=0,this._frameValueScale=1,null!==(a=this._parseTimeline(e,null,t.DataParser.ROTATE_FRAME,12,2,2,this._parseBoneRotateFrame))&&this._animation.addBoneTimeline(i.name,a);if(t.DataParser.SCALE_FRAME in e)this._frameDefaultValue=1,this._frameValueScale=1,null!==(a=this._parseTimeline(e,null,t.DataParser.SCALE_FRAME,13,2,2,this._parseBoneScaleFrame))&&this._animation.addBoneTimeline(i.name,a);if(t.DataParser.FRAME in e)null!==(a=this._parseTimeline(e,null,t.DataParser.FRAME,10,2,6,this._parseBoneAllFrame))&&this._animation.addBoneTimeline(i.name,a);this._bone=null,this._slot=null}},n.prototype._parseSlotTimeline=function(e){var i=this._armature.getSlot(n._getString(e,t.DataParser.NAME,""));if(null!==i){var a=null,r=null;this._slot=i,a=t.DataParser.DISPLAY_FRAME in e?this._parseTimeline(e,null,t.DataParser.DISPLAY_FRAME,20,0,0,this._parseSlotDisplayFrame):this._parseTimeline(e,null,t.DataParser.FRAME,20,0,0,this._parseSlotDisplayFrame),r=t.DataParser.COLOR_FRAME in e?this._parseTimeline(e,null,t.DataParser.COLOR_FRAME,21,1,1,this._parseSlotColorFrame):this._parseTimeline(e,null,t.DataParser.FRAME,21,1,1,this._parseSlotColorFrame),null!==a&&this._animation.addSlotTimeline(i.name,a),null!==r&&this._animation.addSlotTimeline(i.name,r),this._slot=null}},n.prototype._parseFrame=function(t,e,i){var n=this._frameArray.length;return this._frameArray.length+=1,this._frameArray[n+0]=e,n},n.prototype._parseTweenFrame=function(e,i,a){var r=this._parseFrame(e,i,a);if(a>0)if(t.DataParser.CURVE in e){var s=a+1;this._helpArray.length=s;var o=this._samplingEasingCurve(e[t.DataParser.CURVE],this._helpArray);this._frameArray.length+=2+this._helpArray.length,this._frameArray[r+1]=2,this._frameArray[r+2]=o?s:-s;for(var h=0;h<s;++h)this._frameArray[r+3+h]=Math.round(1e4*this._helpArray[h])}else{var l=-2;t.DataParser.TWEEN_EASING in e&&(l=n._getNumber(e,t.DataParser.TWEEN_EASING,-2)),-2===l?(this._frameArray.length+=1,this._frameArray[r+1]=0):0===l?(this._frameArray.length+=1,this._frameArray[r+1]=1):l<0?(this._frameArray.length+=2,this._frameArray[r+1]=3,this._frameArray[r+2]=Math.round(100*-l)):l<=1?(this._frameArray.length+=2,this._frameArray[r+1]=4,this._frameArray[r+2]=Math.round(100*l)):(this._frameArray.length+=2,this._frameArray[r+1]=5,this._frameArray[r+2]=Math.round(100*l-100))}else this._frameArray.length+=1,this._frameArray[r+1]=0;return r},n.prototype._parseSingleValueFrame=function(e,i,a){var r=0;switch(this._frameValueType){case 0:r=this._parseFrame(e,i,a),this._frameArray.length+=1,this._frameArray[r+1]=n._getNumber(e,t.DataParser.VALUE,this._frameDefaultValue);break;case 1:r=this._parseTweenFrame(e,i,a);var s=this._frameIntArray.length;this._frameIntArray.length+=1,this._frameIntArray[s]=Math.round(n._getNumber(e,t.DataParser.VALUE,this._frameDefaultValue)*this._frameValueScale);break;case 2:r=this._parseTweenFrame(e,i,a);s=this._frameFloatArray.length;this._frameFloatArray.length+=1,this._frameFloatArray[s]=n._getNumber(e,t.DataParser.VALUE,this._frameDefaultValue)*this._frameValueScale}return r},n.prototype._parseDoubleValueFrame=function(e,i,a){var r=0;switch(this._frameValueType){case 0:r=this._parseFrame(e,i,a),this._frameArray.length+=2,this._frameArray[r+1]=n._getNumber(e,t.DataParser.X,this._frameDefaultValue),this._frameArray[r+2]=n._getNumber(e,t.DataParser.Y,this._frameDefaultValue);break;case 1:r=this._parseTweenFrame(e,i,a);var s=this._frameIntArray.length;this._frameIntArray.length+=2,this._frameIntArray[s]=Math.round(n._getNumber(e,t.DataParser.X,this._frameDefaultValue)*this._frameValueScale),this._frameIntArray[s+1]=Math.round(n._getNumber(e,t.DataParser.Y,this._frameDefaultValue)*this._frameValueScale);break;case 2:r=this._parseTweenFrame(e,i,a);s=this._frameFloatArray.length;this._frameFloatArray.length+=2,this._frameFloatArray[s]=n._getNumber(e,t.DataParser.X,this._frameDefaultValue)*this._frameValueScale,this._frameFloatArray[s+1]=n._getNumber(e,t.DataParser.Y,this._frameDefaultValue)*this._frameValueScale}return r},n.prototype._parseActionFrame=function(t,e,i){var n=this._frameArray.length,a=t.actions.length;this._frameArray.length+=2+a,this._frameArray[n+0]=e,this._frameArray[n+0+1]=a;for(var r=0;r<a;++r)this._frameArray[n+0+2+r]=t.actions[r];return n},n.prototype._parseZOrderFrame=function(e,i,n){var a=this._parseFrame(e,i,n);if(t.DataParser.Z_ORDER in e){var r=e[t.DataParser.Z_ORDER];if(r.length>0){for(var s=this._armature.sortedSlots.length,o=new Array(s-r.length/2),h=new Array(s),l=0;l<o.length;++l)o[l]=0;for(var u=0;u<s;++u)h[u]=-1;for(var p=0,c=0,d=0,_=r.length;d<_;d+=2){for(var f=r[d],m=r[d+1];p!==f;)o[c++]=p++;h[p+m]=p++}for(;p<s;)o[c++]=p++;this._frameArray.length+=1+s,this._frameArray[a+1]=s;for(var g=s;g--;)-1===h[g]?this._frameArray[a+2+g]=o[--c]||0:this._frameArray[a+2+g]=h[g]||0;return a}}return this._frameArray.length+=1,this._frameArray[a+1]=0,a},n.prototype._parseBoneAllFrame=function(e,i,a){this._helpTransform.identity(),t.DataParser.TRANSFORM in e&&this._parseTransform(e[t.DataParser.TRANSFORM],this._helpTransform,1);var r=this._helpTransform.rotation;0!==i&&(0===this._prevClockwise?r=this._prevRotation+t.Transform.normalizeRadian(r-this._prevRotation):((this._prevClockwise>0?r>=this._prevRotation:r<=this._prevRotation)&&(this._prevClockwise=this._prevClockwise>0?this._prevClockwise-1:this._prevClockwise+1),r=this._prevRotation+r-this._prevRotation+t.Transform.PI_D*this._prevClockwise)),this._prevClockwise=n._getNumber(e,t.DataParser.TWEEN_ROTATE,0),this._prevRotation=r;var s=this._parseTweenFrame(e,i,a),o=this._frameFloatArray.length;return this._frameFloatArray.length+=6,this._frameFloatArray[o++]=this._helpTransform.x,this._frameFloatArray[o++]=this._helpTransform.y,this._frameFloatArray[o++]=r,this._frameFloatArray[o++]=this._helpTransform.skew,this._frameFloatArray[o++]=this._helpTransform.scaleX,this._frameFloatArray[o++]=this._helpTransform.scaleY,this._parseActionDataInFrame(e,i,this._bone,this._slot),s},n.prototype._parseBoneTranslateFrame=function(e,i,a){var r=this._parseTweenFrame(e,i,a),s=this._frameFloatArray.length;return this._frameFloatArray.length+=2,this._frameFloatArray[s++]=n._getNumber(e,t.DataParser.X,0),this._frameFloatArray[s++]=n._getNumber(e,t.DataParser.Y,0),r},n.prototype._parseBoneRotateFrame=function(e,i,a){var r=n._getNumber(e,t.DataParser.ROTATE,0)*t.Transform.DEG_RAD;0!==i&&(0===this._prevClockwise?r=this._prevRotation+t.Transform.normalizeRadian(r-this._prevRotation):((this._prevClockwise>0?r>=this._prevRotation:r<=this._prevRotation)&&(this._prevClockwise=this._prevClockwise>0?this._prevClockwise-1:this._prevClockwise+1),r=this._prevRotation+r-this._prevRotation+t.Transform.PI_D*this._prevClockwise)),this._prevClockwise=n._getNumber(e,t.DataParser.CLOCK_WISE,0),this._prevRotation=r;var s=this._parseTweenFrame(e,i,a),o=this._frameFloatArray.length;return this._frameFloatArray.length+=2,this._frameFloatArray[o++]=r,this._frameFloatArray[o++]=n._getNumber(e,t.DataParser.SKEW,0)*t.Transform.DEG_RAD,s},n.prototype._parseBoneScaleFrame=function(e,i,a){var r=this._parseTweenFrame(e,i,a),s=this._frameFloatArray.length;return this._frameFloatArray.length+=2,this._frameFloatArray[s++]=n._getNumber(e,t.DataParser.X,1),this._frameFloatArray[s++]=n._getNumber(e,t.DataParser.Y,1),r},n.prototype._parseSlotDisplayFrame=function(e,i,a){var r=this._parseFrame(e,i,a);return this._frameArray.length+=1,t.DataParser.VALUE in e?this._frameArray[r+1]=n._getNumber(e,t.DataParser.VALUE,0):this._frameArray[r+1]=n._getNumber(e,t.DataParser.DISPLAY_INDEX,0),this._parseActionDataInFrame(e,i,this._slot.parent,this._slot),r},n.prototype._parseSlotColorFrame=function(e,i,n){var a=this._parseTweenFrame(e,i,n),r=-1;if(t.DataParser.VALUE in e||t.DataParser.COLOR in e){var s=t.DataParser.VALUE in e?e[t.DataParser.VALUE]:e[t.DataParser.COLOR];for(var o in s){this._parseColorTransform(s,this._helpColorTransform),r=this._colorArray.length,this._colorArray.length+=8,this._colorArray[r++]=Math.round(100*this._helpColorTransform.alphaMultiplier),this._colorArray[r++]=Math.round(100*this._helpColorTransform.redMultiplier),this._colorArray[r++]=Math.round(100*this._helpColorTransform.greenMultiplier),this._colorArray[r++]=Math.round(100*this._helpColorTransform.blueMultiplier),this._colorArray[r++]=Math.round(this._helpColorTransform.alphaOffset),this._colorArray[r++]=Math.round(this._helpColorTransform.redOffset),this._colorArray[r++]=Math.round(this._helpColorTransform.greenOffset),this._colorArray[r++]=Math.round(this._helpColorTransform.blueOffset),r-=8;break}}r<0&&(this._defaultColorOffset<0&&(this._defaultColorOffset=r=this._colorArray.length,this._colorArray.length+=8,this._colorArray[r++]=100,this._colorArray[r++]=100,this._colorArray[r++]=100,this._colorArray[r++]=100,this._colorArray[r++]=0,this._colorArray[r++]=0,this._colorArray[r++]=0,this._colorArray[r++]=0),r=this._defaultColorOffset);var h=this._frameIntArray.length;return this._frameIntArray.length+=1,this._frameIntArray[h]=r,a},n.prototype._parseSlotDeformFrame=function(e,i,a){var r=this._frameFloatArray.length,s=this._parseTweenFrame(e,i,a),o=t.DataParser.VERTICES in e?e[t.DataParser.VERTICES]:null,h=n._getNumber(e,t.DataParser.OFFSET,0),l=this._intArray[this._mesh.geometry.offset+0],u=this._mesh.parent.name+"_"+this._slot.name+"_"+this._mesh.name,p=this._mesh.geometry.weight,c=0,d=0,_=0,f=0;if(null!==p){var m=this._weightSlotPose[u];this._helpMatrixA.copyFromArray(m,0),this._frameFloatArray.length+=2*p.count,_=p.offset+2+p.bones.length}else this._frameFloatArray.length+=2*l;for(var g=0;g<2*l;g+=2)if(null===o?(c=0,d=0):(c=g<h||g-h>=o.length?0:o[g-h],d=g+1<h||g+1-h>=o.length?0:o[g+1-h]),null!==p){var y=this._weightBonePoses[u],b=this._intArray[_++];this._helpMatrixA.transformPoint(c,d,this._helpPoint,!0),c=this._helpPoint.x,d=this._helpPoint.y;for(var v=0;v<b;++v){var T=this._intArray[_++];this._helpMatrixB.copyFromArray(y,7*T+1),this._helpMatrixB.invert(),this._helpMatrixB.transformPoint(c,d,this._helpPoint,!0),this._frameFloatArray[r+f++]=this._helpPoint.x,this._frameFloatArray[r+f++]=this._helpPoint.y}}else this._frameFloatArray[r+g]=c,this._frameFloatArray[r+g+1]=d;if(0===i){var I=this._frameIntArray.length;this._frameIntArray.length+=5,this._frameIntArray[I+0]=this._mesh.geometry.offset,this._frameIntArray[I+1]=this._frameFloatArray.length-r,this._frameIntArray[I+2]=this._frameFloatArray.length-r,this._frameIntArray[I+3]=0,this._frameIntArray[I+4]=r-this._animation.frameFloatOffset,this._timelineArray[this._timeline.offset+3]=I-this._animation.frameIntOffset}return s},n.prototype._parseIKConstraintFrame=function(e,i,a){var r=this._parseTweenFrame(e,i,a),s=this._frameIntArray.length;return this._frameIntArray.length+=2,this._frameIntArray[s++]=n._getBoolean(e,t.DataParser.BEND_POSITIVE,!0)?1:0,this._frameIntArray[s++]=Math.round(100*n._getNumber(e,t.DataParser.WEIGHT,1)),r},n.prototype._parseActionData=function(e,i,a,r){var s=new Array;if("string"==typeof e)(u=t.BaseObject.borrowObject(t.ActionData)).type=i,u.name=e,u.bone=a,u.slot=r,s.push(u);else if(e instanceof Array)for(var o=0,h=e;o<h.length;o++){var l=h[o],u=t.BaseObject.borrowObject(t.ActionData);if(t.DataParser.GOTO_AND_PLAY in l?(u.type=0,u.name=n._getString(l,t.DataParser.GOTO_AND_PLAY,"")):(t.DataParser.TYPE in l&&"string"==typeof l[t.DataParser.TYPE]?u.type=t.DataParser._getActionType(l[t.DataParser.TYPE]):u.type=n._getNumber(l,t.DataParser.TYPE,i),u.name=n._getString(l,t.DataParser.NAME,"")),t.DataParser.BONE in l){var p=n._getString(l,t.DataParser.BONE,"");u.bone=this._armature.getBone(p)}else u.bone=a;if(t.DataParser.SLOT in l){var c=n._getString(l,t.DataParser.SLOT,"");u.slot=this._armature.getSlot(c)}else u.slot=r;var d=null;if(t.DataParser.INTS in l){null===d&&(d=t.BaseObject.borrowObject(t.UserData));for(var _=0,f=l[t.DataParser.INTS];_<f.length;_++){var m=f[_];d.addInt(m)}}if(t.DataParser.FLOATS in l){null===d&&(d=t.BaseObject.borrowObject(t.UserData));for(var g=0,y=l[t.DataParser.FLOATS];g<y.length;g++){m=y[g];d.addFloat(m)}}if(t.DataParser.STRINGS in l){null===d&&(d=t.BaseObject.borrowObject(t.UserData));for(var b=0,v=l[t.DataParser.STRINGS];b<v.length;b++){m=v[b];d.addString(m)}}u.data=d,s.push(u)}return s},n.prototype._parseDeformFrame=function(e,i,a){var r=this._frameFloatArray.length,s=this._parseTweenFrame(e,i,a),o=t.DataParser.VERTICES in e?e[t.DataParser.VERTICES]:t.DataParser.VALUE in e?e[t.DataParser.VALUE]:null,h=n._getNumber(e,t.DataParser.OFFSET,0),l=this._intArray[this._geometry.offset+0],u=0,p=0;if(null!==this._geometry.weight);else{this._frameFloatArray.length+=2*l;for(var c=0;c<2*l;c+=2)null!==o?(u=c<h||c-h>=o.length?0:o[c-h],p=c+1<h||c+1-h>=o.length?0:o[c+1-h]):(u=0,p=0),this._frameFloatArray[r+c]=u,this._frameFloatArray[r+c+1]=p}if(0===i){var d=this._frameIntArray.length;this._frameIntArray.length+=5,this._frameIntArray[d+0]=this._geometry.offset,this._frameIntArray[d+1]=this._frameFloatArray.length-r,this._frameIntArray[d+2]=this._frameFloatArray.length-r,this._frameIntArray[d+3]=0,this._frameIntArray[d+4]=r-this._animation.frameFloatOffset,this._timelineArray[this._timeline.offset+3]=d-this._animation.frameIntOffset}return s},n.prototype._parseTransform=function(e,i,a){i.x=n._getNumber(e,t.DataParser.X,0)*a,i.y=n._getNumber(e,t.DataParser.Y,0)*a,t.DataParser.ROTATE in e||t.DataParser.SKEW in e?(i.rotation=t.Transform.normalizeRadian(n._getNumber(e,t.DataParser.ROTATE,0)*t.Transform.DEG_RAD),i.skew=t.Transform.normalizeRadian(n._getNumber(e,t.DataParser.SKEW,0)*t.Transform.DEG_RAD)):(t.DataParser.SKEW_X in e||t.DataParser.SKEW_Y in e)&&(i.rotation=t.Transform.normalizeRadian(n._getNumber(e,t.DataParser.SKEW_Y,0)*t.Transform.DEG_RAD),i.skew=t.Transform.normalizeRadian(n._getNumber(e,t.DataParser.SKEW_X,0)*t.Transform.DEG_RAD)-i.rotation),i.scaleX=n._getNumber(e,t.DataParser.SCALE_X,1),i.scaleY=n._getNumber(e,t.DataParser.SCALE_Y,1)},n.prototype._parseColorTransform=function(e,i){i.alphaMultiplier=.01*n._getNumber(e,t.DataParser.ALPHA_MULTIPLIER,100),i.redMultiplier=.01*n._getNumber(e,t.DataParser.RED_MULTIPLIER,100),i.greenMultiplier=.01*n._getNumber(e,t.DataParser.GREEN_MULTIPLIER,100),i.blueMultiplier=.01*n._getNumber(e,t.DataParser.BLUE_MULTIPLIER,100),i.alphaOffset=n._getNumber(e,t.DataParser.ALPHA_OFFSET,0),i.redOffset=n._getNumber(e,t.DataParser.RED_OFFSET,0),i.greenOffset=n._getNumber(e,t.DataParser.GREEN_OFFSET,0),i.blueOffset=n._getNumber(e,t.DataParser.BLUE_OFFSET,0)},n.prototype._parseGeometry=function(e,i){var n=e[t.DataParser.VERTICES],a=Math.floor(n.length/2),r=0,s=this._intArray.length,o=this._floatArray.length;i.offset=s,i.data=this._data,this._intArray.length+=4,this._intArray[s+0]=a,this._intArray[s+2]=o,this._intArray[s+3]=-1,this._floatArray.length+=2*a;for(var h=0,l=2*a;h<l;++h)this._floatArray[o+h]=n[h];if(t.DataParser.TRIANGLES in e){var u=e[t.DataParser.TRIANGLES];r=Math.floor(u.length/3),this._intArray.length+=3*r;for(h=0,l=3*r;h<l;++h)this._intArray[s+4+h]=u[h]}if(this._intArray[s+1]=r,t.DataParser.UVS in e){var p=e[t.DataParser.UVS],c=o+2*a;this._floatArray.length+=2*a;for(h=0,l=2*a;h<l;++h)this._floatArray[c+h]=p[h]}if(t.DataParser.WEIGHTS in e){var d=e[t.DataParser.WEIGHTS],_=Math.floor(d.length-a)/2,f=this._intArray.length,m=this._floatArray.length,g=0,y=this._armature.sortedBones,b=t.BaseObject.borrowObject(t.WeightData);if(b.count=_,b.offset=f,this._intArray.length+=2+g+a+_,this._intArray[f+1]=m,t.DataParser.BONE_POSE in e){var v=e[t.DataParser.SLOT_POSE],T=e[t.DataParser.BONE_POSE],I=new Array;g=Math.floor(T.length/7),I.length=g;for(h=0;h<g;++h){var P=T[7*h],S=this._rawBones[P];b.addBone(S),I[h]=P,this._intArray[f+2+h]=y.indexOf(S)}this._floatArray.length+=3*_,this._helpMatrixA.copyFromArray(v,0);h=0;for(var A=0,D=f+2+g,x=m;h<a;++h){var w=2*h,O=this._intArray[D++]=d[A++],E=this._floatArray[o+w],C=this._floatArray[o+w+1];this._helpMatrixA.transformPoint(E,C,this._helpPoint),E=this._helpPoint.x,C=this._helpPoint.y;for(var M=0;M<O;++M){P=d[A++];var B=I.indexOf(P);this._helpMatrixB.copyFromArray(T,7*B+1),this._helpMatrixB.invert(),this._helpMatrixB.transformPoint(E,C,this._helpPoint),this._intArray[D++]=B,this._floatArray[x++]=d[A++],this._floatArray[x++]=this._helpPoint.x,this._floatArray[x++]=this._helpPoint.y}}}else{var k=e[t.DataParser.BONES];g=k.length;for(h=0;h<g;h++){P=k[h],S=this._rawBones[P];b.addBone(S),this._intArray[f+2+h]=y.indexOf(S)}this._floatArray.length+=3*_;h=0,A=0,x=0,D=f+2+g;for(var F=m;h<_;h++){O=d[A++];this._intArray[D++]=O;for(M=0;M<O;M++){B=d[A++];var N=d[A++];E=n[x++],C=n[x++];this._intArray[D++]=k.indexOf(B),this._floatArray[F++]=N,this._floatArray[F++]=E,this._floatArray[F++]=C}}}i.weight=b}},n.prototype._parseArray=function(t){this._intArray.length=0,this._floatArray.length=0,this._frameIntArray.length=0,this._frameFloatArray.length=0,this._frameArray.length=0,this._timelineArray.length=0,this._colorArray.length=0},n.prototype._modifyArray=function(){this._intArray.length%Int16Array.BYTES_PER_ELEMENT!=0&&this._intArray.push(0),this._frameIntArray.length%Int16Array.BYTES_PER_ELEMENT!=0&&this._frameIntArray.push(0),this._frameArray.length%Int16Array.BYTES_PER_ELEMENT!=0&&this._frameArray.push(0),this._timelineArray.length%Uint16Array.BYTES_PER_ELEMENT!=0&&this._timelineArray.push(0),this._timelineArray.length%Int16Array.BYTES_PER_ELEMENT!=0&&this._colorArray.push(0);for(var t=this._intArray.length*Int16Array.BYTES_PER_ELEMENT,e=this._floatArray.length*Float32Array.BYTES_PER_ELEMENT,i=this._frameIntArray.length*Int16Array.BYTES_PER_ELEMENT,n=this._frameFloatArray.length*Float32Array.BYTES_PER_ELEMENT,a=this._frameArray.length*Int16Array.BYTES_PER_ELEMENT,r=this._timelineArray.length*Uint16Array.BYTES_PER_ELEMENT,s=this._colorArray.length*Int16Array.BYTES_PER_ELEMENT,o=new ArrayBuffer(t+e+i+n+a+r+s),h=new Int16Array(o,0,this._intArray.length),l=new Float32Array(o,t,this._floatArray.length),u=new Int16Array(o,t+e,this._frameIntArray.length),p=new Float32Array(o,t+e+i,this._frameFloatArray.length),c=new Int16Array(o,t+e+i+n,this._frameArray.length),d=new Uint16Array(o,t+e+i+n+a,this._timelineArray.length),_=new Int16Array(o,t+e+i+n+a+r,this._colorArray.length),f=0,m=this._intArray.length;f<m;++f)h[f]=this._intArray[f];for(f=0,m=this._floatArray.length;f<m;++f)l[f]=this._floatArray[f];for(f=0,m=this._frameIntArray.length;f<m;++f)u[f]=this._frameIntArray[f];for(f=0,m=this._frameFloatArray.length;f<m;++f)p[f]=this._frameFloatArray[f];for(f=0,m=this._frameArray.length;f<m;++f)c[f]=this._frameArray[f];for(f=0,m=this._timelineArray.length;f<m;++f)d[f]=this._timelineArray[f];for(f=0,m=this._colorArray.length;f<m;++f)_[f]=this._colorArray[f];this._data.binary=o,this._data.intArray=h,this._data.floatArray=l,this._data.frameIntArray=u,this._data.frameFloatArray=p,this._data.frameArray=c,this._data.timelineArray=d,this._data.colorArray=_,this._defaultColorOffset=-1},n.prototype.parseDragonBonesData=function(e,i){void 0===i&&(i=1),console.assert(null!==e&&void 0!==e,"Data error.");var a=n._getString(e,t.DataParser.VERSION,""),r=n._getString(e,t.DataParser.COMPATIBLE_VERSION,"");if(t.DataParser.DATA_VERSIONS.indexOf(a)>=0||t.DataParser.DATA_VERSIONS.indexOf(r)>=0){var s=t.BaseObject.borrowObject(t.DragonBonesData);if(s.version=a,s.name=n._getString(e,t.DataParser.NAME,""),s.frameRate=n._getNumber(e,t.DataParser.FRAME_RATE,24),0===s.frameRate&&(s.frameRate=24),t.DataParser.ARMATURE in e){this._data=s,this._parseArray(e);for(var o=0,h=e[t.DataParser.ARMATURE];o<h.length;o++){var l=h[o];s.addArmature(this._parseArmature(l,i))}this._data.binary||this._modifyArray(),t.DataParser.STAGE in e?s.stage=s.getArmature(n._getString(e,t.DataParser.STAGE,"")):s.armatureNames.length>0&&(s.stage=s.getArmature(s.armatureNames[0])),this._data=null}return t.DataParser.TEXTURE_ATLAS in e&&(this._rawTextureAtlases=e[t.DataParser.TEXTURE_ATLAS]),s}return console.assert(!1,"Nonsupport data version: "+a+"\nPlease convert DragonBones data to support version.\nRead more: https://github.com/DragonBones/Tools/"),null},n.prototype.parseTextureAtlasData=function(e,i,a){if(void 0===a&&(a=1),console.assert(void 0!==e),null===e){if(null===this._rawTextureAtlases||0===this._rawTextureAtlases.length)return!1;var r=this._rawTextureAtlases[this._rawTextureAtlasIndex++];return this.parseTextureAtlasData(r,i,a),this._rawTextureAtlasIndex>=this._rawTextureAtlases.length&&(this._rawTextureAtlasIndex=0,this._rawTextureAtlases=null),!0}if(i.width=n._getNumber(e,t.DataParser.WIDTH,0),i.height=n._getNumber(e,t.DataParser.HEIGHT,0),i.scale=1===a?1/n._getNumber(e,t.DataParser.SCALE,1):a,i.name=n._getString(e,t.DataParser.NAME,""),i.imagePath=n._getString(e,t.DataParser.IMAGE_PATH,""),t.DataParser.SUB_TEXTURE in e)for(var s=e[t.DataParser.SUB_TEXTURE],o=0,h=s.length;o<h;++o){var l=s[o],u=n._getNumber(l,t.DataParser.FRAME_WIDTH,-1),p=n._getNumber(l,t.DataParser.FRAME_HEIGHT,-1),c=i.createTexture();c.rotated=n._getBoolean(l,t.DataParser.ROTATED,!1),c.name=n._getString(l,t.DataParser.NAME,""),c.region.x=n._getNumber(l,t.DataParser.X,0),c.region.y=n._getNumber(l,t.DataParser.Y,0),c.region.width=n._getNumber(l,t.DataParser.WIDTH,0),c.region.height=n._getNumber(l,t.DataParser.HEIGHT,0),u>0&&p>0&&(c.frame=t.TextureData.createRectangle(),c.frame.x=n._getNumber(l,t.DataParser.FRAME_X,0),c.frame.y=n._getNumber(l,t.DataParser.FRAME_Y,0),c.frame.width=u,c.frame.height=p),i.addTexture(c)}return!0},n.getInstance=function(){return null===n._objectDataParserInstance&&(n._objectDataParserInstance=new n),n._objectDataParserInstance},n._objectDataParserInstance=null,n}(t.DataParser);t.ObjectDataParser=e;var i=function(){return function(){this.frameStart=0,this.actions=[]}}();t.ActionFrame=i}(dragonBones||(dragonBones={})),function(t){var e=function(e){function i(){return null!==e&&e.apply(this,arguments)||this}return __extends(i,e),i.prototype._inRange=function(t,e,i){return e<=t&&t<=i},i.prototype._decodeUTF8=function(t){for(var e,i=0,n="",a=0,r=0,s=0,o=0;t.length>i;){var h=t[i++];if(-1===h)e=0!==r?65533:-1;else if(0===r)this._inRange(h,0,127)?e=h:(this._inRange(h,194,223)?(r=1,o=128,a=h-192):this._inRange(h,224,239)?(r=2,o=2048,a=h-224):this._inRange(h,240,244)&&(r=3,o=65536,a=h-240),a*=Math.pow(64,r),e=null);else if(this._inRange(h,128,191))if(s+=1,a+=(h-128)*Math.pow(64,r-s),s!==r)e=null;else{var l=a,u=o;a=0,r=0,s=0,o=0,e=this._inRange(l,u,1114111)&&!this._inRange(l,55296,57343)?l:h}else a=0,r=0,s=0,o=0,i--,e=h;null!==e&&-1!==e&&(e<=65535?e>0&&(n+=String.fromCharCode(e)):(e-=65536,n+=String.fromCharCode(55296+(e>>10&1023)),n+=String.fromCharCode(56320+(1023&e))))}return n},i.prototype._parseBinaryTimeline=function(e,i,n){void 0===n&&(n=null);var a=null!==n?n:t.BaseObject.borrowObject(t.TimelineData);a.type=e,a.offset=i,this._timeline=a;var r=this._timelineArrayBuffer[a.offset+2];if(1===r)a.frameIndicesOffset=-1;else{var s,o=this._animation.frameCount+1,h=this._data.frameIndices;s=h.length,h.length+=o,a.frameIndicesOffset=s;for(var l=0,u=0,p=0,c=0;l<o;++l)p+c<=l&&u<r&&(p=this._frameArrayBuffer[this._animation.frameOffset+this._timelineArrayBuffer[a.offset+5+u]],c=u===r-1?this._animation.frameCount-p:this._frameArrayBuffer[this._animation.frameOffset+this._timelineArrayBuffer[a.offset+5+u+1]]-p,u++),h[s+l]=u-1}return this._timeline=null,a},i.prototype._parseAnimation=function(e){var i=t.BaseObject.borrowObject(t.AnimationData);i.blendType=t.DataParser._getAnimationBlendType(t.ObjectDataParser._getString(e,t.DataParser.BLEND_TYPE,"")),i.frameCount=t.ObjectDataParser._getNumber(e,t.DataParser.DURATION,0),i.playTimes=t.ObjectDataParser._getNumber(e,t.DataParser.PLAY_TIMES,1),i.duration=i.frameCount/this._armature.frameRate,i.fadeInTime=t.ObjectDataParser._getNumber(e,t.DataParser.FADE_IN_TIME,0),i.scale=t.ObjectDataParser._getNumber(e,t.DataParser.SCALE,1),i.name=t.ObjectDataParser._getString(e,t.DataParser.NAME,t.DataParser.DEFAULT_NAME),0===i.name.length&&(i.name=t.DataParser.DEFAULT_NAME);var n=e[t.DataParser.OFFSET];if(i.frameIntOffset=n[0],i.frameFloatOffset=n[1],i.frameOffset=n[2],this._animation=i,t.DataParser.ACTION in e&&(i.actionTimeline=this._parseBinaryTimeline(0,e[t.DataParser.ACTION])),t.DataParser.Z_ORDER in e&&(i.zOrderTimeline=this._parseBinaryTimeline(1,e[t.DataParser.Z_ORDER])),t.DataParser.BONE in e){var a=e[t.DataParser.BONE];for(var r in a){var s=a[r],o=this._armature.getBone(r);if(null!==o)for(var h=0,l=s.length;h<l;h+=2){var u=s[h],p=s[h+1],c=this._parseBinaryTimeline(u,p);this._animation.addBoneTimeline(o.name,c)}}}if(t.DataParser.SLOT in e){a=e[t.DataParser.SLOT];for(var r in a){s=a[r];var d=this._armature.getSlot(r);if(null!==d)for(h=0,l=s.length;h<l;h+=2){u=s[h],p=s[h+1],c=this._parseBinaryTimeline(u,p);this._animation.addSlotTimeline(d.name,c)}}}if(t.DataParser.CONSTRAINT in e){a=e[t.DataParser.CONSTRAINT];for(var r in a){s=a[r];var _=this._armature.getConstraint(r);if(null!==_)for(h=0,l=s.length;h<l;h+=2){u=s[h],p=s[h+1],c=this._parseBinaryTimeline(u,p);this._animation.addConstraintTimeline(_.name,c)}}}if(t.DataParser.TIMELINE in e)for(var f=0,m=s=e[t.DataParser.TIMELINE];f<m.length;f++){var g=m[f];if((p=t.ObjectDataParser._getNumber(g,t.DataParser.OFFSET,0))>=0){u=t.ObjectDataParser._getNumber(g,t.DataParser.TYPE,0);var y=t.ObjectDataParser._getString(g,t.DataParser.NAME,"");c=null;if(40===u&&0!==i.blendType){var b=c=t.BaseObject.borrowObject(t.AnimationTimelineData);b.x=t.ObjectDataParser._getNumber(g,t.DataParser.X,0),b.y=t.ObjectDataParser._getNumber(g,t.DataParser.Y,0)}switch(c=this._parseBinaryTimeline(u,p,c),u){case 0:case 1:break;case 11:case 12:case 13:case 50:case 60:this._animation.addBoneTimeline(y,c);break;case 20:case 21:case 22:case 23:case 24:this._animation.addSlotTimeline(y,c);break;case 30:this._animation.addConstraintTimeline(y,c);break;case 40:case 41:case 42:this._animation.addAnimationTimeline(y,c)}}}return this._animation=null,i},i.prototype._parseGeometry=function(e,i){i.offset=e[t.DataParser.OFFSET],i.data=this._data;var n=this._intArrayBuffer[i.offset+3];if(n>=0){var a=t.BaseObject.borrowObject(t.WeightData),r=this._intArrayBuffer[i.offset+0],s=this._intArrayBuffer[n+0];a.offset=n;for(var o=0;o<s;++o){var h=this._intArrayBuffer[n+2+o];a.addBone(this._rawBones[h])}for(var l=n+2+s,u=0,p=(o=0,r);o<p;++o){var c=this._intArrayBuffer[l++];u+=c,l+=c}a.count=u,i.weight=a}},i.prototype._parseArray=function(e){var i=e[t.DataParser.OFFSET],n=i[1],a=i[3],r=i[5],s=i[7],o=i[9],h=i[11],l=i.length>12?i[13]:0,u=new Int16Array(this._binary,this._binaryOffset+i[0],n/Int16Array.BYTES_PER_ELEMENT),p=new Float32Array(this._binary,this._binaryOffset+i[2],a/Float32Array.BYTES_PER_ELEMENT),c=new Int16Array(this._binary,this._binaryOffset+i[4],r/Int16Array.BYTES_PER_ELEMENT),d=new Float32Array(this._binary,this._binaryOffset+i[6],s/Float32Array.BYTES_PER_ELEMENT),_=new Int16Array(this._binary,this._binaryOffset+i[8],o/Int16Array.BYTES_PER_ELEMENT),f=new Uint16Array(this._binary,this._binaryOffset+i[10],h/Uint16Array.BYTES_PER_ELEMENT),m=l>0?new Int16Array(this._binary,this._binaryOffset+i[12],l/Int16Array.BYTES_PER_ELEMENT):u;this._data.binary=this._binary,this._data.intArray=this._intArrayBuffer=u,this._data.floatArray=p,this._data.frameIntArray=c,this._data.frameFloatArray=d,this._data.frameArray=this._frameArrayBuffer=_,this._data.timelineArray=this._timelineArrayBuffer=f,this._data.colorArray=m},i.prototype.parseDragonBonesData=function(t,i){void 0===i&&(i=1),console.assert(null!==t&&void 0!==t&&t instanceof ArrayBuffer,"Data error.");var n=new Uint8Array(t,0,8);if(n[0]!=="D".charCodeAt(0)||n[1]!=="B".charCodeAt(0)||n[2]!=="D".charCodeAt(0)||n[3]!=="T".charCodeAt(0))return console.assert(!1,"Nonsupport data."),null;var a=new Uint32Array(t,8,1)[0],r=new Uint8Array(t,12,a),s=this._decodeUTF8(r),o=JSON.parse(s);return this._binaryOffset=12+a,this._binary=t,e.prototype.parseDragonBonesData.call(this,o,i)},i.getInstance=function(){return null===i._binaryDataParserInstance&&(i._binaryDataParserInstance=new i),i._binaryDataParserInstance},i._binaryDataParserInstance=null,i}(t.ObjectDataParser);t.BinaryDataParser=e}(dragonBones||(dragonBones={})),function(t){var e=function(){function e(i){void 0===i&&(i=null),this.autoSearch=!1,this._dragonBonesDataMap={},this._textureAtlasDataMap={},this._dragonBones=null,this._dataParser=null,null===e._objectParser&&(e._objectParser=new t.ObjectDataParser),null===e._binaryParser&&(e._binaryParser=new t.BinaryDataParser),this._dataParser=null!==i?i:e._objectParser}return e.prototype._isSupportMesh=function(){return!0},e.prototype._getTextureData=function(t,e){if(t in this._textureAtlasDataMap)for(var i=0,n=this._textureAtlasDataMap[t];i<n.length;i++){if(null!==(h=(o=n[i]).getTexture(e)))return h}if(this.autoSearch)for(var a in this._textureAtlasDataMap)for(var r=0,s=this._textureAtlasDataMap[a];r<s.length;r++){var o,h;if((o=s[r]).autoSearch)if(null!==(h=o.getTexture(e)))return h}return null},e.prototype._fillBuildArmaturePackage=function(t,e,i,n,a){var r=null,s=null;if(e.length>0&&e in this._dragonBonesDataMap&&(s=(r=this._dragonBonesDataMap[e]).getArmature(i)),null===s&&(0===e.length||this.autoSearch))for(var o in this._dragonBonesDataMap)if(r=this._dragonBonesDataMap[o],(0===e.length||r.autoSearch)&&null!==(s=r.getArmature(i))){e=o;break}if(null!==s){if(t.dataName=e,t.textureAtlasName=a,t.data=r,t.armature=s,t.skin=null,n.length>0&&(t.skin=s.getSkin(n),null===t.skin&&this.autoSearch))for(var o in this._dragonBonesDataMap){var h=this._dragonBonesDataMap[o].getArmature(n);if(null!==h){t.skin=h.defaultSkin;break}}return null===t.skin&&(t.skin=s.defaultSkin),!0}return!1},e.prototype._buildBones=function(e,i){for(var n=0,a=e.armature.sortedBones;n<a.length;n++){var r=a[n];t.BaseObject.borrowObject(0===r.type?t.Bone:t.Surface).init(r,i)}},e.prototype._buildSlots=function(t,e){var i=t.skin,n=t.armature.defaultSkin;if(null!==i&&null!==n){var a={};for(var r in n.displays){var s=n.getDisplays(r);a[r]=s}if(i!==n)for(var r in i.displays){s=i.getDisplays(r);a[r]=s}for(var o=0,h=t.armature.sortedSlots;o<h.length;o++){var l=h[o],u=l.name in a?a[l.name]:null,p=this._buildSlot(t,l,e);if(null!==u){p.displayFrameCount=u.length;for(var c=0,d=p.displayFrameCount;c<d;++c){var _=u[c];if(p.replaceRawDisplayData(_,c),null!==_){if(t.textureAtlasName.length>0){var f=this._getTextureData(t.textureAtlasName,_.path);p.replaceTextureData(f,c)}var m=this._getSlotDisplay(t,_,p);p.replaceDisplay(m,c)}else p.replaceDisplay(null)}}p._setDisplayIndex(l.displayIndex,!0)}}},e.prototype._buildConstraints=function(e,i){var n=e.armature.constraints;for(var a in n){var r=n[a];switch(r.type){case 0:var s=t.BaseObject.borrowObject(t.IKConstraint);s.init(r,i),i._addConstraint(s);break;case 1:var o=t.BaseObject.borrowObject(t.PathConstraint);o.init(r,i),i._addConstraint(o);break;default:var h=t.BaseObject.borrowObject(t.IKConstraint);h.init(r,i),i._addConstraint(h)}}},e.prototype._buildChildArmature=function(t,e,i){return this.buildArmature(i.path,null!==t?t.dataName:"","",null!==t?t.textureAtlasName:"")},e.prototype._getSlotDisplay=function(e,i,n){var a=null!==e?e.dataName:i.parent.parent.parent.name,r=null;switch(i.type){case 0:var s=i;null===s.texture&&(s.texture=this._getTextureData(a,i.path)),r=n.rawDisplay;break;case 2:var o=i;null===o.texture&&(o.texture=this._getTextureData(a,o.path)),r=this._isSupportMesh()?n.meshDisplay:n.rawDisplay;break;case 1:var h=i,l=this._buildChildArmature(e,n,h);if(null!==l){if(l.inheritAnimation=h.inheritAnimation,!l.inheritAnimation){var u=h.actions.length>0?h.actions:l.armatureData.defaultActions;if(u.length>0)for(var p=0,c=u;p<c.length;p++){var d=c[p],_=t.BaseObject.borrowObject(t.EventObject);t.EventObject.actionDataToInstance(d,_,n.armature),_.slot=n,n.armature._bufferAction(_,!1)}else l.animation.play()}h.armature=l.armatureData}r=l}return r},e.prototype.parseDragonBonesData=function(t,i,n){void 0===i&&(i=null),void 0===n&&(n=1);for(var a=t instanceof ArrayBuffer?e._binaryParser:this._dataParser,r=a.parseDragonBonesData(t,n);;){var s=this._buildTextureAtlasData(null,null);if(!a.parseTextureAtlasData(null,s,n)){s.returnToPool();break}this.addTextureAtlasData(s,i)}return null!==r&&this.addDragonBonesData(r,i),r},e.prototype.parseTextureAtlasData=function(t,e,i,n){void 0===i&&(i=null),void 0===n&&(n=1);var a=this._buildTextureAtlasData(null,null);return this._dataParser.parseTextureAtlasData(t,a,n),this._buildTextureAtlasData(a,e||null),this.addTextureAtlasData(a,i),a},e.prototype.updateTextureAtlases=function(t,e){var i=this.getTextureAtlasData(e);if(null!==i)for(var n=0,a=i.length;n<a;++n)n<t.length&&this._buildTextureAtlasData(i[n],t[n])},e.prototype.getDragonBonesData=function(t){return t in this._dragonBonesDataMap?this._dragonBonesDataMap[t]:null},e.prototype.addDragonBonesData=function(t,e){if(void 0===e&&(e=null),(e=null!==e?e:t.name)in this._dragonBonesDataMap){if(this._dragonBonesDataMap[e]===t)return;console.warn("Can not add same name data: "+e)}else this._dragonBonesDataMap[e]=t},e.prototype.removeDragonBonesData=function(t,e){void 0===e&&(e=!0),t in this._dragonBonesDataMap&&(e&&this._dragonBones.bufferObject(this._dragonBonesDataMap[t]),delete this._dragonBonesDataMap[t])},e.prototype.getTextureAtlasData=function(t){return t in this._textureAtlasDataMap?this._textureAtlasDataMap[t]:null},e.prototype.addTextureAtlasData=function(t,e){void 0===e&&(e=null);var i=(e=null!==e?e:t.name)in this._textureAtlasDataMap?this._textureAtlasDataMap[e]:this._textureAtlasDataMap[e]=[];i.indexOf(t)<0&&i.push(t)},e.prototype.removeTextureAtlasData=function(t,e){if(void 0===e&&(e=!0),t in this._textureAtlasDataMap){var i=this._textureAtlasDataMap[t];if(e)for(var n=0,a=i;n<a.length;n++){var r=a[n];this._dragonBones.bufferObject(r)}delete this._textureAtlasDataMap[t]}},e.prototype.getArmatureData=function(t,e){void 0===e&&(e="");var n=new i;return this._fillBuildArmaturePackage(n,e,t,"","")?n.armature:null},e.prototype.clear=function(t){for(var e in void 0===t&&(t=!0),this._dragonBonesDataMap)t&&this._dragonBones.bufferObject(this._dragonBonesDataMap[e]),delete this._dragonBonesDataMap[e];for(var e in this._textureAtlasDataMap){if(t)for(var i=0,n=this._textureAtlasDataMap[e];i<n.length;i++){var a=n[i];this._dragonBones.bufferObject(a)}delete this._textureAtlasDataMap[e]}},e.prototype.buildArmature=function(t,e,n,a){void 0===e&&(e=""),void 0===n&&(n=""),void 0===a&&(a="");var r=new i;if(!this._fillBuildArmaturePackage(r,e||"",t,n||"",a||""))return console.warn("No armature data: "+t+", "+(null!==e?e:"")),null;var s=this._buildArmature(r);return this._buildBones(r,s),this._buildSlots(r,s),this._buildConstraints(r,s),s.invalidUpdate(null,!0),s.advanceTime(0),s},e.prototype.replaceDisplay=function(t,e,i){if(void 0===i&&(i=-1),i<0&&(i=t.displayIndex),i<0&&(i=0),t.replaceDisplayData(e,i),null!==e){var n=this._getSlotDisplay(null,e,t);if(0===e.type){var a=t.getDisplayFrameAt(i).rawDisplayData;null!==a&&2===a.type&&(n=t.meshDisplay)}t.replaceDisplay(n,i)}else t.replaceDisplay(null,i)},e.prototype.replaceSlotDisplay=function(t,e,i,n,a,r){void 0===r&&(r=-1);var s=this.getArmatureData(e,t||"");if(null===s||null===s.defaultSkin)return!1;var o=s.defaultSkin.getDisplay(i,n);return this.replaceDisplay(a,o,r),!0},e.prototype.replaceSlotDisplayList=function(t,e,i,n){var a=this.getArmatureData(e,t||"");if(!a||!a.defaultSkin)return!1;var r=a.defaultSkin.getDisplays(i);if(!r)return!1;n.displayFrameCount=r.length;for(var s=0,o=n.displayFrameCount;s<o;++s){var h=r[s];this.replaceDisplay(n,h,s)}return!0},e.prototype.replaceSkin=function(t,e,i,n){void 0===i&&(i=!1),void 0===n&&(n=null);for(var a=!1,r=e.parent.defaultSkin,s=0,o=t.getSlots();s<o.length;s++){var h=o[s];if(!(null!==n&&n.indexOf(h.name)>=0)){var l=e.getDisplays(h.name);if(null!==l||(null!==r&&e!==r&&(l=r.getDisplays(h.name)),null!==l)){h.displayFrameCount=l.length;for(var u=0,p=h.displayFrameCount;u<p;++u){var c=l[u];h.replaceRawDisplayData(c,u),null!==c?h.replaceDisplay(this._getSlotDisplay(null,c,h),u):h.replaceDisplay(null,u)}a=!0}else i&&(h.displayFrameCount=0)}}return a},e.prototype.replaceAnimation=function(e,i,n){void 0===n&&(n=!0);var a=i.defaultSkin;if(null===a)return!1;if(n)e.animation.animations=i.animations;else{var r=e.animation.animations,s={};for(var o in r)s[o]=r[o];for(var o in i.animations)s[o]=i.animations[o];e.animation.animations=s}for(var h=0,l=e.getSlots();h<l.length;h++)for(var u=l[h],p=0,c=0,d=u.displayList;c<d.length;c++){var _=d[c];if(_ instanceof t.Armature){var f=a.getDisplays(u.name);if(null!==f&&p<f.length){var m=f[p];if(null!==m&&1===m.type){var g=this.getArmatureData(m.path,m.parent.parent.parent.name);g&&this.replaceAnimation(_,g,n)}}}p++}return!0},e.prototype.getAllDragonBonesData=function(){return this._dragonBonesDataMap},e.prototype.getAllTextureAtlasData=function(){return this._textureAtlasDataMap},Object.defineProperty(e.prototype,"clock",{get:function(){return this._dragonBones.clock},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"dragonBones",{get:function(){return this._dragonBones},enumerable:!0,configurable:!0}),e._objectParser=null,e._binaryParser=null,e}();t.BaseFactory=e;var i=function(){return function(){this.dataName="",this.textureAtlasName="",this.skin=null}}();t.BuildArmaturePackage=i}(dragonBones||(dragonBones={})),function(t){var e=function(e){function n(){var t=null!==e&&e.apply(this,arguments)||this;return t._renderTexture=null,t}return __extends(n,e),n.toString=function(){return"[class dragonBones.PixiTextureAtlasData]"},n.prototype._onClear=function(){e.prototype._onClear.call(this),this._renderTexture,this._renderTexture=null},n.prototype.createTexture=function(){return t.BaseObject.borrowObject(i)},Object.defineProperty(n.prototype,"renderTexture",{get:function(){return this._renderTexture},set:function(t){if(this._renderTexture!==t)if(this._renderTexture=t,null!==this._renderTexture)for(var e in this.textures){(i=this.textures[e]).renderTexture=new PIXI.Texture(this._renderTexture,new PIXI.Rectangle(i.region.x,i.region.y,i.region.width,i.region.height),new PIXI.Rectangle(i.region.x,i.region.y,i.region.width,i.region.height),new PIXI.Rectangle(0,0,i.region.width,i.region.height),i.rotated)}else for(var e in this.textures){var i;(i=this.textures[e]).renderTexture=null}},enumerable:!0,configurable:!0}),n}(t.TextureAtlasData);t.PixiTextureAtlasData=e;var i=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.renderTexture=null,e}return __extends(e,t),e.toString=function(){return"[class dragonBones.PixiTextureData]"},e.prototype._onClear=function(){t.prototype._onClear.call(this),null!==this.renderTexture&&this.renderTexture.destroy(!1),this.renderTexture=null},e}(t.TextureData);t.PixiTextureData=i}(dragonBones||(dragonBones={})),function(t){var e=function(e){function i(){var t=null!==e&&e.apply(this,arguments)||this;return t.debugDraw=!1,t._debugDraw=!1,t._armature=null,t._debugDrawer=null,t}return __extends(i,e),i.prototype.dbInit=function(t){this._armature=t},i.prototype.dbClear=function(){null!==this._debugDrawer&&this._debugDrawer.destroy({children:!0,texture:!0,baseTexture:!0}),this._armature=null,this._debugDrawer=null,e.prototype.destroy.call(this)},i.prototype.dbUpdate=function(){var e=t.DragonBones.debugDraw||this.debugDraw;if(e||this._debugDraw)if(this._debugDraw=e,this._debugDraw){if(null===this._debugDrawer){this._debugDrawer=new PIXI.Sprite(PIXI.Texture.EMPTY);var i=new PIXI.Graphics;this._debugDrawer.addChild(i)}this.addChild(this._debugDrawer);var n=this._debugDrawer.getChildAt(0);n.clear();for(var a=this._armature.getBones(),r=0,s=a.length;r<s;++r){var o=a[r],h=o.boneData.length,l=o.globalTransformMatrix.tx,u=o.globalTransformMatrix.ty,p=l+o.globalTransformMatrix.a*h,c=u+o.globalTransformMatrix.b*h;n.lineStyle(2,65535,.7),n.moveTo(l,u),n.lineTo(p,c),n.lineStyle(0,0,0),n.beginFill(65535,.7),n.drawCircle(l,u,3),n.endFill()}var d=this._armature.getSlots();for(r=0,s=d.length;r<s;++r){var _=d[r],f=_.boundingBoxData;if(f){switch((I=this._debugDrawer.getChildByName(_.name))||((I=new PIXI.Graphics).name=_.name,this._debugDrawer.addChild(I)),I.clear(),I.lineStyle(2,16711935,.7),f.type){case 0:I.drawRect(.5*-f.width,.5*-f.height,f.width,f.height);break;case 1:I.drawEllipse(.5*-f.width,.5*-f.height,f.width,f.height);break;case 2:for(var m=f.vertices,g=0,y=m.length;g<y;g+=2){var b=m[g],v=m[g+1];0===g?I.moveTo(b,v):I.lineTo(b,v)}I.lineTo(m[0],m[1])}I.endFill(),_.updateTransformAndMatrix(),_.updateGlobalTransform();var T=_.global;I.setTransform(T.x,T.y,T.scaleX,T.scaleY,T.rotation,T.skew,0,_._pivotX,_._pivotY)}else{var I;(I=this._debugDrawer.getChildByName(_.name))&&this._debugDrawer.removeChild(I)}}}else null!==this._debugDrawer&&this._debugDrawer.parent===this&&this.removeChild(this._debugDrawer)},i.prototype.dispose=function(t){void 0===t&&(t=!0),null!==this._armature&&(this._armature.dispose(),this._armature=null)},i.prototype.destroy=function(){this.dispose()},i.prototype.dispatchDBEvent=function(t,e){this.emit(t,e)},i.prototype.hasDBEventListener=function(t){return this.listenerCount(t)>0},i.prototype.addDBEventListener=function(t,e,i){this.addListener(t,e,i)},i.prototype.removeDBEventListener=function(t,e,i){this.removeListener(t,e,i)},Object.defineProperty(i.prototype,"armature",{get:function(){return this._armature},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"animation",{get:function(){return this._armature.animation},enumerable:!0,configurable:!0}),i}(PIXI.Sprite);t.PixiArmatureDisplay=e}(dragonBones||(dragonBones={})),function(t){var e=function(e){function i(){return null!==e&&e.apply(this,arguments)||this}return __extends(i,e),i.toString=function(){return"[class dragonBones.PixiSlot]"},i.prototype._onClear=function(){e.prototype._onClear.call(this),this._textureScale=1,this._renderDisplay=null,this._updateTransform="3"===PIXI.VERSION[0]?this._updateTransformV3:this._updateTransformV4},i.prototype._initDisplay=function(t,e){},i.prototype._disposeDisplay=function(t,e){e||t.destroy()},i.prototype._onUpdateDisplay=function(){this._renderDisplay=this._display?this._display:this._rawDisplay},i.prototype._addDisplay=function(){this._armature.display.addChild(this._renderDisplay)},i.prototype._replaceDisplay=function(t){var e=this._armature.display,i=t;e.addChild(this._renderDisplay),e.swapChildren(this._renderDisplay,i),e.removeChild(i),this._textureScale=1},i.prototype._removeDisplay=function(){this._renderDisplay.parent.removeChild(this._renderDisplay)},i.prototype._updateZOrder=function(){var t=this._armature.display;t.getChildIndex(this._renderDisplay)!==this._zOrder&&t.addChildAt(this._renderDisplay,this._zOrder)},i.prototype._updateVisible=function(){this._renderDisplay.visible=this._parent.visible&&this._visible},i.prototype._updateBlendMode=function(){if(this._renderDisplay instanceof PIXI.Sprite)switch(this._blendMode){case 0:this._renderDisplay.blendMode=PIXI.BLEND_MODES.NORMAL;break;case 1:this._renderDisplay.blendMode=PIXI.BLEND_MODES.ADD;break;case 3:this._renderDisplay.blendMode=PIXI.BLEND_MODES.DARKEN;break;case 4:this._renderDisplay.blendMode=PIXI.BLEND_MODES.DIFFERENCE;break;case 6:this._renderDisplay.blendMode=PIXI.BLEND_MODES.HARD_LIGHT;break;case 9:this._renderDisplay.blendMode=PIXI.BLEND_MODES.LIGHTEN;break;case 10:this._renderDisplay.blendMode=PIXI.BLEND_MODES.MULTIPLY;break;case 11:this._renderDisplay.blendMode=PIXI.BLEND_MODES.OVERLAY;break;case 12:this._renderDisplay.blendMode=PIXI.BLEND_MODES.SCREEN}},i.prototype._updateColor=function(){var t=this._colorTransform.alphaMultiplier*this._globalAlpha;if(this._renderDisplay.alpha=t,this._renderDisplay instanceof PIXI.Sprite||this._renderDisplay instanceof PIXI.SimpleMesh){var e=(Math.round(255*this._colorTransform.redMultiplier)<<16)+(Math.round(255*this._colorTransform.greenMultiplier)<<8)+Math.round(255*this._colorTransform.blueMultiplier);this._renderDisplay.tint=e}},i.prototype._updateFrame=function(){var e=this._textureData;if(this._displayIndex>=0&&null!==this._display&&null!==e){var i=e.parent;null!==this._armature.replacedTexture&&(null===this._armature._replaceTextureAtlasData?((i=t.BaseObject.borrowObject(t.PixiTextureAtlasData)).copyFrom(e.parent),i.renderTexture=this._armature.replacedTexture,this._armature._replaceTextureAtlasData=i):i=this._armature._replaceTextureAtlasData,e=i.getTexture(e.name));var n=e.renderTexture;if(null!==n){if(null!==this._geometryData){var a=this._geometryData.data,r=a.intArray,s=a.floatArray,o=r[this._geometryData.offset+0],h=r[this._geometryData.offset+1],l=r[this._geometryData.offset+2];l<0&&(l+=65536);for(var u=l+2*o,p=this._armature._armatureData.scale,c=this._renderDisplay,d=new Float32Array(2*o),_=new Float32Array(2*o),f=new Uint16Array(3*h),m=0,g=2*o;m<g;++m)d[m]=s[l+m]*p;for(m=0;m<3*h;++m)f[m]=r[this._geometryData.offset+4+m];for(m=0,g=2*o;m<g;m+=2){var y=s[u+m],b=s[u+m+1];e.rotated?(_[m]=1-b,_[m+1]=y):(_[m]=y,_[m+1]=b)}this._textureScale=1,c.texture=n,c.vertices=d,c.uvBuffer.update(_),c.geometry.addIndex(f);var v=null!==this._geometryData.weight,T=0!==this._parent._boneData.type;(v||T)&&this._identityTransform()}else{var I;this._textureScale=e.parent.scale*this._armature._armatureData.scale,(I=this._renderDisplay).texture=n}return void(this._visibleDirty=!0)}}null!==this._geometryData?((c=this._renderDisplay).texture=null,c.x=0,c.y=0,c.visible=!1):((I=this._renderDisplay).texture=null,I.x=0,I.y=0,I.visible=!1)},i.prototype._updateMesh=function(){var t=this._armature._armatureData.scale,e=this._displayFrame.deformVertices,i=this._geometryBones,n=this._geometryData,a=n.weight,r=e.length>0&&n.inheritDeform,s=this._renderDisplay;if(null!==a){var o=(A=n.data).intArray,h=A.floatArray,l=o[n.offset+0],u=o[a.offset+1];u<0&&(u+=65536);for(var p=0,c=0,d=a.offset+2+i.length,_=u,f=0;p<l;++p){for(var m=o[d++],g=0,y=0,b=0;b<m;++b){var v=i[o[d++]];if(null!==v){var T=v.globalTransformMatrix,I=h[_++],P=h[_++]*t,S=h[_++]*t;r&&(P+=e[f++],S+=e[f++]),g+=(T.a*P+T.c*S+T.tx)*I,y+=(T.b*P+T.d*S+T.ty)*I}}s.vertices[c++]=g,s.vertices[c++]=y}}else{var A,D=0!==this._parent._boneData.type,x=(o=(A=n.data).intArray,h=A.floatArray,l=o[n.offset+0],o[n.offset+2]);x<0&&(x+=65536);p=0;for(var w=2*l;p<w;p+=2){var O=h[x+p]*t,E=h[x+p+1]*t;if(r&&(O+=e[p],E+=e[p+1]),D){T=this._parent._getGlobalTransformMatrix(O,E);s.vertices[p]=T.a*O+T.c*E+T.tx,s.vertices[p+1]=T.b*O+T.d*E+T.ty}else s.vertices[p]=O,s.vertices[p+1]=E}}},i.prototype._updateTransform=function(){throw new Error},i.prototype._updateTransformV3=function(){this.updateGlobalTransform();var t=this.global;if(this._renderDisplay===this._rawDisplay||this._renderDisplay===this._meshDisplay){var e=t.x-(this.globalTransformMatrix.a*this._pivotX+this.globalTransformMatrix.c*this._pivotY),i=t.y-(this.globalTransformMatrix.b*this._pivotX+this.globalTransformMatrix.d*this._pivotY);this._renderDisplay.setTransform(e,i,t.scaleX*this._textureScale,t.scaleY*this._textureScale,t.rotation,t.skew,0)}else this._renderDisplay.position.set(t.x,t.y),this._renderDisplay.rotation=t.rotation,this._renderDisplay.skew.set(t.skew,0),this._renderDisplay.scale.set(t.scaleX,t.scaleY)},i.prototype._updateTransformV4=function(){this.updateGlobalTransform();var t=this.global;if(this._renderDisplay===this._rawDisplay||this._renderDisplay===this._meshDisplay){var e=t.x-(this.globalTransformMatrix.a*this._pivotX+this.globalTransformMatrix.c*this._pivotY),i=t.y-(this.globalTransformMatrix.b*this._pivotX+this.globalTransformMatrix.d*this._pivotY);this._renderDisplay.setTransform(e,i,t.scaleX*this._textureScale,t.scaleY*this._textureScale,t.rotation,-t.skew,0)}else this._renderDisplay.position.set(t.x,t.y),this._renderDisplay.rotation=t.rotation,this._renderDisplay.skew.set(-t.skew,0),this._renderDisplay.scale.set(t.scaleX,t.scaleY)},i.prototype._identityTransform=function(){this._renderDisplay.setTransform(0,0,1,1,0,0,0)},i}(t.Slot);t.PixiSlot=e}(dragonBones||(dragonBones={})),function(t){var e=function(e){function i(n,a){void 0===n&&(n=null),void 0===a&&(a=!0);var r=e.call(this,n)||this;if(null===i._dragonBonesInstance){var s=new t.PixiArmatureDisplay(PIXI.Texture.EMPTY);i._dragonBonesInstance=new t.DragonBones(s),a&&PIXI.Ticker.shared.add(i._clockHandler,i)}return r._dragonBones=i._dragonBonesInstance,r}return __extends(i,e),i._clockHandler=function(t){this._dragonBonesInstance.advanceTime(t/PIXI.settings.TARGET_FPMS*.001)},i.advanceTime=function(t){this._dragonBonesInstance.advanceTime(t)},Object.defineProperty(i,"factory",{get:function(){return null===i._factory&&(i._factory=new i(null,i.useSharedTicker)),i._factory},enumerable:!0,configurable:!0}),i.newInstance=function(t){return void 0===t&&(t=!0),null===i._factory&&(i._factory=new i(null,t)),i._factory},i.prototype._buildTextureAtlasData=function(e,i){return e?e.renderTexture=i:e=t.BaseObject.borrowObject(t.PixiTextureAtlasData),e},i.prototype._buildArmature=function(e){var i=t.BaseObject.borrowObject(t.Armature),n=new t.PixiArmatureDisplay(PIXI.Texture.EMPTY);return i.init(e.armature,n,n,this._dragonBones),i},i.prototype._buildSlot=function(e,i,n){var a=t.BaseObject.borrowObject(t.PixiSlot);return a.init(i,n,new PIXI.Sprite(PIXI.Texture.EMPTY),new PIXI.SimpleMesh),a},i.prototype.buildArmatureDisplay=function(t,e,i,n){void 0===e&&(e=""),void 0===i&&(i=""),void 0===n&&(n="");var a=this.buildArmature(t,e||"",i||"",n||"");return null!==a?(this._dragonBones.clock.add(a),a.display):null},i.prototype.getTextureDisplay=function(t,e){void 0===e&&(e=null);var i=this._getTextureData(null!==e?e:"",t);return null!==i&&null!==i.renderTexture?new PIXI.Sprite(i.renderTexture):null},Object.defineProperty(i.prototype,"soundEventManager",{get:function(){return this._dragonBones.eventManager},enumerable:!0,configurable:!0}),i._dragonBonesInstance=null,i._factory=null,i.useSharedTicker=!0,i}(t.BaseFactory);t.PixiFactory=e}(dragonBones||(dragonBones={}));var __filters=function(t,e,i){var n="attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\n\nuniform mat3 projectionMatrix;\n\nvarying vec2 vTextureCoord;\n\nvoid main(void)\n{\n    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n    vTextureCoord = aTextureCoord;\n}",a="varying vec2 vTextureCoord;\nvarying vec4 vColor;\n\nuniform sampler2D uSampler;\n\nuniform float outerStrength;\nuniform float innerStrength;\n\nuniform vec4 glowColor;\n\nuniform vec4 filterArea;\nuniform vec4 filterClamp;\nuniform bool knockout;\n\nconst float PI = 3.14159265358979323846264;\n\nconst float DIST = __DIST__;\nconst float ANGLE_STEP_SIZE = min(__ANGLE_STEP_SIZE__, PI * 2.0);\nconst float ANGLE_STEP_NUM = ceil(PI * 2.0 / ANGLE_STEP_SIZE);\n\nconst float MAX_TOTAL_ALPHA = ANGLE_STEP_NUM * DIST * (DIST + 1.0) / 2.0;\n\nvoid main(void) {\n    vec2 px = vec2(1.0 / filterArea.x, 1.0 / filterArea.y);\n\n    float totalAlpha = 0.0;\n\n    vec2 direction;\n    vec2 displaced;\n    vec4 curColor;\n\n    for (float angle = 0.0; angle < PI * 2.0; angle += ANGLE_STEP_SIZE) {\n       direction = vec2(cos(angle), sin(angle)) * px;\n\n       for (float curDistance = 0.0; curDistance < DIST; curDistance++) {\n           displaced = clamp(vTextureCoord + direction * \n                   (curDistance + 1.0), filterClamp.xy, filterClamp.zw);\n\n           curColor = texture2D(uSampler, displaced);\n\n           totalAlpha += (DIST - curDistance) * curColor.a;\n       }\n    }\n    \n    curColor = texture2D(uSampler, vTextureCoord);\n\n    float alphaRatio = (totalAlpha / MAX_TOTAL_ALPHA);\n\n    float innerGlowAlpha = (1.0 - alphaRatio) * innerStrength * curColor.a;\n    float innerGlowStrength = min(1.0, innerGlowAlpha);\n    \n    vec4 innerColor = mix(curColor, glowColor, innerGlowStrength);\n\n    float outerGlowAlpha = alphaRatio * outerStrength * (1. - curColor.a);\n    float outerGlowStrength = min(1.0 - innerColor.a, outerGlowAlpha);\n\n    vec4 outerGlowColor = outerGlowStrength * glowColor.rgba;\n    \n    if (knockout) {\n      float resultAlpha = outerGlowAlpha + innerGlowAlpha;\n      gl_FragColor = vec4(glowColor.rgb * resultAlpha, resultAlpha);\n    }\n    else {\n      gl_FragColor = innerColor + outerGlowColor;\n    }\n}\n",r=function(t){function e(i){var r=Object.assign({},e.defaults,i),s=r.distance,o=r.outerStrength,h=r.innerStrength,l=r.color,u=r.knockout,p=r.quality;s=Math.round(s),t.call(this,n,a.replace(/__ANGLE_STEP_SIZE__/gi,""+(1/p/s).toFixed(7)).replace(/__DIST__/gi,s.toFixed(0)+".0")),this.uniforms.glowColor=new Float32Array([0,0,0,1]),Object.assign(this,{color:l,outerStrength:o,innerStrength:h,padding:s,knockout:u})}t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e;var r={color:{configurable:!0},outerStrength:{configurable:!0},innerStrength:{configurable:!0},knockout:{configurable:!0}};return r.color.get=function(){return i.rgb2hex(this.uniforms.glowColor)},r.color.set=function(t){i.hex2rgb(t,this.uniforms.glowColor)},r.outerStrength.get=function(){return this.uniforms.outerStrength},r.outerStrength.set=function(t){this.uniforms.outerStrength=t},r.innerStrength.get=function(){return this.uniforms.innerStrength},r.innerStrength.set=function(t){this.uniforms.innerStrength=t},r.knockout.get=function(){return this.uniforms.knockout},r.knockout.set=function(t){this.uniforms.knockout=t},Object.defineProperties(e.prototype,r),e}(e.Filter);return r.defaults={distance:10,outerStrength:4,innerStrength:0,color:16777215,quality:.1,knockout:!1},t.GlowFilter=r,t}({},PIXI,PIXI.utils);Object.assign(PIXI.filters,__filters);__filters=function(t,e,i){var n="attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\n\nuniform mat3 projectionMatrix;\n\nvarying vec2 vTextureCoord;\n\nvoid main(void)\n{\n    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n    vTextureCoord = aTextureCoord;\n}",a="varying vec2 vTextureCoord;\nuniform sampler2D uSampler;\n\nuniform vec2 thickness;\nuniform vec4 outlineColor;\nuniform vec4 filterClamp;\n\nconst float DOUBLE_PI = 3.14159265358979323846264 * 2.;\n\nvoid main(void) {\n    vec4 ownColor = texture2D(uSampler, vTextureCoord);\n    vec4 curColor;\n    float maxAlpha = 0.;\n    vec2 displaced;\n    for (float angle = 0.; angle <= DOUBLE_PI; angle += ${angleStep}) {\n        displaced.x = vTextureCoord.x + thickness.x * cos(angle);\n        displaced.y = vTextureCoord.y + thickness.y * sin(angle);\n        curColor = texture2D(uSampler, clamp(displaced, filterClamp.xy, filterClamp.zw));\n        maxAlpha = max(maxAlpha, curColor.a);\n    }\n    float resultAlpha = max(maxAlpha, ownColor.a);\n    gl_FragColor = vec4((ownColor.rgb + outlineColor.rgb * (1. - ownColor.a)) * resultAlpha, resultAlpha);\n}\n",r=function(t){function e(i,r,s){void 0===i&&(i=1),void 0===r&&(r=0),void 0===s&&(s=.1);var o=Math.max(s*e.MAX_SAMPLES,e.MIN_SAMPLES),h=(2*Math.PI/o).toFixed(7);t.call(this,n,a.replace(/\$\{angleStep\}/,h)),this.uniforms.thickness=new Float32Array([0,0]),this.thickness=i,this.uniforms.outlineColor=new Float32Array([0,0,0,1]),this.color=r,this.quality=s}t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e;var r={color:{configurable:!0}};return e.prototype.apply=function(t,e,i,n){this.uniforms.thickness[0]=this.thickness/e._frame.width,this.uniforms.thickness[1]=this.thickness/e._frame.height,t.applyFilter(this,e,i,n)},r.color.get=function(){return i.rgb2hex(this.uniforms.outlineColor)},r.color.set=function(t){i.hex2rgb(t,this.uniforms.outlineColor)},Object.defineProperties(e.prototype,r),e}(e.Filter);return r.MIN_SAMPLES=1,r.MAX_SAMPLES=100,t.OutlineFilter=r,t}({},PIXI,PIXI.utils);if(Object.assign(PIXI.filters,__filters),Array.matrix=function(t,e,i){var n,a,r,s=[];for(a=0;a<t;a+=1){for(n=[],r=0;r<e;r+=1)n[r]=i;s[a]=n}return s},Math.getDistance=function(t,e){return Math.sqrt(Math.pow(e.x-t.x,2)+Math.pow(e.y-t.y,2))},Math.getAngle=function(t,e){return null===t||null===e?0:Math.atan2(e.y-t.y,e.x-t.x)},Math.getDistanceFromLine=function(t,e,i){var n=i.x-e.x,a=i.y-e.y,r=n*n+a*a,s=(t.x-e.x)*n+(t.y-e.y)*a,o=Math.min(1,Math.max(0,s/r));s=(i.x-e.x)*(t.y-e.y)-(i.y-e.y)*(t.x-e.x);var h={x:e.x+n*o,y:e.y+a*o};return Math.getDistance(t,h)},Math.insertionSort=function(t,e){for(var i,n,a=0;a<t.length;++a){for(n=t[a],i=a-1;i>=0&&e(t[i],n);--i)t[i+1]=t[i];t[i+1]=n}},Math.bubbleSort=function(t,e){var i;do{i=!1;for(var n=0;n<t.length-1;n++)if(e(t[n],t[n+1])){var a=t[n];t[n]=t[n+1],t[n+1]=a,i=!0}}while(i)},Math.degreesToRadians=function(t){return t/180*Math.PI},Math.radiansToDegrees=function(t){return 180*t/Math.PI},Math.randomFloat=function(t,e){return t+Math.random()*(e-t)},Math.randomInt=function(t,e){return Math.floor(t+Math.random()*(e-t+1))},Math.inRange=function(t,e,i){return t>=Math.min(e,i)&&t<=Math.max(e,i)},Math.normalize=function(t,e,i){return(t-e)/(i-e)},Math.lerp=function(t,e,i){return(i-e)*t+e},Math.map=function(t,e,i,n,a){return Math.lerp(Math.normalize(t,e,i),n,a)},Math.clamp=function(t,e,i){return Math.min(Math.max(t,Math.min(e,i)),Math.max(e,i))},Math.roundDecimal=function(t,e){var i=Math.pow(10,e);return Math.round(t*i)/i},void 0===log){function log(t){console.log(t)}}function trace(t){console.trace(t)}function generateString(t,e){var i="",n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789";e&&(n=" "+n+" ");for(var a=n.length,r=0;r<t;r++)i+=n.charAt(Math.floor(Math.random()*a));return i}function validateEmail(t){return!!/^[a-zA-Z0-9.!#$%&'*+/=?^_`{|}~-]+@[a-zA-Z0-9-]+(?:\.[a-zA-Z0-9-]+)*$/.test(t)}function toHHMMSS(t){var e=Math.floor(t/3600),i=Math.floor((t-3600*e)/60),n=t-3600*e-60*i;return e<10&&(e="0"+e),i<10&&(i="0"+i),n<10&&(n="0"+n),e+":"+i+":"+n}function toMMSS(t){var e=Math.floor(t/3600),i=Math.floor((t-3600*e)/60),n=t-3600*e-60*i;return e<10&&(e="0"+e),i<10&&(i="0"+i),n<10&&(n="0"+n),i+":"+n}function timeout(t,e,i,n){var a=new Timer(t,e,i);return n=n||0,a.run(n),a}function serialize(t,e){var i=[];for(var n in t)if(t.hasOwnProperty(n)){var a=e?e+"["+n+"]":n,r=t[n];i.push("object"==typeof r?serialize(r,a):encodeURIComponent(a)+"="+encodeURIComponent(r))}return i.join("&")}function createAjax(){return window.XMLHttpRequest?new XMLHttpRequest:new ActiveXObject("Microsoft.XMLHTTP")}function ajaxGet(t,e,i){var n=createAjax();if(i)for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&n.setRequestHeader(a,i[a]);n.onreadystatechange=function(){4===n.readyState&&(200===n.status?(n.getResponseHeader("content-type")||"").indexOf("json")>-1?e(JSON.parse(n.responseText),n):e(n.responseText,n):e&&e(null,n))},n.open("GET",t,!0),n.send()}function ajaxPost(t,e,i,n){var a=createAjax();if(a.onreadystatechange=function(){if(4===a.readyState)if(200===a.status){if(i)if((a.getResponseHeader("content-type")||"").indexOf("json")>-1){var t=a.responseText;try{t=JSON.parse(a.responseText)}catch(e){t=a.responseText}i(t,a)}else i(a.responseText,a)}else i&&i(null,a)},a.open("POST",t,!0),n)for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&a.setRequestHeader(r,n[r]);else a.setRequestHeader("Content-type","application/x-www-form-urlencoded");if(e instanceof FormData)a.send(e);else{var s=serialize(e);a.send(s)}}function lang(t){var e=Localization.instance().text[t];return e||t}function shuffleArray(t){for(var e,i,n=t.length;0!==n;)i=Math.floor(Math.random()*n),e=t[n-=1],t[n]=t[i],t[i]=e;return t}function treatAsUTC(t){var e=new Date(t);return e.setMinutes(e.getMinutes()-e.getTimezoneOffset()),e}function daysBetween(t,e){return(treatAsUTC(e)-treatAsUTC(t))/864e5}function createPointsInSpace(t,e,i,n,a){for(var r=a||250,s=0,o=[],h=new V(e/2,i/2),l=0;s<t;){var u=!0,p=new V(Math.randomInt(0,e),Math.randomInt(0,i));++l>1e3&&r--;for(var c=0;c<o.length;c++){var d=o[c];if(Math.getDistance(p,d)<r){u=!1;break}}n&&Math.getDistance(p,h)<350&&(u=!1),u&&(s++,o.push(p))}return o}function getQueryString(t){t=t.replace(/[\[]/,"\\[").replace(/[\]]/,"\\]");var e=new RegExp("[\\?&]"+t+"=([^&#]*)").exec(window.location.search);return null===e?"":decodeURIComponent(e[1].replace(/\+/g," "))}function leadingZeros(t,e){for(var i=t+"";i.length<e;)i="0"+i;return i}function shorten(t,e,i){for(var n="",a=[" ",",",".","!","?"],r=0,s=0;s<t.length;s++)if(n+=t[s],-1!==a.indexOf(t[s])&&(++r>=e||s>=i)){n+="...";break}return n}function googleAnalytics(t){app.device.isLocalhost?log("localhost pageview : "+t):window._gTagID?gtag("config",_gTagID,{page_path:t}):console.warn("SaberJS: You need to define a global variable _gTagID")}function inArray(t,e){return-1!==t.indexOf(e)}function convertColor(t){if("transparent"===t||"#ffffff"===t||"#FFFFFF"===t)return 16777215;var e=t||"";return e=e.replace("#","0x"),e=PIXI.utils.hex2rgb(e),Color.get_color_32(1,255*e[0],255*e[1],255*e[2])}function getDateByTimeZone(t){t=t||0;var e=new Date,i=e.getTime()+6e4*e.getTimezoneOffset();return new Date(i+36e5*t)}function isDateBetween(t,e,i){var n=new Date(t.getFullYear(),t.getMonth(),t.getDate());return n>=e&&n<=i}function applyToConstructor(t,e){var i=[null].concat(e);return new(t.bind.apply(t,i))}function uuid(){var t=(new Date).getTime();return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(e){var i=(t+16*Math.random())%16|0;return t=Math.floor(t/16),("x"===e?i:3&i|8).toString(16)})}function numberWithCommas(t){var e=t.toString().split(".");return e[0]=e[0].replace(/\B(?=(\d{3})+(?!\d))/g,","),e.join(".")}function isEmpty(t){for(var e in t)if(t.hasOwnProperty(e))return!1;return JSON.stringify(t)===JSON.stringify({})}String.prototype.endsWith=function(t){return-1!==this.indexOf(t,this.length-t.length)},String.prototype.startsWith=function(t){return 0===this.indexOf(t)},String.prototype.capitalize=function(){return this.charAt(0).toUpperCase()+this.slice(1)},Object.defineProperty(Array.prototype,"removeElement",{enumerable:!1,value:function(t){for(var e=0,i=0;i<this.length;i++)this[i]===t&&(this.splice(i,1),e++,i--);return e}}),Object.defineProperty(Array.prototype,"getRandom",{enumerable:!1,value:function(){return this[Math.randomInt(0,this.length-1)]}}),String.prototype.supplant=function(t){return this.replace(/{([^{}]*)}/g,function(e,i){var n=t[i];return"string"==typeof n||"number"==typeof n?n:e})},String.prototype.smartShort=function(t,e){if(e=e||20,0===t)return this.substr(0,e-3)+"...";var i=shorten(this,t,e);return i.length>e?this.smartShort(t-1,e):i},PIXI.DisplayObject.prototype.zIndex=0,PIXI.DisplayObject.prototype.tag="",PIXI.DisplayObject.prototype.id="",PIXI.Text.prototype.setText=function(t){this.text=t},PIXI.Sprite.prototype.setTexture=function(t){this.texture=t},PIXI.DisplayObject.prototype.removeFromParent=function(){this.parent&&this.parent.removeChild(this)},PIXI.DisplayObject.prototype.stretch=function(t,e){this.width=t,this.height=e},PIXI.DisplayObject.prototype.centered=function(){this.anchor.set(.5,.5)},PIXI.DisplayObject.prototype.onUpdate=function(t){},PIXI.DisplayObject.prototype.findById=function(t,e){e=e||this;for(var i=0;i<e.children.length;i++){var n=e.children[i];if(n.id===t)return n;var a=this._findById(t,n.children);if(a)return a}return null},PIXI.DisplayObject.prototype._findById=function(t,e){for(var i=0;i<e.length;i++){var n=e[i];if(n.id===t)return n;var a=this._findById(t,n.children);if(a)return a}return null},PIXI.DisplayObject.prototype.findByName=function(t,e){e=e||this.children;for(var i=0;i<e.length;i++){var n=e[i];if(n.name===t)return n;var a=this.findByName(t,n.children);if(a)return a}return null},PIXI.DisplayObject.prototype.findByTag=function(t,e,i){i=i||this.children,e=e||[];for(var n=0;n<i.length;n++){var a=i[n];a.tag==t&&e.push(a),this.findByTag(t,e,a.children)}return e.length?e:null},PIXI.DisplayObject.prototype.findByType=function(t,e,i){i=i||this.children,e=e||[];for(var n=0;n<i.length;n++){var a=i[n];a instanceof t&&e.push(a),this.findByType(t,e,a.children)}return e.length?e:null},PIXI.DisplayObject.prototype.findByCustom=function(t,e,i){i=i||this.children,e=e||[];for(var n=0;n<i.length;n++){var a=i[n];t(a)&&e.push(a),this.findByCustom(t,e,a.children)}return e.length?e:null},PIXI.DisplayObject.prototype.bringToFront=function(){var t=this.parent;t.setChildIndex(this,t.children.length-1)},PIXI.DisplayObject.prototype.pushToBack=function(){this.parent.setChildIndex(this,0)},PIXI.DisplayObject.prototype.fitTo=function(t,e){this.calculateBounds();var i=this.getLocalBounds(),n=i.width,a=i.height;this.scale.set(Math.min(t/n,e/a))},PIXI.DisplayObject.prototype.fillOut=function(t,e){this.calculateBounds();var i=this.getLocalBounds(),n=i.width,a=i.height,r=Math.max(t/n,e/a);this.scale.set(r,r)},PIXI.Text.prototype.setStyle=function(t){for(var e in t)t.hasOwnProperty(e)&&(this.style[e]=t[e])},PIXI.Point.prototype.copy=function(t){return this.x=t.x,this.y=t.y,this},PIXI.Point.prototype.add=function(t){return this.x+=t.x,this.y+=t.y,this},PIXI.Point.prototype.sub=function(t){return this.x-=t.x,this.y-=t.y,this},PIXI.Point.prototype.scale=function(t,e){return this.x*=t,this.y*=e||t,this},PIXI.Point.prototype.dot=function(t){return this.x*t.x+this.y*t.y},PIXI.Point.prototype.setLength=function(t){var e=Math.atan2(this.y,this.x);return this.x=Math.cos(e)*t,this.y=Math.sin(e)*t,this},PIXI.Point.prototype.getLength=function(){return Math.sqrt(this.x*this.x+this.y*this.y)},PIXI.Point.prototype.setAngle=function(t){var e=Math.sqrt(this.x*this.x+this.y*this.y);return this.x=Math.cos(t)*e,this.y=Math.sin(t)*e,this},PIXI.Point.prototype.getAngle=function(){return Math.atan2(this.y,this.x)},PIXI.Point.addition=function(t,e){return new PIXI.Point(t.x+e.x,t.y+e.y)},PIXI.Point.substruction=function(t,e){return new PIXI.Point(t.x-e.x,t.y-e.y)},PIXI.ObservablePoint.prototype.clone=function(){return new PIXI.Point(this.x,this.y)},this.PIXI=this.PIXI||{},this.PIXI.sound=function(t,e,i,n){var a=function(){function t(t,e){this._output=e,this._input=t}return Object.defineProperty(t.prototype,"destination",{get:function(){return this._input},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"filters",{get:function(){return this._filters},set:function(t){var e=this;if(this._filters&&(this._filters.forEach(function(t){t&&t.disconnect()}),this._filters=null,this._input.connect(this._output)),t&&t.length){this._filters=t.slice(0),this._input.disconnect();var i=null;t.forEach(function(t){null===i?e._input.connect(t.destination):i.connect(t.destination),i=t}),i.connect(this._output)}},enumerable:!0,configurable:!0}),t.prototype.destroy=function(){this.filters=null,this._input=null,this._output=null},t}(),r=function(){function t(t,e){this.init(t,e)}return t.prototype.init=function(t,e){this.destination=t,this.source=e||t},t.prototype.connect=function(t){this.source.connect(t)},t.prototype.disconnect=function(){this.source.disconnect()},t.prototype.destroy=function(){this.disconnect(),this.destination=null,this.source=null},t}(),s=function(t,e){return(s=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(t,e)};function o(t,e){function i(){this.constructor=t}s(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}var h,l=function(){return(l=Object.assign||function(t){for(var e,i=1,n=arguments.length;i<n;i++)for(var a in e=arguments[i])Object.prototype.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t}).apply(this,arguments)};function u(){return h}var p,c,d,_,f=function(){function t(){}return t.setParamValue=function(t,e){if(t.setValueAtTime){var i=u().context;t.setValueAtTime(e,i.audioContext.currentTime)}else t.value=e;return e},t}(),m=0,g=function(t){function i(e){var i=t.call(this)||this;return i.id=m++,i._media=null,i._paused=!1,i._muted=!1,i._elapsed=0,i.init(e),i}return o(i,t),i.prototype.set=function(t,e){if(void 0===this[t])throw new Error("Property with name "+t+" does not exist.");return this[t]=e,this},i.prototype.stop=function(){this._source&&(this._internalStop(),this.emit("stop"))},Object.defineProperty(i.prototype,"speed",{get:function(){return this._speed},set:function(t){this._speed=t,this.refresh(),this._update(!0)},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"volume",{get:function(){return this._volume},set:function(t){this._volume=t,this.refresh()},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"muted",{get:function(){return this._muted},set:function(t){this._muted=t,this.refresh()},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"loop",{get:function(){return this._loop},set:function(t){this._loop=t,this.refresh()},enumerable:!0,configurable:!0}),i.prototype.refresh=function(){if(this._source){var t=this._media.context,e=this._media.parent;this._source.loop=this._loop||e.loop;var i=t.volume*(t.muted?0:1),n=e.volume*(e.muted?0:1),a=this._volume*(this._muted?0:1);f.setParamValue(this._gain.gain,a*n*i),f.setParamValue(this._source.playbackRate,this._speed*e.speed*t.speed)}},i.prototype.refreshPaused=function(){var t=this._media.context,e=this._media.parent,i=this._paused||e.paused||t.paused;i!==this._pausedReal&&(this._pausedReal=i,i?(this._internalStop(),this.emit("paused")):(this.emit("resumed"),this.play({start:this._elapsed%this._duration,end:this._end,speed:this._speed,loop:this._loop,volume:this._volume})),this.emit("pause",i))},i.prototype.play=function(t){var e=t.start,i=t.end,n=t.speed,a=t.loop,r=t.volume,s=t.muted;this._paused=!1;var o=this._media.nodes.cloneBufferSource(),h=o.source,l=o.gain;this._source=h,this._gain=l,this._speed=n,this._volume=r,this._loop=!!a,this._muted=s,this.refresh();var u=this._source.buffer.duration;this._duration=u,this._end=i,this._lastUpdate=this._now(),this._elapsed=e,this._source.onended=this._onComplete.bind(this),this._loop?(this._source.loopEnd=i,this._source.loopStart=e,this._source.start(0,e)):i?this._source.start(0,e,i-e):this._source.start(0,e),this.emit("start"),this._update(!0),this._enabled=!0},i.prototype._toSec=function(t){return t>10&&(t/=1e3),t||0},Object.defineProperty(i.prototype,"_enabled",{set:function(t){e.Ticker.shared.remove(this._updateListener,this),t&&e.Ticker.shared.add(this._updateListener,this)},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"progress",{get:function(){return this._progress},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"paused",{get:function(){return this._paused},set:function(t){this._paused=t,this.refreshPaused()},enumerable:!0,configurable:!0}),i.prototype.destroy=function(){this.removeAllListeners(),this._internalStop(),this._gain&&(this._gain.disconnect(),this._gain=null),this._media&&(this._media.context.events.off("refresh",this.refresh,this),this._media.context.events.off("refreshPaused",this.refreshPaused,this),this._media=null),this._end=null,this._speed=1,this._volume=1,this._loop=!1,this._elapsed=0,this._duration=0,this._paused=!1,this._muted=!1,this._pausedReal=!1},i.prototype.toString=function(){return"[WebAudioInstance id="+this.id+"]"},i.prototype._now=function(){return this._media.context.audioContext.currentTime},i.prototype._updateListener=function(){this._update()},i.prototype._update=function(t){if(void 0===t&&(t=!1),this._source){var e=this._now(),i=e-this._lastUpdate;if(i>0||t){var n=this._source.playbackRate.value;this._elapsed+=i*n,this._lastUpdate=e;var a=this._duration,r=void 0;if(this._source.loopStart){var s=this._source.loopEnd-this._source.loopStart;r=(this._source.loopStart+this._elapsed%s)/a}else r=this._elapsed%a/a;this._progress=r,this.emit("progress",this._progress,a)}}},i.prototype.init=function(t){this._media=t,t.context.events.on("refresh",this.refresh,this),t.context.events.on("refreshPaused",this.refreshPaused,this)},i.prototype._internalStop=function(){this._source&&(this._enabled=!1,this._source.onended=null,this._source.stop(0),this._source.disconnect(),this._source=null)},i.prototype._onComplete=function(){this._source&&(this._enabled=!1,this._source.onended=null,this._source.disconnect()),this._source=null,this._progress=1,this.emit("progress",1,this._duration),this.emit("end",this)},i}(i.EventEmitter),y=function(t){function e(e){var i=this,n=e.audioContext,a=n.createBufferSource(),r=n.createGain(),s=n.createAnalyser();return a.connect(s),s.connect(r),r.connect(e.destination),(i=t.call(this,s,r)||this).context=e,i.bufferSource=a,i.gain=r,i.analyser=s,i}return o(e,t),Object.defineProperty(e.prototype,"script",{get:function(){return this._script||(this._script=this.context.audioContext.createScriptProcessor(e.BUFFER_SIZE),this._script.connect(this.context.destination)),this._script},enumerable:!0,configurable:!0}),e.prototype.destroy=function(){t.prototype.destroy.call(this),this.bufferSource.disconnect(),this._script&&this._script.disconnect(),this.gain.disconnect(),this.analyser.disconnect(),this.bufferSource=null,this._script=null,this.gain=null,this.analyser=null,this.context=null},e.prototype.cloneBufferSource=function(){var t=this.bufferSource,e=this.context.audioContext.createBufferSource();e.buffer=t.buffer,f.setParamValue(e.playbackRate,t.playbackRate.value),e.loop=t.loop;var i=this.context.audioContext.createGain();return e.connect(i),i.connect(this.destination),{source:e,gain:i}},Object.defineProperty(e.prototype,"bufferSize",{get:function(){return this.script.bufferSize},enumerable:!0,configurable:!0}),e.BUFFER_SIZE=0,e}(a),b=function(){function t(){}return t.prototype.init=function(t){this.parent=t,this._nodes=new y(this.context),this._source=this._nodes.bufferSource,this.source=t.options.source},t.prototype.destroy=function(){this.parent=null,this._nodes.destroy(),this._nodes=null,this._source=null,this.source=null},t.prototype.create=function(){return new g(this)},Object.defineProperty(t.prototype,"context",{get:function(){return this.parent.context},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"isPlayable",{get:function(){return!!this._source&&!!this._source.buffer},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"filters",{get:function(){return this._nodes.filters},set:function(t){this._nodes.filters=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"duration",{get:function(){return this._source.buffer.duration},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"buffer",{get:function(){return this._source.buffer},set:function(t){this._source.buffer=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"nodes",{get:function(){return this._nodes},enumerable:!0,configurable:!0}),t.prototype.load=function(t){this.source?this._decode(this.source,t):this.parent.url?this._loadUrl(t):t&&t(new Error("sound.url or sound.source must be set"))},t.prototype._loadUrl=function(t){var e=this,i=new XMLHttpRequest,n=this.parent.url;i.open("GET",n,!0),i.responseType="arraybuffer",i.onload=function(){e.source=i.response,e._decode(i.response,t)},i.send()},t.prototype._decode=function(t,e){var i=this;this.parent.context.decode(t,function(t,n){if(t)e&&e(t);else{i.parent.isLoaded=!0,i.buffer=n;var a=i.parent.autoPlayStart();e&&e(null,i.parent,a)}})},t}(),v=function(t){function e(){var n=this,a=window,r=new e.AudioContext,s=r.createDynamicsCompressor(),o=r.createAnalyser();return o.connect(s),s.connect(r.destination),(n=t.call(this,o,s)||this)._ctx=r,n._offlineCtx=new e.OfflineAudioContext(1,2,a.OfflineAudioContext?r.sampleRate:44100),n._unlocked=!1,n.compressor=s,n.analyser=o,n.events=new i.EventEmitter,n.volume=1,n.speed=1,n.muted=!1,n.paused=!1,"running"!==r.state&&(n._unlock(),n._unlock=n._unlock.bind(n),document.addEventListener("mousedown",n._unlock,!0),document.addEventListener("touchstart",n._unlock,!0),document.addEventListener("touchend",n._unlock,!0)),n}return o(e,t),e.prototype._unlock=function(){this._unlocked||(this.playEmptySound(),"running"===this._ctx.state&&(document.removeEventListener("mousedown",this._unlock,!0),document.removeEventListener("touchend",this._unlock,!0),document.removeEventListener("touchstart",this._unlock,!0),this._unlocked=!0))},e.prototype.playEmptySound=function(){var t=this._ctx.createBufferSource();t.buffer=this._ctx.createBuffer(1,1,22050),t.connect(this._ctx.destination),t.start(0,0,0),"suspended"===t.context.state&&t.context.resume()},Object.defineProperty(e,"AudioContext",{get:function(){var t=window;return t.AudioContext||t.webkitAudioContext||null},enumerable:!0,configurable:!0}),Object.defineProperty(e,"OfflineAudioContext",{get:function(){var t=window;return t.OfflineAudioContext||t.webkitOfflineAudioContext||null},enumerable:!0,configurable:!0}),e.prototype.destroy=function(){t.prototype.destroy.call(this);var e=this._ctx;void 0!==e.close&&e.close(),this.events.removeAllListeners(),this.analyser.disconnect(),this.compressor.disconnect(),this.analyser=null,this.compressor=null,this.events=null,this._offlineCtx=null,this._ctx=null},Object.defineProperty(e.prototype,"audioContext",{get:function(){return this._ctx},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"offlineContext",{get:function(){return this._offlineCtx},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"paused",{get:function(){return this._paused},set:function(t){t&&"running"===this._ctx.state?this._ctx.suspend():t||"suspended"!==this._ctx.state||this._ctx.resume(),this._paused=t},enumerable:!0,configurable:!0}),e.prototype.refresh=function(){this.events.emit("refresh")},e.prototype.refreshPaused=function(){this.events.emit("refreshPaused")},e.prototype.toggleMute=function(){return this.muted=!this.muted,this.refresh(),this.muted},e.prototype.togglePause=function(){return this.paused=!this.paused,this.refreshPaused(),this._paused},e.prototype.decode=function(t,e){this._offlineCtx.decodeAudioData(t,function(t){e(null,t)},function(t){e(new Error(t.message||"Unable to decode file"))})},e}(a),T={WebAudioMedia:b,WebAudioInstance:g,WebAudioNodes:y,WebAudioContext:v,WebAudioUtils:f},I={Filter:r,EqualizerFilter:function(t){function e(i,n,a,r,s,o,h,l,p,c){void 0===i&&(i=0),void 0===n&&(n=0),void 0===a&&(a=0),void 0===r&&(r=0),void 0===s&&(s=0),void 0===o&&(o=0),void 0===h&&(h=0),void 0===l&&(l=0),void 0===p&&(p=0),void 0===c&&(c=0);var d=this;if(!u().useLegacy){var _=[{f:e.F32,type:"lowshelf",gain:i},{f:e.F64,type:"peaking",gain:n},{f:e.F125,type:"peaking",gain:a},{f:e.F250,type:"peaking",gain:r},{f:e.F500,type:"peaking",gain:s},{f:e.F1K,type:"peaking",gain:o},{f:e.F2K,type:"peaking",gain:h},{f:e.F4K,type:"peaking",gain:l},{f:e.F8K,type:"peaking",gain:p},{f:e.F16K,type:"highshelf",gain:c}].map(function(t){var e=u().context.audioContext.createBiquadFilter();return e.type=t.type,f.setParamValue(e.Q,1),e.frequency.value=t.f,f.setParamValue(e.gain,t.gain),e});(d=t.call(this,_[0],_[_.length-1])||this).bands=_,d.bandsMap={};for(var m=0;m<d.bands.length;m++){var g=d.bands[m];m>0&&d.bands[m-1].connect(g),d.bandsMap[g.frequency.value]=g}return d}d=t.call(this,null)||this}return o(e,t),e.prototype.setGain=function(t,e){if(void 0===e&&(e=0),!this.bandsMap[t])throw new Error("No band found for frequency "+t);f.setParamValue(this.bandsMap[t].gain,e)},e.prototype.getGain=function(t){if(!this.bandsMap[t])throw new Error("No band found for frequency "+t);return this.bandsMap[t].gain.value},Object.defineProperty(e.prototype,"f32",{get:function(){return this.getGain(e.F32)},set:function(t){this.setGain(e.F32,t)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"f64",{get:function(){return this.getGain(e.F64)},set:function(t){this.setGain(e.F64,t)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"f125",{get:function(){return this.getGain(e.F125)},set:function(t){this.setGain(e.F125,t)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"f250",{get:function(){return this.getGain(e.F250)},set:function(t){this.setGain(e.F250,t)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"f500",{get:function(){return this.getGain(e.F500)},set:function(t){this.setGain(e.F500,t)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"f1k",{get:function(){return this.getGain(e.F1K)},set:function(t){this.setGain(e.F1K,t)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"f2k",{get:function(){return this.getGain(e.F2K)},set:function(t){this.setGain(e.F2K,t)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"f4k",{get:function(){return this.getGain(e.F4K)},set:function(t){this.setGain(e.F4K,t)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"f8k",{get:function(){return this.getGain(e.F8K)},set:function(t){this.setGain(e.F8K,t)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"f16k",{get:function(){return this.getGain(e.F16K)},set:function(t){this.setGain(e.F16K,t)},enumerable:!0,configurable:!0}),e.prototype.reset=function(){this.bands.forEach(function(t){f.setParamValue(t.gain,0)})},e.prototype.destroy=function(){this.bands.forEach(function(t){t.disconnect()}),this.bands=null,this.bandsMap=null},e.F32=32,e.F64=64,e.F125=125,e.F250=250,e.F500=500,e.F1K=1e3,e.F2K=2e3,e.F4K=4e3,e.F8K=8e3,e.F16K=16e3,e}(r),DistortionFilter:function(t){function e(e){void 0===e&&(e=0);var i=this;if(!u().useLegacy){var n=u().context.audioContext.createWaveShaper();return(i=t.call(this,n)||this)._distortion=n,i.amount=e,i}i=t.call(this,null)||this}return o(e,t),Object.defineProperty(e.prototype,"amount",{get:function(){return this._amount},set:function(t){t*=1e3,this._amount=t;for(var e,i=new Float32Array(44100),n=Math.PI/180,a=0;a<44100;++a)e=2*a/44100-1,i[a]=(3+t)*e*20*n/(Math.PI+t*Math.abs(e));this._distortion.curve=i,this._distortion.oversample="4x"},enumerable:!0,configurable:!0}),e.prototype.destroy=function(){this._distortion=null,t.prototype.destroy.call(this)},e}(r),StereoFilter:function(t){function e(e){void 0===e&&(e=0);var i=this;if(!u().useLegacy){var n,a,r,s=u().context.audioContext;return s.createStereoPanner?r=n=s.createStereoPanner():((a=s.createPanner()).panningModel="equalpower",r=a),(i=t.call(this,r)||this)._stereo=n,i._panner=a,i.pan=e,i}i=t.call(this,null)||this}return o(e,t),Object.defineProperty(e.prototype,"pan",{get:function(){return this._pan},set:function(t){this._pan=t,this._stereo?f.setParamValue(this._stereo.pan,t):this._panner.setPosition(t,0,1-Math.abs(t))},enumerable:!0,configurable:!0}),e.prototype.destroy=function(){t.prototype.destroy.call(this),this._stereo=null,this._panner=null},e}(r),ReverbFilter:function(t){function e(e,i,n){void 0===e&&(e=3),void 0===i&&(i=2),void 0===n&&(n=!1);var a=this;if(!u().useLegacy)return(a=t.call(this,null)||this)._seconds=a._clamp(e,1,50),a._decay=a._clamp(i,0,100),a._reverse=n,a._rebuild(),a;a=t.call(this,null)||this}return o(e,t),e.prototype._clamp=function(t,e,i){return Math.min(i,Math.max(e,t))},Object.defineProperty(e.prototype,"seconds",{get:function(){return this._seconds},set:function(t){this._seconds=this._clamp(t,1,50),this._rebuild()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"decay",{get:function(){return this._decay},set:function(t){this._decay=this._clamp(t,0,100),this._rebuild()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"reverse",{get:function(){return this._reverse},set:function(t){this._reverse=t,this._rebuild()},enumerable:!0,configurable:!0}),e.prototype._rebuild=function(){for(var t,e=u().context.audioContext,i=e.sampleRate,n=i*this._seconds,a=e.createBuffer(2,n,i),r=a.getChannelData(0),s=a.getChannelData(1),o=0;o<n;o++)t=this._reverse?n-o:o,r[o]=(2*Math.random()-1)*Math.pow(1-t/n,this._decay),s[o]=(2*Math.random()-1)*Math.pow(1-t/n,this._decay);var h=u().context.audioContext.createConvolver();h.buffer=a,this.init(h)},e}(r),MonoFilter:function(t){function e(){var e=this;if(!u().useLegacy){var i=u().context.audioContext,n=i.createChannelSplitter(),a=i.createChannelMerger();return a.connect(n),(e=t.call(this,a,n)||this)._merger=a,e}e=t.call(this,null)||this}return o(e,t),e.prototype.destroy=function(){this._merger.disconnect(),this._merger=null,t.prototype.destroy.call(this)},e}(r),TelephoneFilter:function(t){function e(){if(!u().useLegacy){var e=u().context.audioContext,i=e.createBiquadFilter(),n=e.createBiquadFilter(),a=e.createBiquadFilter(),r=e.createBiquadFilter();return i.type="lowpass",f.setParamValue(i.frequency,2e3),n.type="lowpass",f.setParamValue(n.frequency,2e3),a.type="highpass",f.setParamValue(a.frequency,500),r.type="highpass",f.setParamValue(r.frequency,500),i.connect(n),n.connect(a),a.connect(r),t.call(this,i,r)||this}t.call(this,null)}return o(e,t),e}(r)},P=0,S=function(t){function i(e){var i=t.call(this)||this;return i.id=P++,i.init(e),i}return o(i,t),i.prototype.set=function(t,e){if(void 0===this[t])throw new Error("Property with name "+t+" does not exist.");return this[t]=e,this},Object.defineProperty(i.prototype,"progress",{get:function(){return this._source.currentTime/this._duration},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"paused",{get:function(){return this._paused},set:function(t){this._paused=t,this.refreshPaused()},enumerable:!0,configurable:!0}),i.prototype._onPlay=function(){this._playing=!0},i.prototype._onPause=function(){this._playing=!1},i.prototype.init=function(t){this._playing=!1,this._duration=t.source.duration;var e=this._source=t.source.cloneNode(!1);e.src=t.parent.url,e.onplay=this._onPlay.bind(this),e.onpause=this._onPause.bind(this),t.context.on("refresh",this.refresh,this),t.context.on("refreshPaused",this.refreshPaused,this),this._media=t},i.prototype._internalStop=function(){this._source&&this._playing&&(this._source.onended=null,this._source.pause())},i.prototype.stop=function(){this._internalStop(),this._source&&this.emit("stop")},Object.defineProperty(i.prototype,"speed",{get:function(){return this._speed},set:function(t){this._speed=t,this.refresh()},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"volume",{get:function(){return this._volume},set:function(t){this._volume=t,this.refresh()},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"loop",{get:function(){return this._loop},set:function(t){this._loop=t,this.refresh()},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"muted",{get:function(){return this._muted},set:function(t){this._muted=t,this.refresh()},enumerable:!0,configurable:!0}),i.prototype.refresh=function(){var t=this._media.context,e=this._media.parent;this._source.loop=this._loop||e.loop;var i=t.volume*(t.muted?0:1),n=e.volume*(e.muted?0:1),a=this._volume*(this._muted?0:1);this._source.volume=a*i*n,this._source.playbackRate=this._speed*t.speed*e.speed},i.prototype.refreshPaused=function(){var t=this._media.context,e=this._media.parent,i=this._paused||e.paused||t.paused;i!==this._pausedReal&&(this._pausedReal=i,i?(this._internalStop(),this.emit("paused")):(this.emit("resumed"),this.play({start:this._source.currentTime,end:this._end,volume:this._volume,speed:this._speed,loop:this._loop})),this.emit("pause",i))},i.prototype.play=function(t){var n=this,a=t.start,r=t.end,s=t.speed,o=t.loop,h=t.volume,l=t.muted;this._speed=s,this._volume=h,this._loop=!!o,this._muted=l,this.refresh(),this.loop&&null!==r&&(this.loop=!1),this._start=a,this._end=r||this._duration,this._start=Math.max(0,this._start-i.PADDING),this._end=Math.min(this._end+i.PADDING,this._duration),this._source.onloadedmetadata=function(){n._source&&(n._source.currentTime=a,n._source.onloadedmetadata=null,n.emit("progress",a,n._duration),e.Ticker.shared.add(n._onUpdate,n))},this._source.onended=this._onComplete.bind(this),this._source.play(),this.emit("start")},i.prototype._onUpdate=function(){this.emit("progress",this.progress,this._duration),this._source.currentTime>=this._end&&!this._source.loop&&this._onComplete()},i.prototype._onComplete=function(){e.Ticker.shared.remove(this._onUpdate,this),this._internalStop(),this.emit("progress",1,this._duration),this.emit("end",this)},i.prototype.destroy=function(){e.Ticker.shared.remove(this._onUpdate,this),this.removeAllListeners();var t=this._source;t&&(t.onended=null,t.onplay=null,t.onpause=null,this._internalStop()),this._source=null,this._speed=1,this._volume=1,this._loop=!1,this._end=null,this._start=0,this._duration=0,this._playing=!1,this._pausedReal=!1,this._paused=!1,this._muted=!1,this._media&&(this._media.context.off("refresh",this.refresh,this),this._media.context.off("refreshPaused",this.refreshPaused,this),this._media=null)},i.prototype.toString=function(){return"[HTMLAudioInstance id="+this.id+"]"},i.PADDING=.1,i}(i.EventEmitter),A=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return o(e,t),e.prototype.init=function(t){this.parent=t,this._source=t.options.source||new Audio,t.url&&(this._source.src=t.url)},e.prototype.create=function(){return new S(this)},Object.defineProperty(e.prototype,"isPlayable",{get:function(){return!!this._source&&4===this._source.readyState},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"duration",{get:function(){return this._source.duration},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"context",{get:function(){return this.parent.context},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"filters",{get:function(){return null},set:function(t){},enumerable:!0,configurable:!0}),e.prototype.destroy=function(){this.removeAllListeners(),this.parent=null,this._source&&(this._source.src="",this._source.load(),this._source=null)},Object.defineProperty(e.prototype,"source",{get:function(){return this._source},enumerable:!0,configurable:!0}),e.prototype.load=function(t){var e=this._source,i=this.parent;if(4!==e.readyState){if(!i.url)return t(new Error("sound.url or sound.source must be set"));e.src=i.url;var n=function(){e.removeEventListener("canplaythrough",a),e.removeEventListener("load",a),e.removeEventListener("abort",r),e.removeEventListener("error",s)},a=function(){n(),i.isLoaded=!0;var e=i.autoPlayStart();t&&t(null,i,e)},r=function(){n(),t&&t(new Error("Sound loading has been aborted"))},s=function(){n();var i="Failed to load audio element (code: "+e.error.code+")";t&&t(new Error(i))};e.addEventListener("canplaythrough",a,!1),e.addEventListener("load",a,!1),e.addEventListener("abort",r,!1),e.addEventListener("error",s,!1),e.load()}else{i.isLoaded=!0;var o=i.autoPlayStart();t&&setTimeout(function(){t(null,i,o)},0)}},e}(i.EventEmitter),D=function(t){function e(){var e=t.call(this)||this;return e.speed=1,e.volume=1,e.muted=!1,e.paused=!1,e}return o(e,t),e.prototype.refresh=function(){this.emit("refresh")},e.prototype.refreshPaused=function(){this.emit("refreshPaused")},Object.defineProperty(e.prototype,"filters",{get:function(){return null},set:function(t){},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"audioContext",{get:function(){return null},enumerable:!0,configurable:!0}),e.prototype.toggleMute=function(){return this.muted=!this.muted,this.refresh(),this.muted},e.prototype.togglePause=function(){return this.paused=!this.paused,this.refreshPaused(),this.paused},e.prototype.destroy=function(){this.removeAllListeners()},e}(i.EventEmitter),x={HTMLAudioMedia:A,HTMLAudioInstance:S,HTMLAudioContext:D},w=["mp3","ogg","oga","opus","mpeg","wav","m4a","aiff","wma","mid"],O=(p={m4a:"mp4",oga:"ogg"},c=document.createElement("audio"),d={},_=/^no$/,w.forEach(function(t){var e=p[t]||t,i=c.canPlayType("audio/"+t).replace(_,""),n=c.canPlayType("audio/"+e).replace(_,"");d[t]=!!i||!!n}),Object.freeze(d)),E=/\.(\{([^\}]+)\})(\?.*)?$/;function C(t){var e=E,i="string"==typeof t?t:t.url;if(e.test(i)){for(var n=e.exec(i),a=n[2].split(","),r=a[a.length-1],s=0,o=a.length;s<o;s++){var h=a[s];if(O[h]){r=h;break}}var l=i.replace(n[1],r);return"string"!=typeof t&&(t.extension=r,t.url=l),l}return i}var M=function(){function e(){}return e.add=function(){e.legacy=u().useLegacy},Object.defineProperty(e,"legacy",{set:function(e){var i=w;e?i.forEach(function(e){t.LoaderResource.setExtensionXhrType(e,t.LoaderResource.XHR_RESPONSE_TYPE.DEFAULT),t.LoaderResource.setExtensionLoadType(e,t.LoaderResource.LOAD_TYPE.AUDIO)}):i.forEach(function(e){t.LoaderResource.setExtensionXhrType(e,t.LoaderResource.XHR_RESPONSE_TYPE.BUFFER),t.LoaderResource.setExtensionLoadType(e,t.LoaderResource.LOAD_TYPE.XHR)})},enumerable:!0,configurable:!0}),e.pre=function(t,e){C(t),e()},e.use=function(t,e){t.data&&w.indexOf(t.extension)>-1?t.sound=u().add(t.name,{loaded:e,preload:!0,url:t.url,source:t.data}):e()},e}(),B=function(){function t(t,e){this.parent=t,Object.assign(this,e),this.duration=this.end-this.start}return t.prototype.play=function(t){return this.parent.play({complete:t,speed:this.speed||this.parent.speed,end:this.end,start:this.start,loop:this.loop})},t.prototype.destroy=function(){this.parent=null},t}(),k=function(){function t(t,e){this.media=t,this.options=e,this._instances=[],this._sprites={},this.media.init(this);var i=e.complete;this._autoPlayOptions=i?{complete:i}:null,this.isLoaded=!1,this.isPlaying=!1,this.autoPlay=e.autoPlay,this.singleInstance=e.singleInstance,this.preload=e.preload||this.autoPlay,this.url=e.url,this.speed=e.speed,this.volume=e.volume,this.loop=e.loop,e.sprites&&this.addSprites(e.sprites),this.preload&&this._preload(e.loaded)}return t.from=function(e){var i={};return"string"==typeof e?i.url=e:e instanceof ArrayBuffer||e instanceof HTMLAudioElement?i.source=e:i=e,(i=l({autoPlay:!1,singleInstance:!1,url:null,source:null,preload:!1,volume:1,speed:1,complete:null,loaded:null,loop:!1},i)).url&&(i.url=C(i.url)),Object.freeze(i),new t(u().useLegacy?new A:new b,i)},Object.defineProperty(t.prototype,"context",{get:function(){return u().context},enumerable:!0,configurable:!0}),t.prototype.pause=function(){return this.isPlaying=!1,this.paused=!0,this},t.prototype.resume=function(){return this.isPlaying=this._instances.length>0,this.paused=!1,this},Object.defineProperty(t.prototype,"paused",{get:function(){return this._paused},set:function(t){this._paused=t,this.refreshPaused()},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"speed",{get:function(){return this._speed},set:function(t){this._speed=t,this.refresh()},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"filters",{get:function(){return this.media.filters},set:function(t){this.media.filters=t},enumerable:!0,configurable:!0}),t.prototype.addSprites=function(t,e){if("object"==typeof t){var i={};for(var n in t)i[n]=this.addSprites(n,t[n]);return i}if("string"==typeof t){var a=new B(this,e);return this._sprites[t]=a,a}},t.prototype.destroy=function(){this._removeInstances(),this.removeSprites(),this.media.destroy(),this.media=null,this._sprites=null,this._instances=null},t.prototype.removeSprites=function(t){if(t){var e=this._sprites[t];void 0!==e&&(e.destroy(),delete this._sprites[t])}else for(var i in this._sprites)this.removeSprites(i);return this},Object.defineProperty(t.prototype,"isPlayable",{get:function(){return this.isLoaded&&this.media&&this.media.isPlayable},enumerable:!0,configurable:!0}),t.prototype.stop=function(){if(!this.isPlayable)return this.autoPlay=!1,this._autoPlayOptions=null,this;this.isPlaying=!1;for(var t=this._instances.length-1;t>=0;t--)this._instances[t].stop();return this},t.prototype.play=function(t,e){var i,n=this;if("string"==typeof t?i={sprite:r=t,loop:this.loop,complete:e}:"function"==typeof t?(i={}).complete=t:i=t,(i=l({complete:null,loaded:null,sprite:null,end:null,start:0,volume:1,speed:1,muted:!1,loop:!1},i||{})).sprite){var a=i.sprite,r=this._sprites[a];i.start=r.start,i.end=r.end,i.speed=r.speed||1,i.loop=r.loop||i.loop,delete i.sprite}if(i.offset&&(i.start=i.offset),!this.isLoaded)return new Promise(function(t,e){n.autoPlay=!0,n._autoPlayOptions=i,n._preload(function(n,a,r){n?e(n):(i.loaded&&i.loaded(n,a,r),t(r))})});this.singleInstance&&this._removeInstances();var s=this._createInstance();return this._instances.push(s),this.isPlaying=!0,s.once("end",function(){i.complete&&i.complete(n),n._onComplete(s)}),s.once("stop",function(){n._onComplete(s)}),s.play(i),s},t.prototype.refresh=function(){for(var t=this._instances.length,e=0;e<t;e++)this._instances[e].refresh()},t.prototype.refreshPaused=function(){for(var t=this._instances.length,e=0;e<t;e++)this._instances[e].refreshPaused()},Object.defineProperty(t.prototype,"volume",{get:function(){return this._volume},set:function(t){this._volume=t,this.refresh()},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"muted",{get:function(){return this._muted},set:function(t){this._muted=t,this.refresh()},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"loop",{get:function(){return this._loop},set:function(t){this._loop=t,this.refresh()},enumerable:!0,configurable:!0}),t.prototype._preload=function(t){this.media.load(t)},Object.defineProperty(t.prototype,"instances",{get:function(){return this._instances},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"sprites",{get:function(){return this._sprites},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"duration",{get:function(){return this.media.duration},enumerable:!0,configurable:!0}),t.prototype.autoPlayStart=function(){var t;return this.autoPlay&&(t=this.play(this._autoPlayOptions)),t},t.prototype._removeInstances=function(){for(var t=this._instances.length-1;t>=0;t--)this._poolInstance(this._instances[t]);this._instances.length=0},t.prototype._onComplete=function(t){if(this._instances){var e=this._instances.indexOf(t);e>-1&&this._instances.splice(e,1),this.isPlaying=this._instances.length>0}this._poolInstance(t)},t.prototype._createInstance=function(){if(t._pool.length>0){var e=t._pool.pop();return e.init(this.media),e}return this.media.create()},t.prototype._poolInstance=function(e){e.destroy(),t._pool.indexOf(e)<0&&t._pool.push(e)},t._pool=[],t}(),F=function(){function t(){this.init()}return t.prototype.init=function(){return this.supported&&(this._webAudioContext=new v),this._htmlAudioContext=new D,this._sounds={},this.useLegacy=!this.supported,this},Object.defineProperty(t.prototype,"context",{get:function(){return this._context},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"filtersAll",{get:function(){return this.useLegacy?[]:this._context.filters},set:function(t){this.useLegacy||(this._context.filters=t)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"supported",{get:function(){return null!==v.AudioContext},enumerable:!0,configurable:!0}),t.prototype.add=function(t,e){if("object"==typeof t){var i={};for(var n in t){var a=this._getOptions(t[n],e);i[n]=this.add(n,a)}return i}if("string"==typeof t){if(e instanceof k)return this._sounds[t]=e,e;a=this._getOptions(e);var r=k.from(a);return this._sounds[t]=r,r}},t.prototype._getOptions=function(t,e){var i;return i="string"==typeof t?{url:t}:t instanceof ArrayBuffer||t instanceof HTMLAudioElement?{source:t}:t,l({},i,e||{})},Object.defineProperty(t.prototype,"useLegacy",{get:function(){return this._useLegacy},set:function(t){M.legacy=t,this._useLegacy=t,this._context=!t&&this.supported?this._webAudioContext:this._htmlAudioContext},enumerable:!0,configurable:!0}),t.prototype.remove=function(t){return this.exists(t,!0),this._sounds[t].destroy(),delete this._sounds[t],this},Object.defineProperty(t.prototype,"volumeAll",{get:function(){return this._context.volume},set:function(t){this._context.volume=t,this._context.refresh()},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"speedAll",{get:function(){return this._context.speed},set:function(t){this._context.speed=t,this._context.refresh()},enumerable:!0,configurable:!0}),t.prototype.togglePauseAll=function(){return this._context.togglePause()},t.prototype.pauseAll=function(){return this._context.paused=!0,this._context.refreshPaused(),this},t.prototype.resumeAll=function(){return this._context.paused=!1,this._context.refreshPaused(),this},t.prototype.toggleMuteAll=function(){return this._context.toggleMute()},t.prototype.muteAll=function(){return this._context.muted=!0,this._context.refresh(),this},t.prototype.unmuteAll=function(){return this._context.muted=!1,this._context.refresh(),this},t.prototype.removeAll=function(){for(var t in this._sounds)this._sounds[t].destroy(),delete this._sounds[t];return this},t.prototype.stopAll=function(){for(var t in this._sounds)this._sounds[t].stop();return this},t.prototype.exists=function(t,e){return void 0===e&&(e=!1),!!this._sounds[t]},t.prototype.find=function(t){return this.exists(t,!0),this._sounds[t]},t.prototype.play=function(t,e){return this.find(t).play(e)},t.prototype.stop=function(t){return this.find(t).stop()},t.prototype.pause=function(t){return this.find(t).pause()},t.prototype.resume=function(t){return this.find(t).resume()},t.prototype.volume=function(t,e){var i=this.find(t);return void 0!==e&&(i.volume=e),i.volume},t.prototype.speed=function(t,e){var i=this.find(t);return void 0!==e&&(i.speed=e),i.speed},t.prototype.duration=function(t){return this.find(t).duration},t.prototype.close=function(){return this.removeAll(),this._sounds=null,this._webAudioContext&&(this._webAudioContext.destroy(),this._webAudioContext=null),this._htmlAudioContext&&(this._htmlAudioContext.destroy(),this._htmlAudioContext=null),this._context=null,this},t}(),N=0,R={get PLAY_ID(){return N},playOnce:function(t,e){var i="alias"+N++;return u().add(i,{url:t,preload:!0,autoPlay:!0,loaded:function(t){t&&(u().remove(i),e&&e(t))},complete:function(){u().remove(i),e&&e(null)}}),i},render:function(t,e){var i=document.createElement("canvas");e=l({width:512,height:128,fill:"black"},e||{}),i.width=e.width,i.height=e.height;var a=n.BaseTexture.from(i);if(!(t.media instanceof b))return a;var r=t.media,s=i.getContext("2d");s.fillStyle=e.fill;for(var o=r.buffer.getChannelData(0),h=Math.ceil(o.length/e.width),u=e.height/2,p=0;p<e.width;p++){for(var c=1,d=-1,_=0;_<h;_++){var f=o[p*h+_];f<c&&(c=f),f>d&&(d=f)}s.fillRect(p,(1+c)*u,1,Math.max(1,(d-c)*u))}return a},resolveUrl:C,sineTone:function(t,e){void 0===t&&(t=200),void 0===e&&(e=1);var i=k.from({singleInstance:!0});if(!(i.media instanceof b))return i;for(var n=i.media,a=i.context.audioContext.createBuffer(1,48e3*e,48e3),r=a.getChannelData(0),s=0;s<r.length;s++){var o=t*(s/a.sampleRate)*Math.PI;r[s]=2*Math.sin(o)}return n.buffer=a,i.isLoaded=!0,i},extensions:w,supported:O},L=function(t){return h=t,t}(new F);return t.Loader.registerPlugin(M),Object.defineProperties(L,{Filterable:{get:function(){return a}},filters:{get:function(){return I}},htmlaudio:{get:function(){return x}},Sound:{get:function(){return k}},SoundLibrary:{get:function(){return F}},SoundSprite:{get:function(){return B}},utils:{get:function(){return R}},webaudio:{get:function(){return T}},sound:{get:function(){return L}}}),L}(PIXI,PIXI,PIXI.utils,PIXI),function(t){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=t();else if("function"==typeof define&&define.amd)define([],t);else{("undefined"!=typeof window?window:void 0!==global?global:"undefined"!=typeof self?self:this).store=t()}}(function(){return function t(e,i,n){function a(s,o){if(!i[s]){if(!e[s]){var h="function"==typeof require&&require;if(!o&&h)return h(s,!0);if(r)return r(s,!0);var l=new Error("Cannot find module '"+s+"'");throw l.code="MODULE_NOT_FOUND",l}var u=i[s]={exports:{}};e[s][0].call(u.exports,function(t){var i=e[s][1][t];return a(i||t)},u,u.exports,t,e,i,n)}return i[s].exports}for(var r="function"==typeof require&&require,s=0;s<n.length;s++)a(n[s]);return a}({1:[function(t,e,i){(function(t){e.exports=function(){var e,i={},n="undefined"!=typeof window?window:t,a=n.document,r="localStorage",s="script";if(i.disabled=!1,i.version="1.3.20",i.set=function(t,e){},i.get=function(t,e){},i.has=function(t){return void 0!==i.get(t)},i.remove=function(t){},i.clear=function(){},i.transact=function(t,e,n){null==n&&(n=e,e=null),null==e&&(e={});var a=i.get(t,e);n(a),i.set(t,a)},i.getAll=function(){},i.forEach=function(){},i.serialize=function(t){return JSON.stringify(t)},i.deserialize=function(t){if("string"==typeof t)try{return JSON.parse(t)}catch(e){return t||void 0}},function(){try{return r in n&&n[r]}catch(t){return!1}}())e=n[r],i.set=function(t,n){return void 0===n?i.remove(t):(e.setItem(t,i.serialize(n)),n)},i.get=function(t,n){var a=i.deserialize(e.getItem(t));return void 0===a?n:a},i.remove=function(t){e.removeItem(t)},i.clear=function(){e.clear()},i.getAll=function(){var t={};return i.forEach(function(e,i){t[e]=i}),t},i.forEach=function(t){for(var n=0;n<e.length;n++){var a=e.key(n);t(a,i.get(a))}};else if(a&&a.documentElement.addBehavior){var o,h;try{(h=new ActiveXObject("htmlfile")).open(),h.write("<"+s+">document.w=window</"+s+'><iframe src="/favicon.ico"></iframe>'),h.close(),o=h.w.frames[0].document,e=o.createElement("div")}catch(t){e=a.createElement("div"),o=a.body}var l=function(t){return function(){var n=Array.prototype.slice.call(arguments,0);n.unshift(e),o.appendChild(e),e.addBehavior("#default#userData"),e.load(r);var a=t.apply(i,n);return o.removeChild(e),a}},u=new RegExp("[!\"#$%&'()*+,/\\\\:;<=>?@[\\]^`{|}~]","g"),p=function(t){return t.replace(/^d/,"___$&").replace(u,"___")};i.set=l(function(t,e,n){return e=p(e),void 0===n?i.remove(e):(t.setAttribute(e,i.serialize(n)),t.save(r),n)}),i.get=l(function(t,e,n){e=p(e);var a=i.deserialize(t.getAttribute(e));return void 0===a?n:a}),i.remove=l(function(t,e){e=p(e),t.removeAttribute(e),t.save(r)}),i.clear=l(function(t){var e=t.XMLDocument.documentElement.attributes;t.load(r);for(var i=e.length-1;i>=0;i--)t.removeAttribute(e[i].name);t.save(r)}),i.getAll=function(t){var e={};return i.forEach(function(t,i){e[t]=i}),e},i.forEach=l(function(t,e){for(var n,a=t.XMLDocument.documentElement.attributes,r=0;n=a[r];++r)e(n.name,i.deserialize(t.getAttribute(n.name)))})}try{var c="__storejs__";i.set(c,c),i.get(c)!=c&&(i.disabled=!0),i.remove(c)}catch(t){i.disabled=!0}return i.enabled=!i.disabled,i}()}).call(this,void 0!==global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}]},{},[1])(1)}),this.createjs=this.createjs||{},createjs.extend=function(t,e){function i(){this.constructor=t}return i.prototype=e.prototype,t.prototype=new i},this.createjs=this.createjs||{},createjs.promote=function(t,e){var i=t.prototype,n=Object.getPrototypeOf&&Object.getPrototypeOf(i)||i.__proto__;if(n)for(var a in i[(e+="_")+"constructor"]=n.constructor,n)i.hasOwnProperty(a)&&"function"==typeof n[a]&&(i[e+a]=n[a]);return t},this.createjs=this.createjs||{},createjs.deprecate=function(t,e){return function(){var i="Deprecated property or method '"+e+"'. See docs for info.";return console&&(console.warn?console.warn(i):console.log(i)),t&&t.apply(this,arguments)}},this.createjs=this.createjs||{},function(){function t(t,e,i){this.type=t,this.target=null,this.currentTarget=null,this.eventPhase=0,this.bubbles=!!e,this.cancelable=!!i,this.timeStamp=(new Date).getTime(),this.defaultPrevented=!1,this.propagationStopped=!1,this.immediatePropagationStopped=!1,this.removed=!1}var e=t.prototype;e.preventDefault=function(){this.defaultPrevented=this.cancelable&&!0},e.stopPropagation=function(){this.propagationStopped=!0},e.stopImmediatePropagation=function(){this.immediatePropagationStopped=this.propagationStopped=!0},e.remove=function(){this.removed=!0},e.clone=function(){return new t(this.type,this.bubbles,this.cancelable)},e.set=function(t){for(var e in t)this[e]=t[e];return this},e.toString=function(){return"[Event (type="+this.type+")]"},createjs.Event=t}(),this.createjs=this.createjs||{},function(){function t(){this._listeners=null,this._captureListeners=null}var e=t.prototype;t.initialize=function(t){t.addEventListener=e.addEventListener,t.on=e.on,t.removeEventListener=t.off=e.removeEventListener,t.removeAllEventListeners=e.removeAllEventListeners,t.hasEventListener=e.hasEventListener,t.dispatchEvent=e.dispatchEvent,t._dispatchEvent=e._dispatchEvent,t.willTrigger=e.willTrigger},e.addEventListener=function(t,e,i){var n,a=(n=i?this._captureListeners=this._captureListeners||{}:this._listeners=this._listeners||{})[t];return a&&this.removeEventListener(t,e,i),(a=n[t])?a.push(e):n[t]=[e],e},e.on=function(t,e,i,n,a,r){return e.handleEvent&&(i=i||e,e=e.handleEvent),i=i||this,this.addEventListener(t,function(t){e.call(i,t,a),n&&t.remove()},r)},e.removeEventListener=function(t,e,i){var n=i?this._captureListeners:this._listeners;if(n){var a=n[t];if(a)for(var r=0,s=a.length;s>r;r++)if(a[r]==e){1==s?delete n[t]:a.splice(r,1);break}}},e.off=e.removeEventListener,e.removeAllEventListeners=function(t){t?(this._listeners&&delete this._listeners[t],this._captureListeners&&delete this._captureListeners[t]):this._listeners=this._captureListeners=null},e.dispatchEvent=function(t,e,i){if("string"==typeof t){var n=this._listeners;if(!(e||n&&n[t]))return!0;t=new createjs.Event(t,e,i)}else t.target&&t.clone&&(t=t.clone());try{t.target=this}catch(t){}if(t.bubbles&&this.parent){for(var a=this,r=[a];a.parent;)r.push(a=a.parent);var s,o=r.length;for(s=o-1;s>=0&&!t.propagationStopped;s--)r[s]._dispatchEvent(t,1+(0==s));for(s=1;o>s&&!t.propagationStopped;s++)r[s]._dispatchEvent(t,3)}else this._dispatchEvent(t,2);return!t.defaultPrevented},e.hasEventListener=function(t){var e=this._listeners,i=this._captureListeners;return!!(e&&e[t]||i&&i[t])},e.willTrigger=function(t){for(var e=this;e;){if(e.hasEventListener(t))return!0;e=e.parent}return!1},e.toString=function(){return"[EventDispatcher]"},e._dispatchEvent=function(t,e){var i,n,a=2>=e?this._captureListeners:this._listeners;if(t&&a&&(n=a[t.type])&&(i=n.length)){try{t.currentTarget=this}catch(t){}try{t.eventPhase=0|e}catch(t){}t.removed=!1,n=n.slice();for(var r=0;i>r&&!t.immediatePropagationStopped;r++){var s=n[r];s.handleEvent?s.handleEvent(t):s(t),t.removed&&(this.off(t.type,s,1==e),t.removed=!1)}}2===e&&this._dispatchEvent(t,2.1)},createjs.EventDispatcher=t}(),this.createjs=this.createjs||{},function(){function t(){throw"Ticker cannot be instantiated."}t.RAF_SYNCHED="synched",t.RAF="raf",t.TIMEOUT="timeout",t.timingMode=null,t.maxDelta=0,t.paused=!1,t.removeEventListener=null,t.removeAllEventListeners=null,t.dispatchEvent=null,t.hasEventListener=null,t._listeners=null,createjs.EventDispatcher.initialize(t),t._addEventListener=t.addEventListener,t.addEventListener=function(){return!t._inited&&t.init(),t._addEventListener.apply(t,arguments)},t._inited=!1,t._startTime=0,t._pausedTime=0,t._ticks=0,t._pausedTicks=0,t._interval=50,t._lastTime=0,t._times=null,t._tickTimes=null,t._timerId=null,t._raf=!0,t._setInterval=function(e){t._interval=e,t._inited&&t._setupTick()},t.setInterval=createjs.deprecate(t._setInterval,"Ticker.setInterval"),t._getInterval=function(){return t._interval},t.getInterval=createjs.deprecate(t._getInterval,"Ticker.getInterval"),t._setFPS=function(e){t._setInterval(1e3/e)},t.setFPS=createjs.deprecate(t._setFPS,"Ticker.setFPS"),t._getFPS=function(){return 1e3/t._interval},t.getFPS=createjs.deprecate(t._getFPS,"Ticker.getFPS");try{Object.defineProperties(t,{interval:{get:t._getInterval,set:t._setInterval},framerate:{get:t._getFPS,set:t._setFPS}})}catch(t){console.log(t)}t.init=function(){t._inited||(t._inited=!0,t._times=[],t._tickTimes=[],t._startTime=t._getTime(),t._times.push(t._lastTime=0),t.interval=t._interval)},t.reset=function(){if(t._raf){var e=window.cancelAnimationFrame||window.webkitCancelAnimationFrame||window.mozCancelAnimationFrame||window.oCancelAnimationFrame||window.msCancelAnimationFrame;e&&e(t._timerId)}else clearTimeout(t._timerId);t.removeAllEventListeners("tick"),t._timerId=t._times=t._tickTimes=null,t._startTime=t._lastTime=t._ticks=t._pausedTime=0,t._inited=!1},t.getMeasuredTickTime=function(e){var i=0,n=t._tickTimes;if(!n||n.length<1)return-1;e=Math.min(n.length,e||0|t._getFPS());for(var a=0;e>a;a++)i+=n[a];return i/e},t.getMeasuredFPS=function(e){var i=t._times;return!i||i.length<2?-1:(e=Math.min(i.length-1,e||0|t._getFPS()),1e3/((i[0]-i[e])/e))},t.getTime=function(e){return t._startTime?t._getTime()-(e?t._pausedTime:0):-1},t.getEventTime=function(e){return t._startTime?(t._lastTime||t._startTime)-(e?t._pausedTime:0):-1},t.getTicks=function(e){return t._ticks-(e?t._pausedTicks:0)},t._handleSynch=function(){t._timerId=null,t._setupTick(),t._getTime()-t._lastTime>=.97*(t._interval-1)&&t._tick()},t._handleRAF=function(){t._timerId=null,t._setupTick(),t._tick()},t._handleTimeout=function(){t._timerId=null,t._setupTick(),t._tick()},t._setupTick=function(){if(null==t._timerId){var e=t.timingMode;if(e==t.RAF_SYNCHED||e==t.RAF){var i=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame;if(i)return t._timerId=i(e==t.RAF?t._handleRAF:t._handleSynch),void(t._raf=!0)}t._raf=!1,t._timerId=setTimeout(t._handleTimeout,t._interval)}},t._tick=function(){var e=t.paused,i=t._getTime(),n=i-t._lastTime;if(t._lastTime=i,t._ticks++,e&&(t._pausedTicks++,t._pausedTime+=n),t.hasEventListener("tick")){var a=new createjs.Event("tick"),r=t.maxDelta;a.delta=r&&n>r?r:n,a.paused=e,a.time=i,a.runTime=i-t._pausedTime,t.dispatchEvent(a)}for(t._tickTimes.unshift(t._getTime()-i);t._tickTimes.length>100;)t._tickTimes.pop();for(t._times.unshift(i);t._times.length>100;)t._times.pop()};var e=window,i=e.performance.now||e.performance.mozNow||e.performance.msNow||e.performance.oNow||e.performance.webkitNow;t._getTime=function(){return(i&&i.call(e.performance)||(new Date).getTime())-t._startTime},createjs.Ticker=t}(),this.createjs=this.createjs||{},function(){function t(t){this.EventDispatcher_constructor(),this.ignoreGlobalPause=!1,this.loop=0,this.useTicks=!1,this.reversed=!1,this.bounce=!1,this.timeScale=1,this.duration=0,this.position=0,this.rawPosition=-1,this._paused=!0,this._next=null,this._prev=null,this._parent=null,this._labels=null,this._labelList=null,t&&(this.useTicks=!!t.useTicks,this.ignoreGlobalPause=!!t.ignoreGlobalPause,this.loop=!0===t.loop?-1:t.loop||0,this.reversed=!!t.reversed,this.bounce=!!t.bounce,this.timeScale=t.timeScale||1,t.onChange&&this.addEventListener("change",t.onChange),t.onComplete&&this.addEventListener("complete",t.onComplete))}var e=createjs.extend(t,createjs.EventDispatcher);e._setPaused=function(t){return createjs.Tween._register(this,t),this},e.setPaused=createjs.deprecate(e._setPaused,"AbstractTween.setPaused"),e._getPaused=function(){return this._paused},e.getPaused=createjs.deprecate(e._getPaused,"AbstactTween.getPaused"),e._getCurrentLabel=function(t){var e=this.getLabels();null==t&&(t=this.position);for(var i=0,n=e.length;n>i&&!(t<e[i].position);i++);return 0===i?null:e[i-1].label},e.getCurrentLabel=createjs.deprecate(e._getCurrentLabel,"AbstractTween.getCurrentLabel");try{Object.defineProperties(e,{paused:{set:e._setPaused,get:e._getPaused},currentLabel:{get:e._getCurrentLabel}})}catch(t){}e.advance=function(t,e){this.setPosition(this.rawPosition+t*this.timeScale,e)},e.setPosition=function(t,e,i,n){var a=this.duration,r=this.loop,s=this.rawPosition,o=0,h=0,l=!1;if(0>t&&(t=0),0===a){if(l=!0,-1!==s)return l}else{if(h=t-(o=t/a|0)*a,(l=-1!==r&&t>=r*a+a)&&(t=(h=a)*(o=r)+a),t===s)return l;!this.reversed!=!(this.bounce&&o%2)&&(h=a-h)}this.position=h,this.rawPosition=t,this._updatePosition(i,l),l&&(this.paused=!0),n&&n(this),e||this._runActions(s,t,i,!i&&-1===s),this.dispatchEvent("change"),l&&this.dispatchEvent("complete")},e.calculatePosition=function(t){var e=this.duration,i=this.loop,n=0,a=0;return 0===e?0:(-1!==i&&t>=i*e+e?(a=e,n=i):0>t?a=0:a=t-(n=t/e|0)*e,!this.reversed!=!(this.bounce&&n%2)?e-a:a)},e.getLabels=function(){var t=this._labelList;if(!t){t=this._labelList=[];var e=this._labels;for(var i in e)t.push({label:i,position:e[i]});t.sort(function(t,e){return t.position-e.position})}return t},e.setLabels=function(t){this._labels=t,this._labelList=null},e.addLabel=function(t,e){this._labels||(this._labels={}),this._labels[t]=e;var i=this._labelList;if(i){for(var n=0,a=i.length;a>n&&!(e<i[n].position);n++);i.splice(n,0,{label:t,position:e})}},e.gotoAndPlay=function(t){this.paused=!1,this._goto(t)},e.gotoAndStop=function(t){this.paused=!0,this._goto(t)},e.resolve=function(t){var e=Number(t);return isNaN(e)&&(e=this._labels&&this._labels[t]),e},e.toString=function(){return"[AbstractTween]"},e.clone=function(){throw"AbstractTween can not be cloned."},e._init=function(t){t&&t.paused||(this.paused=!1),t&&null!=t.position&&this.setPosition(t.position)},e._updatePosition=function(){},e._goto=function(t){var e=this.resolve(t);null!=e&&this.setPosition(e,!1,!0)},e._runActions=function(t,e,i,n){if(this._actionHead||this.tweens){var a,r,s,o,h=this.duration,l=this.reversed,u=this.bounce,p=this.loop;if(0===h?(a=r=s=o=0,l=u=!1):(s=t-(a=t/h|0)*h,o=e-(r=e/h|0)*h),-1!==p&&(r>p&&(o=h,r=p),a>p&&(s=h,a=p)),i)return this._runActionsRange(o,o,i,n);if(a!==r||s!==o||i||n){-1===a&&(a=s=0);var c=e>=t,d=a;do{var _=d===a?s:c?0:h,f=d===r?o:c?h:0;if(!l!=!(u&&d%2)&&(_=h-_,f=h-f),u&&d!==a&&_===f);else if(this._runActionsRange(_,f,i,n||d!==a&&!u))return!0;n=!1}while(c&&++d<=r||!c&&--d>=r)}}},e._runActionsRange=function(){},createjs.AbstractTween=createjs.promote(t,"EventDispatcher")}(),this.createjs=this.createjs||{},function(){function t(i,n){this.AbstractTween_constructor(n),this.pluginData=null,this.target=i,this.passive=!1,this._stepHead=new e(null,0,0,{},null,!0),this._stepTail=this._stepHead,this._stepPosition=0,this._actionHead=null,this._actionTail=null,this._plugins=null,this._pluginIds=null,this._injected=null,n&&(this.pluginData=n.pluginData,n.override&&t.removeTweens(i)),this.pluginData||(this.pluginData={}),this._init(n)}function e(t,e,i,n,a,r){this.next=null,this.prev=t,this.t=e,this.d=i,this.props=n,this.ease=a,this.passive=r,this.index=t?t.index+1:0}var i=createjs.extend(t,createjs.AbstractTween);t.IGNORE={},t._tweens=[],t._plugins=null,t._tweenHead=null,t._tweenTail=null,t.get=function(e,i){return new t(e,i)},t.tick=function(e,i){for(var n=t._tweenHead;n;){var a=n._next;i&&!n.ignoreGlobalPause||n._paused||n.advance(n.useTicks?1:e),n=a}},t.handleEvent=function(t){"tick"===t.type&&this.tick(t.delta,t.paused)},t.removeTweens=function(e){if(e.tweenjs_count){for(var i=t._tweenHead;i;){var n=i._next;i.target===e&&t._register(i,!0),i=n}e.tweenjs_count=0}},t.removeAllTweens=function(){for(var e=t._tweenHead;e;){var i=e._next;e._paused=!0,e.target&&(e.target.tweenjs_count=0),e._next=e._prev=null,e=i}t._tweenHead=t._tweenTail=null},t.hasActiveTweens=function(e){return e?!!e.tweenjs_count:!!t._tweenHead},t._installPlugin=function(e){for(var i=e.priority=e.priority||0,n=t._plugins=t._plugins||[],a=0,r=n.length;r>a&&!(i<n[a].priority);a++);n.splice(a,0,e)},t._register=function(e,i){var n=e.target;if(!i&&e._paused){n&&(n.tweenjs_count=n.tweenjs_count?n.tweenjs_count+1:1);var a=t._tweenTail;a?(t._tweenTail=a._next=e,e._prev=a):t._tweenHead=t._tweenTail=e,!t._inited&&createjs.Ticker&&(createjs.Ticker.addEventListener("tick",t),t._inited=!0)}else if(i&&!e._paused){n&&n.tweenjs_count--;var r=e._next,s=e._prev;r?r._prev=s:t._tweenTail=s,s?s._next=r:t._tweenHead=r,e._next=e._prev=null}e._paused=i},i.wait=function(t,e){return t>0&&this._addStep(+t,this._stepTail.props,null,e),this},i.to=function(t,e,i){(null==e||0>e)&&(e=0);var n=this._addStep(+e,null,i);return this._appendProps(t,n),this},i.label=function(t){return this.addLabel(t,this.duration),this},i.call=function(t,e,i){return this._addAction(i||this.target,t,e||[this])},i.set=function(t,e){return this._addAction(e||this.target,this._set,[t])},i.play=function(t){return this._addAction(t||this,this._set,[{paused:!1}])},i.pause=function(t){return this._addAction(t||this,this._set,[{paused:!0}])},i.w=i.wait,i.t=i.to,i.c=i.call,i.s=i.set,i.toString=function(){return"[Tween]"},i.clone=function(){throw"Tween can not be cloned."},i._addPlugin=function(t){var e=this._pluginIds||(this._pluginIds={}),i=t.ID;if(i&&!e[i]){e[i]=!0;for(var n=this._plugins||(this._plugins=[]),a=t.priority||0,r=0,s=n.length;s>r;r++)if(a<n[r].priority)return void n.splice(r,0,t);n.push(t)}},i._updatePosition=function(t,e){var i=this._stepHead.next,n=this.position,a=this.duration;if(this.target&&i){for(var r=i.next;r&&r.t<=n;)r=(i=i.next).next;var s=e?0===a?1:n/a:(n-i.t)/i.d;this._updateTargetProps(i,s,e)}this._stepPosition=i?n-i.t:0},i._updateTargetProps=function(e,i,n){if(!(this.passive=!!e.passive)){var a,r,s,o,h=e.prev.props,l=e.props;(o=e.ease)&&(i=o(i,0,1,1));var u=this._plugins;t:for(var p in h){if(a=(r=h[p])!==(s=l[p])&&"number"==typeof r?r+(s-r)*i:i>=1?s:r,u)for(var c=0,d=u.length;d>c;c++){var _=u[c].change(this,e,p,a,i,n);if(_===t.IGNORE)continue t;void 0!==_&&(a=_)}this.target[p]=a}}},i._runActionsRange=function(t,e,i,n){var a=t>e,r=a?this._actionTail:this._actionHead,s=e,o=t;a&&(s=t,o=e);for(var h=this.position;r;){var l=r.t;if((l===e||l>o&&s>l||n&&l===t)&&(r.funct.apply(r.scope,r.params),h!==this.position))return!0;r=a?r.prev:r.next}},i._appendProps=function(e,i,n){var a,r,s,o,h,l=this._stepHead.props,u=this.target,p=t._plugins,c=i.prev,d=c.props,_=i.props||(i.props=this._cloneProps(d)),f={};for(a in e)if(e.hasOwnProperty(a)&&(f[a]=_[a]=e[a],void 0===l[a])){if(o=void 0,p)for(r=p.length-1;r>=0;r--)if(void 0!==(s=p[r].init(this,a,o))&&(o=s),o===t.IGNORE){delete _[a],delete f[a];break}o!==t.IGNORE&&(void 0===o&&(o=u[a]),d[a]=void 0===o?null:o)}for(a in f){s=e[a];for(var m,g=c;(m=g)&&(g=m.prev);)if(g.props!==m.props){if(void 0!==g.props[a])break;g.props[a]=d[a]}}if(!1!==n&&(p=this._plugins))for(r=p.length-1;r>=0;r--)p[r].step(this,i,f);(h=this._injected)&&(this._injected=null,this._appendProps(h,i,!1))},i._injectProp=function(t,e){(this._injected||(this._injected={}))[t]=e},i._addStep=function(t,i,n,a){var r=new e(this._stepTail,this.duration,t,i,n,a||!1);return this.duration+=t,this._stepTail=this._stepTail.next=r},i._addAction=function(t,e,i){var n=new function(t,e,i,n,a){this.next=null,this.prev=t,this.t=e,this.d=0,this.scope=i,this.funct=n,this.params=a}(this._actionTail,this.duration,t,e,i);return this._actionTail?this._actionTail.next=n:this._actionHead=n,this._actionTail=n,this},i._set=function(t){for(var e in t)this[e]=t[e]},i._cloneProps=function(t){var e={};for(var i in t)e[i]=t[i];return e},createjs.Tween=createjs.promote(t,"AbstractTween")}(),this.createjs=this.createjs||{},function(){function t(t){var e,i;t instanceof Array||null==t&&arguments.length>1?(e=t,i=arguments[1],t=arguments[2]):t&&(e=t.tweens,i=t.labels),this.AbstractTween_constructor(t),this.tweens=[],e&&this.addTween.apply(this,e),this.setLabels(i),this._init(t)}var e=createjs.extend(t,createjs.AbstractTween);e.addTween=function(t){t._parent&&t._parent.removeTween(t);var e=arguments.length;if(e>1){for(var i=0;e>i;i++)this.addTween(arguments[i]);return arguments[e-1]}if(0===e)return null;this.tweens.push(t),t._parent=this,t.paused=!0;var n=t.duration;return t.loop>0&&(n*=t.loop+1),n>this.duration&&(this.duration=n),this.rawPosition>=0&&t.setPosition(this.rawPosition),t},e.removeTween=function(t){var e=arguments.length;if(e>1){for(var i=!0,n=0;e>n;n++)i=i&&this.removeTween(arguments[n]);return i}if(0===e)return!0;var a=this.tweens;for(n=a.length;n--;)if(a[n]===t)return a.splice(n,1),t._parent=null,t.duration>=this.duration&&this.updateDuration(),!0;return!1},e.updateDuration=function(){this.duration=0;for(var t=0,e=this.tweens.length;e>t;t++){var i=this.tweens[t],n=i.duration;i.loop>0&&(n*=i.loop+1),n>this.duration&&(this.duration=n)}},e.toString=function(){return"[Timeline]"},e.clone=function(){throw"Timeline can not be cloned."},e._updatePosition=function(t){for(var e=this.position,i=0,n=this.tweens.length;n>i;i++)this.tweens[i].setPosition(e,!0,t)},e._runActionsRange=function(t,e,i,n){for(var a=this.position,r=0,s=this.tweens.length;s>r;r++)if(this.tweens[r]._runActions(t,e,i,n),a!==this.position)return!0},createjs.Timeline=createjs.promote(t,"AbstractTween")}(),this.createjs=this.createjs||{},function(){function t(){throw"Ease cannot be instantiated."}t.linear=function(t){return t},t.none=t.linear,t.get=function(t){return-1>t?t=-1:t>1&&(t=1),function(e){return 0==t?e:0>t?e*(e*-t+1+t):e*((2-e)*t+(1-t))}},t.getPowIn=function(t){return function(e){return Math.pow(e,t)}},t.getPowOut=function(t){return function(e){return 1-Math.pow(1-e,t)}},t.getPowInOut=function(t){return function(e){return(e*=2)<1?.5*Math.pow(e,t):1-.5*Math.abs(Math.pow(2-e,t))}},t.quadIn=t.getPowIn(2),t.quadOut=t.getPowOut(2),t.quadInOut=t.getPowInOut(2),t.cubicIn=t.getPowIn(3),t.cubicOut=t.getPowOut(3),t.cubicInOut=t.getPowInOut(3),t.quartIn=t.getPowIn(4),t.quartOut=t.getPowOut(4),t.quartInOut=t.getPowInOut(4),t.quintIn=t.getPowIn(5),t.quintOut=t.getPowOut(5),t.quintInOut=t.getPowInOut(5),t.sineIn=function(t){return 1-Math.cos(t*Math.PI/2)},t.sineOut=function(t){return Math.sin(t*Math.PI/2)},t.sineInOut=function(t){return-.5*(Math.cos(Math.PI*t)-1)},t.getBackIn=function(t){return function(e){return e*e*((t+1)*e-t)}},t.backIn=t.getBackIn(1.7),t.getBackOut=function(t){return function(e){return--e*e*((t+1)*e+t)+1}},t.backOut=t.getBackOut(1.7),t.getBackInOut=function(t){return t*=1.525,function(e){return(e*=2)<1?.5*e*e*((t+1)*e-t):.5*((e-=2)*e*((t+1)*e+t)+2)}},t.backInOut=t.getBackInOut(1.7),t.circIn=function(t){return-(Math.sqrt(1-t*t)-1)},t.circOut=function(t){return Math.sqrt(1- --t*t)},t.circInOut=function(t){return(t*=2)<1?-.5*(Math.sqrt(1-t*t)-1):.5*(Math.sqrt(1-(t-=2)*t)+1)},t.bounceIn=function(e){return 1-t.bounceOut(1-e)},t.bounceOut=function(t){return 1/2.75>t?7.5625*t*t:2/2.75>t?7.5625*(t-=1.5/2.75)*t+.75:2.5/2.75>t?7.5625*(t-=2.25/2.75)*t+.9375:7.5625*(t-=2.625/2.75)*t+.984375},t.bounceInOut=function(e){return.5>e?.5*t.bounceIn(2*e):.5*t.bounceOut(2*e-1)+.5},t.getElasticIn=function(t,e){var i=2*Math.PI;return function(n){if(0==n||1==n)return n;var a=e/i*Math.asin(1/t);return-t*Math.pow(2,10*(n-=1))*Math.sin((n-a)*i/e)}},t.elasticIn=t.getElasticIn(1,.3),t.getElasticOut=function(t,e){var i=2*Math.PI;return function(n){if(0==n||1==n)return n;var a=e/i*Math.asin(1/t);return t*Math.pow(2,-10*n)*Math.sin((n-a)*i/e)+1}},t.elasticOut=t.getElasticOut(1,.3),t.getElasticInOut=function(t,e){var i=2*Math.PI;return function(n){var a=e/i*Math.asin(1/t);return(n*=2)<1?-.5*t*Math.pow(2,10*(n-=1))*Math.sin((n-a)*i/e):t*Math.pow(2,-10*(n-=1))*Math.sin((n-a)*i/e)*.5+1}},t.elasticInOut=t.getElasticInOut(1,.3*1.5),createjs.Ease=t}(),this.createjs=this.createjs||{},function(){function t(){throw"MotionGuidePlugin cannot be instantiated."}var e=t;e.priority=0,e.ID="MotionGuide",e.install=function(){return createjs.Tween._installPlugin(t),createjs.Tween.IGNORE},e.init=function(t,i){"guide"==i&&t._addPlugin(e)},e.step=function(t,i,n){for(var a in n)if("guide"===a){var r=i.props.guide,s=e._solveGuideData(n.guide,r);r.valid=!s;var o=r.endData;if(t._injectProp("x",o.x),t._injectProp("y",o.y),s||!r.orient)break;var h=void 0===i.prev.props.rotation?t.target.rotation||0:i.prev.props.rotation;if(r.startOffsetRot=h-r.startData.rotation,"fixed"==r.orient)r.endAbsRot=o.rotation+r.startOffsetRot,r.deltaRotation=0;else{var l=void 0===n.rotation?t.target.rotation||0:n.rotation,u=l-r.endData.rotation-r.startOffsetRot,p=u%360;switch(r.endAbsRot=l,r.orient){case"auto":r.deltaRotation=u;break;case"cw":r.deltaRotation=(p+360)%360+360*Math.abs(u/360|0);break;case"ccw":r.deltaRotation=(p-360)%360+-360*Math.abs(u/360|0)}}t._injectProp("rotation",r.endAbsRot)}},e.change=function(t,i,n,a,r){var s=i.props.guide;if(s&&i.props!==i.prev.props&&s!==i.prev.props.guide)return"guide"===n&&!s.valid||"x"==n||"y"==n||"rotation"===n&&s.orient?createjs.Tween.IGNORE:void e._ratioToPositionData(r,s,t.target)},e.debug=function(t,i,n){t=t.guide||t;var a=e._findPathProblems(t);if(a&&console.error("MotionGuidePlugin Error found: \n"+a),!i)return a;var r=t.path,s=r.length;for(i.save(),i.lineCap="round",i.lineJoin="miter",i.beginPath(),i.moveTo(r[0],r[1]),u=2;s>u;u+=4)i.quadraticCurveTo(r[u],r[u+1],r[u+2],r[u+3]);i.strokeStyle="black",i.lineWidth=4.5,i.stroke(),i.strokeStyle="white",i.lineWidth=3,i.stroke(),i.closePath();var o=n.length;if(n&&o){var h={},l={};e._solveGuideData(t,h);for(var u=0;o>u;u++)h.orient="fixed",e._ratioToPositionData(n[u],h,l),i.beginPath(),i.moveTo(l.x,l.y),i.lineTo(l.x+9*Math.cos(.0174533*l.rotation),l.y+9*Math.sin(.0174533*l.rotation)),i.strokeStyle="black",i.lineWidth=4.5,i.stroke(),i.strokeStyle="red",i.lineWidth=3,i.stroke(),i.closePath()}return i.restore(),a},e._solveGuideData=function(t,i){var n;if(n=e.debug(t))return n;var a=i.path=t.path;i.orient=t.orient,i.subLines=[],i.totalLength=0,i.startOffsetRot=0,i.deltaRotation=0,i.startData={ratio:0},i.endData={ratio:1},i.animSpan=1;var r,s,o,h,l,u,p,c,d,_=a.length,f={};for(r=a[0],s=a[1],p=2;_>p;p+=4){o=a[p],h=a[p+1],l=a[p+2],u=a[p+3];var m={weightings:[],estLength:0,portion:0},g=r,y=s;for(c=1;10>=c;c++){e._getParamsForCurve(r,s,o,h,l,u,c/10,!1,f);var b=f.x-g,v=f.y-y;d=Math.sqrt(b*b+v*v),m.weightings.push(d),m.estLength+=d,g=f.x,y=f.y}for(i.totalLength+=m.estLength,c=0;10>c;c++)d=m.estLength,m.weightings[c]=m.weightings[c]/d;i.subLines.push(m),r=l,s=u}d=i.totalLength;var T=i.subLines.length;for(p=0;T>p;p++)i.subLines[p].portion=i.subLines[p].estLength/d;var I=isNaN(t.start)?0:t.start,P=isNaN(t.end)?1:t.end;e._ratioToPositionData(I,i,i.startData),e._ratioToPositionData(P,i,i.endData),i.startData.ratio=I,i.endData.ratio=P,i.animSpan=i.endData.ratio-i.startData.ratio},e._ratioToPositionData=function(t,i,n){var a,r,s,o,h,l=i.subLines,u=0,p=t*i.animSpan+i.startData.ratio;for(r=l.length,a=0;r>a;a++){if(u+(o=l[a].portion)>=p){h=a;break}u+=o}void 0===h&&(h=r-1,u-=o);var c=l[h].weightings,d=o;for(r=c.length,a=0;r>a&&!(u+(o=c[a]*d)>=p);a++)u+=o;h=4*h+2,s=a/10+(p-u)/o*.1;var _=i.path;return e._getParamsForCurve(_[h-2],_[h-1],_[h],_[h+1],_[h+2],_[h+3],s,i.orient,n),i.orient&&(t>=.99999&&1.00001>=t&&void 0!==i.endAbsRot?n.rotation=i.endAbsRot:n.rotation+=i.startOffsetRot+t*i.deltaRotation),n},e._getParamsForCurve=function(t,e,i,n,a,r,s,o,h){var l=1-s;h.x=l*l*t+2*l*s*i+s*s*a,h.y=l*l*e+2*l*s*n+s*s*r,o&&(h.rotation=57.2957795*Math.atan2((n-e)*l+(r-n)*s,(i-t)*l+(a-i)*s))},e._findPathProblems=function(t){var e=t.path,i=e&&e.length||0;if(6>i||(i-2)%4){var n="\tCannot parse 'path' array due to invalid number of entries in path. ";return n+="There should be an odd number of points, at least 3 points, and 2 entries per point (x & y). ",(n+="See 'CanvasRenderingContext2D.quadraticCurveTo' for details as 'path' models a quadratic bezier.\n\n")+"Only [ "+i+" ] values found. Expected: "+Math.max(4*Math.ceil((i-2)/4)+2,6)}for(var a=0;i>a;a++)if(isNaN(e[a]))return"All data in path array must be numeric";var r=t.start;if(isNaN(r)&&void 0!==r)return"'start' out of bounds. Expected 0 to 1, got: "+r;var s=t.end;if(isNaN(s)&&void 0!==s)return"'end' out of bounds. Expected 0 to 1, got: "+s;var o=t.orient;return o&&"fixed"!=o&&"auto"!=o&&"cw"!=o&&"ccw"!=o?'Invalid orientation value. Expected ["fixed", "auto", "cw", "ccw", undefined], got: '+o:void 0},createjs.MotionGuidePlugin=t}(),this.createjs=this.createjs||{},function(){var t=createjs.TweenJS=createjs.TweenJS||{};t.version="1.0.0",t.buildDate="Thu, 14 Sep 2017 19:47:47 GMT"}(),function(t){var e=-1,i={onVisible:function(t){var e=i.isSupported();if(!e||!i.hidden())return t(),e;var n=i.change(function(e,a){i.hidden()||(i.unbind(n),t())});return n},change:function(t){if(!i.isSupported())return!1;var n=e+=1;return i._callbacks[n]=t,i._listen(),n},unbind:function(t){delete i._callbacks[t]},afterPrerendering:function(t){var e=i.isSupported();if(!e||"prerender"!=i.state())return t(),e;var n=i.change(function(e,a){"prerender"!=a&&(i.unbind(n),t())});return n},hidden:function(){return!(!i._doc.hidden&&!i._doc.webkitHidden)},state:function(){return i._doc.visibilityState||i._doc.webkitVisibilityState||"visible"},isSupported:function(){return!(!i._doc.visibilityState&&!i._doc.webkitVisibilityState)},_doc:document||{},_callbacks:{},_change:function(t){var e=i.state();for(var n in i._callbacks)i._callbacks[n].call(i._doc,t,e)},_listen:function(){if(!i._init){var t="visibilitychange";i._doc.webkitVisibilityState&&(t="webkit"+t);var e=function(){i._change.apply(i,arguments)};i._doc.addEventListener?i._doc.addEventListener(t,e):i._doc.attachEvent(t,e),i._init=!0}}};"undefined"!=typeof module&&module.exports?module.exports=i:t.Visibility=i}(this),function(t,e){function i(t){this.initialize(t)}i.prototype=Object.create(PIXI.Container.prototype),i.prototype.constructor=i,i.prototype.initialize=function(t){PIXI.Container.call(this),this.anchor={x:0,y:0,set:function(){}},this.backgroundWidth=void 0!==t.backgroundWidth?t.backgroundWidth:500,this.backgroundHeight=void 0!==t.backgroundHeight?t.backgroundHeight:80,this.backgroundTint=void 0!==t.backgroundTint?t.backgroundTint:16777215,this.foregroundWidth=void 0!==t.foregroundWidth?t.foregroundWidth:500,this.foregroundHeight=void 0!==t.foregroundHeight?t.foregroundHeight:80,this.foregroundTint=void 0!==t.foregroundTint?t.foregroundTint:16777215,this.offsetX=void 0!==t.offsetX?t.offsetX:0,this.offsetY=void 0!==t.offsetY?t.offsetY:0,this.isAnimated=!0,this.duration=100,this.background=new PIXI.Sprite,this.background.texture=PIXI.Texture.WHITE,this.background.tint=this.backgroundTint,this.background.stretch(this.backgroundWidth,this.backgroundHeight),this.addChild(this.background),this.foregroundContainer=new PIXI.Container,this.addChild(this.foregroundContainer),this.foreground=new PIXI.Sprite,this.foreground.texture=PIXI.Texture.WHITE,this.foreground.tint=this.foregroundTint,this.foreground.stretch(this.foregroundWidth,this.foregroundHeight),this.foregroundContainer.addChild(this.foreground),this.foregroundContainer.x=this.offsetX,this.foregroundContainer.y=this.offsetY,this.background.x=0,this.background.y=0,this.percentage=0,this.toPercentage=1,this.isAnimating=!1;var e=new PIXI.Graphics;this.foreground.mask=e,this.foregroundContainer.addChild(e),this.centered()},i.prototype.setPercent=function(t,e){this.timeout=this.duration,this.isAnimating=void 0===e?this.isAnimated:e,this.isAnimating?this.toPercentage=t:(this.toPercentage=t,this.percentage=t,this.drawMask(t))},i.prototype.onUpdate=function(t){if(this.isAnimating&&this.timeout>0){this.timeout-=t;var e=(this.duration-this.timeout)/this.duration,i=this.toPercentage-this.percentage;this.drawMask(this.percentage+i*e)}this.timeout<=0&&this.percentage!==this.toPercentage&&(this.isAnimating=!1,this.percentage=this.toPercentage,this.drawMask(this.toPercentage))},i.prototype.drawMask=function(t){var e=this.foreground.mask,i=-this.foregroundWidth*this.anchor.x-this.offsetX*this.anchor.x,n=-this.foregroundHeight*this.anchor.y-this.offsetY*this.anchor.y;e&&(e.clear(),e.beginFill(16777215,1),e.drawRect(i,n,this.foregroundWidth*t,this.foregroundHeight),e.endFill()),this.percentage=t},t.LoadingBar=i}(window),function(t,e){function i(){this.initialize()}i.prototype.initialize=function(){this.map=[[0,0,0,0,0,0,0,1,1,1,1,1,1,1,1,1,0,0,0,1,1,1,1,1,1,1,1,1,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,1,1,1,1,1,1,1,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,1,1,1,1,1,1,1,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,1,1,1,1,1,1,1,1,1,0,0,0,1,1,1,1,1,1,1,1,1,0,0,0,0],[0,0,0,0,0,0,0,1,1,1,1,1,1,1,1,1,0,0,0,1,1,1,1,1,1,1,1,1,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]]},i.prototype.getPath=function(t,e){var i=[],n=new Tile(t.x,t.y,0,0,0);return n.parentTile=null,i.push(n),this.find(e.x,e.y,i,[])},i.prototype.getOptimizedPath=function(t,e){var i=[],n=new Tile(t.x,t.y,0,0,0);n.parentTile=null,i.push(n);var a=this.find(e.x,e.y,i,[]),r=0;do{this.isPtsOnLine(a[r-1],a[r],a[r+1])?a.splice(r,1):r++}while(void 0!==a[r]);return a},i.prototype.isPtsOnLine=function(t,e,i){if(!t||!e||!i)return!1;if(t.x===e.x&&e.x===i.x)return!0;if(t.y===e.y&&e.y===i.y)return!0;var n=(t.x-e.x)/(i.x-e.x),a=(t.y-e.y)/(i.y-e.y);return!isNaN(n)&&!isNaN(a)&&n===a},i.prototype.find=function(t,e,i,n){if(0===i.length)return null;for(var a=i[0],r=0,s=i.length,o=0;o<s;o++){if((v=i[o]).F<a.F&&(a=v,r=o),v.x===t&&v.y===e){for(var h=[v];null!==v.parentTile;)h.push(v.parentTile),v=v.parentTile;return h}}n.push(a),i.splice(r,1);for(var l=-1;l<=1;l++)for(var u=-1;u<=1;u++)if(0!==l||0!==u){var p=a.x+u,c=a.y+l,d=!1;for(var _ in n)if(n[_].x===p&&n[_].y===c){d=!0;break}if(this.map[c]&&0===this.map[c][p]&&!d){var f=a.G+10,m=p-t;m<=0&&(m=-m);var g=c-e;g<=0&&(g=-g);var y=10*(m+g),b=new Tile(p,c,f,y,f+y);b.parentTile=a;var v,T=!1,I=0;s=i.length;for(_=0;_<s;_++)i[_].x===b.x&&i[_].y===b.y&&(T=!0,I=_);if(T)(v=i[I]).G<a.G&&(v.G=a.G+10,(m=p-t)<=0&&(m=-m),(g=c-e)<=0&&(g=-g),v.H=10*(m+g),v.F=v.G+v.H,v.parentTile=a);else i.push(b)}}return this.find(t,e,i,n)},t.AStarPathfinder=i}(window),function(t,e){function i(t,e){this.initialize(t,e)}i.prototype.initialize=function(t,e){this.xSamples=t,this.ySamples=e,this.numVertices=this.xSamples.length,this.tSamples=new Array(this.numVertices),this.lengths=null,this.totalLength=0,this.APPROX_LINE_LENGTH=5,this.verticesPlus=null},i.prototype.catmullRom=function(t,e,i,n,a){var r=t*t,s=t*r;return{x:.5*(2*i.x+(-e.x+n.x)*t+(2*e.x-5*i.x+4*n.x-a.x)*r+(-e.x+3*i.x-3*n.x+a.x)*s),y:.5*(2*i.y+(-e.y+n.y)*t+(2*e.y-5*i.y+4*n.y-a.y)*r+(-e.y+3*i.y-3*n.y+a.y)*s)}},i.prototype.getAllPoints=function(t){void 0===t&&(t=this.APPROX_LINE_LENGTH),null===this.verticesPlus&&this.makeVerticesPlus(),null===this.lengths&&this.getSegmentLengths();var e=this.verticesPlus,i=new Array,n=0,a=0,r=e.length-3;if(r<=0)return[this.catmullRom(1,e[0],e[0],e[0],e[0])];for(a=0;a<r;a++){var s=e[a+1],o=e[a+2],h=this.catmullRom(.5,e[a],s,o,e[a+3]),l=h.x-s.x,u=h.y-s.y,p=h.x-o.x,c=h.y-o.y,d=Math.sqrt(l*l+u*u)+Math.sqrt(p*p+c*c);this.lengths[a]=d;for(var _=t/d,f=0;f<1;f+=_)i[n]=this.catmullRom(f,e[a],s,o,e[a+3]),i[n++].vertex=a}return i[n++]=this.catmullRom(1,e[a-1],e[a],e[a+1],e[a+2]),i},i.prototype.getTOfVertex=function(t){return null===this.lengths&&this.getSegmentLengths(),this.tSamples[t]},i.prototype.getSegmentLengths=function(){null===this.verticesPlus&&this.makeVerticesPlus();var t=this.verticesPlus;this.lengths=new Array,this.totalLength=0;for(var e=t.length-3,i=0;i<e;i++){var n=t[i+1],a=t[i+2],r=this.catmullRom(.5,t[i],n,a,t[i+3]),s=r.x-n.x,o=r.y-n.y,h=r.x-a.x,l=r.y-a.y,u=Math.sqrt(s*s+o*o)+Math.sqrt(h*h+l*l);this.lengths[i]=u,this.totalLength+=u}this.tSamples[0]=0;for(var p=0,c=this.lengths.length,d=0;d<c;d++)p+=this.lengths[d],this.tSamples[d+1]=p/this.totalLength},i.prototype.makeVerticesPlus=function(){this.verticesPlus=new Array;for(var t=this.xSamples.length,e=0;e<t;e++)this.verticesPlus.push({x:this.xSamples[e],y:this.ySamples[e]});this.verticesPlus.splice(0,0,this.verticesPlus[0]),this.verticesPlus.push(this.verticesPlus[this.verticesPlus.length-1])},t.CatmullRomSpline=i}(window),function(t,e){function i(t){this.initialize(t)}i.prototype.initialize=function(t){this.hex_code=t,t>16777215?(this.alpha=t>>>24,this.a=t>>>24):(this.alpha=255,this.a=t>>>255),this.red=t>>16&255,this.green=t>>8&255,this.blue=255&t,this.r=t>>16&255,this.g=t>>8&255,this.b=255&t},i.hex_to_color_32=function(t){return(t>16777215?t>>>24:t>>>255)<<24|(t>>16&255)<<16|(t>>8&255)<<8|255&t},i.get_color_32=function(t,e,i,n){return t<<24|e<<16|i<<8|n},i.hex_to_number=function(t){t=t.replace("#","0x");return t=PIXI.utils.hex2rgb(t),t=i.get_color_32(1,255*t[0],255*t[1],255*t[2])},t.Color=i}(window),function(t,e){function i(t,e,i,n,a){this.initialize(t,e,i,n,a)}i.SIZE=20,i.DX=-1,i.DY=7,i.prototype.initialize=function(t,e,i,n,a){this.x=t,this.y=e,this.G=i,this.H=n,this.F=a,this.parentTile=null},t.Tile=i}(window),function(t,e){var i=null;function n(){this.initialize()}n.getInstance=function(){return i||(i=new n),i},n.prototype.initialize=function(){this.setInitialValues();var t=store.get(this.keyName);if(t&&t.playedBefore){if(t)for(var e in t)Object.prototype.hasOwnProperty.call(t,e)&&(this[e]=t[e])}else this.playedBefore=!0,this.showHelpAtStart=!0,this.currentStage=0,this.quality="HIGH",this.soundEnabled=!0},n.prototype.setInitialValues=function(){this.quality="HIGH",this.playedBefore=!1,this.soundEnabled=!0,this.gameCompleted=!1,this.showHelpAtStart=!1,this.currentStage=0,this.currentDay=0,this.totalDaysPlaying=0,this.dayScore=0,this.totalProfit=0,this.totalScore=0,this.upgradeSkate=-1,this.upgradeTV=-1,this.upgradeStool=-1,this.keyName="2DPlay_Penguin_Diner"},n.prototype.save=function(){store.set(this.keyName,this)},n.prototype.reset=function(){store.set(this.keyName,null),this.setInitialValues()},n.prototype.getSave=function(){return store.get(this.keyName)},n.prototype.switchSound=function(){this.soundEnabled=!this.soundEnabled,this.executeSoundState()},n.prototype.executeSoundState=function(){this.soundEnabled?PIXI.sound.unmuteAll():PIXI.sound.muteAll()},n.prototype.switchQuality=function(){},Object.defineProperty(n.prototype,"soundButtonLabel",{get:function(){return this.soundEnabled?"Switch sound OFF":"Switch sound ON"}}),Object.defineProperty(n.prototype,"qualityButtonLabel",{get:function(){switch(this.quality){case"LOW":return"SET GRAPHICS QUALITY TO MED";case"MEDIUM":return"SET GRAPHICS QUALITY TO HIGH";default:return"SET GRAPHICS QUALITY TO LOW"}}}),t.SOManager=n}(window),function(t,e){function i(){this.initialize()}i.prototype=Object.create(PIXI.Container.prototype),i.prototype.constructor=i,i.prototype.initialize=function(){PIXI.Container.call(this);var t=new PIXI.Sprite;t.texture=PIXI.Texture.WHITE,t.stretch(app.width,app.height),this.addChild(t)},i.prototype.onUpdate=function(t){},i.prototype.onShow=function(){},i.prototype.onHide=function(){},t.AdsScreen=i}(window),function(t,e){function i(){this.initialize()}i.prototype=Object.create(PIXI.Container.prototype),i.prototype.constructor=i,i.prototype.initialize=function(){PIXI.Container.call(this),this.didShowMobile=!1,this.isInitialized=!1;var t=PIXI.Sprite.from("door");t.anchor.set(.5,.5),t.x=app.width/2,t.y=app.height/2,this.addChild(t),this.dayGoal=GameData.DAY_GOAL,this.blinds,this.animator,this.localConv,this.upgradeShop,this.part,this.next_day_btn=new PIXI.Text("START NEXT DAY",Styles.DAY_RESULT_BTN),this.next_day_btn.anchor.set(.5,.5),this.addChild(this.next_day_btn),this.main_menu_btn=new PIXI.Text("MAIN MENU",Styles.DAY_RESULT_BTN),this.main_menu_btn.anchor.set(.5,.5),this.addChild(this.main_menu_btn),this.upgrades_btn=new PIXI.Text("UPGRADES",Styles.DAY_RESULT_BTN),this.upgrades_btn.style.fill=16041472,this.upgrades_btn.anchor.set(.5,.5),this.addChild(this.upgrades_btn),this.continue_btn=new PIXI.Text("CONTINUE",Styles.DAY_RESULT_BTN),this.continue_btn.anchor.set(.5,.5),this.addChild(this.continue_btn),this.next_stage_btn=new PIXI.Text("START NEXT LEVEL",Styles.DAY_RESULT_BTN),this.next_stage_btn.anchor.set(.5,.5),this.addChild(this.next_stage_btn),this.submit_score_btn=new PIXI.Text("SUBMIT SCORE",Styles.DAY_RESULT_BTN),this.submit_score_btn.anchor.set(.5,.5),this.addChild(this.submit_score_btn),this.day_goal_caption=new PIXI.Text("NEEDED:",Styles.RESULT_LABEL),this.day_goal_caption.anchor.set(1,.5),this.addChild(this.day_goal_caption),this.day_earnings_caption=new PIXI.Text("EARNED:",Styles.RESULT_LABEL),this.day_earnings_caption.anchor.set(1,.5),this.addChild(this.day_earnings_caption),this.day_profit_caption=new PIXI.Text("PROFIT:",Styles.RESULT_LABEL),this.day_profit_caption.anchor.set(1,.5),this.addChild(this.day_profit_caption),this.total_profit_caption=new PIXI.Text("PENNY'S BANK:",Styles.RESULT_LABEL),this.total_profit_caption.anchor.set(1,.5),this.addChild(this.total_profit_caption),this.total_earnings_caption=new PIXI.Text("TOTAL:",Styles.RESULT_LABEL),this.total_earnings_caption.anchor.set(1,.5),this.addChild(this.total_earnings_caption),this.day_goal_str=new PIXI.Text("$0",Styles.RESULT_LABEL),this.day_goal_str.anchor.set(0,.5),this.addChild(this.day_goal_str),this.day_earnings_str=new PIXI.Text("$0",Styles.RESULT_LABEL),this.day_earnings_str.anchor.set(0,.5),this.addChild(this.day_earnings_str),this.day_profit_str=new PIXI.Text("$0",Styles.RESULT_LABEL),this.day_profit_str.anchor.set(0,.5),this.addChild(this.day_profit_str),this.total_profit_str=new PIXI.Text("$0",Styles.RESULT_LABEL),this.total_profit_str.anchor.set(0,.5),this.addChild(this.total_profit_str),this.total_earnings_str=new PIXI.Text("$0",Styles.RESULT_LABEL),this.total_earnings_str.anchor.set(0,.5),this.addChild(this.total_earnings_str),this.day_failed_caption=new PIXI.Text("YOU DID NOT EARN ENOUGH FOR THE DAY",Styles.DAY_RESULT_BTN),this.day_failed_caption.anchor.set(.5,.5),this.addChild(this.day_failed_caption),this.day_win_caption=new PIXI.Text("A SUCCESSFUL DAY",Styles.DAY_RESULT_BTN),this.day_win_caption.anchor.set(.5,.5),this.day_win_caption.style.fontSize=28,this.day_win_caption.style.fill=39168,this.addChild(this.day_win_caption),this.progress_saved_caption=new PIXI.Text("(YOUR PROGRESS WILL BE SAVED)",Styles.PROGRESS_SAVE_LABEL),this.progress_saved_caption.anchor.set(.5,.5),this.addChild(this.progress_saved_caption),this.tip=new DayResultTip,this.tip.position.set(370,100),this.addChild(this.tip),this.tip.visible=!1,this.day_failed_caption.visible=this.day_win_caption.visible=this.progress_saved_caption.visible=this.day_goal_caption.visible=this.day_earnings_caption.visible=this.day_profit_caption.visible=this.total_profit_caption.visible=this.total_earnings_caption.visible=this.day_goal_str.visible=this.day_earnings_str.visible=this.day_profit_str.visible=this.total_profit_str.visible=this.total_earnings_str.visible=!1,this.next_day_btn.visible=this.continue_btn.visible=this.next_stage_btn.visible=this.main_menu_btn.visible=this.submit_score_btn.visible=this.upgrades_btn.visible=!1;var e=app.width/2;this.day_win_caption.position.set(e,62),this.day_failed_caption.position.set(e,62),this.progress_saved_caption.position.set(e,365),this.day_goal_caption.position.set(e,110),this.day_earnings_caption.position.set(e,145),this.day_profit_caption.position.set(e,180),this.total_profit_caption.position.set(e,215),this.total_earnings_caption.position.set(e,250),this.day_goal_str.position.set(e+7,110),this.day_earnings_str.position.set(e+7,145),this.day_profit_str.position.set(e+7,180),this.total_profit_str.position.set(e+7,215),this.total_earnings_str.position.set(e+7,250);this.next_day_btn.position.set(200,290),this.next_stage_btn.position.set(200,290),this.upgrades_btn.position.set(360,290),this.main_menu_btn.position.set(300,330),this.continue_btn.position.set(300,330),this.submit_score_btn.position.set(200,330),SOManager.getInstance().totalDaysPlaying+=1},i.prototype.init=function(){this.isInitialized||(this.isInitialized=!0,this.showResult(),this.next_day_btn.pointerup=this.onButtonClick.bind(this),this.upgrades_btn.pointerup=this.onButtonClick.bind(this),this.continue_btn.pointerup=this.onButtonClick.bind(this),this.next_stage_btn.pointerup=this.onButtonClick.bind(this),this.main_menu_btn.pointerup=this.onButtonClick.bind(this),this.submit_score_btn.pointerup=this.onButtonClick.bind(this),this.next_day_btn.interactive=!0,this.upgrades_btn.interactive=!0,this.continue_btn.interactive=!0,this.next_stage_btn.interactive=!0,this.main_menu_btn.interactive=!0,this.submit_score_btn.interactive=!0,this.next_day_btn.buttonMode=!0,this.upgrades_btn.buttonMode=!0,this.continue_btn.buttonMode=!0,this.next_stage_btn.buttonMode=!0,this.main_menu_btn.buttonMode=!0,this.submit_score_btn.buttonMode=!0,this.next_day_btn.pointerover=this.btnHoverIn.bind(this),this.upgrades_btn.pointerover=this.btnYellowHoverIn.bind(this),this.continue_btn.pointerover=this.btnHoverIn.bind(this),this.next_stage_btn.pointerover=this.btnHoverIn.bind(this),this.main_menu_btn.pointerover=this.btnHoverIn.bind(this),this.submit_score_btn.pointerover=this.btnHoverIn.bind(this),this.next_day_btn.pointerout=this.btnHoverOut.bind(this),this.upgrades_btn.pointerout=this.btnYellowHoverOut.bind(this),this.continue_btn.pointerout=this.btnHoverOut.bind(this),this.next_stage_btn.pointerout=this.btnHoverOut.bind(this),this.main_menu_btn.pointerout=this.btnHoverOut.bind(this),this.submit_score_btn.pointerout=this.btnHoverOut.bind(this),this.setTips(this.day_goal_caption,this.day_goal_str,0),this.setTips(this.day_earnings_caption,this.day_earnings_str,1),this.setTips(this.day_profit_caption,this.day_profit_str,2),this.setTips(this.total_profit_caption,this.total_profit_str,3),this.setTips(this.total_earnings_caption,this.total_earnings_str,4),this.tip.alpha=0,this.tip.visible=!0)},i.prototype.btnYellowHoverIn=function(t){SoundManager.getInstance().startSound("button_rollover",{volume:.1}),t.target.originalColor=t.target.style.fill,t.target.style.fill=16646034},i.prototype.btnYellowHoverOut=function(t){t.currentTarget&&(t.currentTarget.style.fill=t.currentTarget.originalColor)},i.prototype.btnHoverIn=function(t){SoundManager.getInstance().startSound("button_rollover",{volume:.1}),t.target.originalColor=t.target.style.fill,t.target.style.fill=Styles.RESULT_HOVER.fill},i.prototype.btnHoverOut=function(t){t.currentTarget&&(t.currentTarget.style.fill=t.currentTarget.originalColor)},i.prototype.setTips=function(t,e,i){t.pointerover=e.pointerover=this.onTipHover.bind(this),t.pointerout=e.pointerout=this.onTipOut.bind(this),t.index=e.index=i,t.interactive=e.interactive=!0},i.prototype.onTipHover=function(t){this.tip.setType(t.target.index),this.tip.y=t.target.y,createjs.Tween.get(this.tip,{overwrite:!0}).to({alpha:1},100)},i.prototype.onTipOut=function(t){createjs.Tween.get(this.tip,{overwrite:!0}).to({alpha:0},100)},i.prototype.onUpgradeShopDispose=function(){this.total_profit_str.text=Utils.formattedCurrency(SOManager.getInstance().totalProfit)},i.prototype.showResult=function(){var t=this,e=SOManager.getInstance().dayScore-this.dayGoal;e<0?(this.main_menu_btn.x=360,this.next_day_btn.text="RESTART DAY",this.day_failed_caption.visible=!0):this.day_win_caption.visible=!0;var i=this.dayGoal;createjs.Tween.get().wait(500).call(function(){t.day_goal_caption.visible=!0,t.day_goal_str.visible=!0,t.day_goal_str.text=Utils.formattedCurrency(i),SoundManager.getInstance().startSound("message_popup"),t.showStarEffect(t.day_goal_str)}),createjs.Tween.get().wait(1e3).call(function(){t.day_earnings_caption.visible=!0,t.day_earnings_str.visible=!0,t.day_earnings_str.text=Utils.formattedCurrency(n),SoundManager.getInstance().startSound("message_popup"),t.showStarEffect(t.day_earnings_str)}),createjs.Tween.get().wait(1500).call(function(){t.day_profit_caption.visible=!0,t.day_profit_str.visible=!0,SoundManager.getInstance().startSound("message_popup"),t.showStarEffect(t.day_profit_str)}),e>=0&&(SOManager.getInstance().currentDay+=1,SOManager.getInstance().totalProfit+=e,SOManager.getInstance().totalScore+=SOManager.getInstance().dayScore),SOManager.getInstance().save();var n=SOManager.getInstance().dayScore;createjs.Tween.get().wait(2e3).call(function(){t.total_profit_caption.visible=!0,t.total_profit_str.visible=!0,SoundManager.getInstance().startSound("message_popup"),t.showStarEffect(t.total_profit_str)}),createjs.Tween.get().wait(2500).call(function(){t.total_earnings_caption.visible=!0,t.total_earnings_str.visible=!0,SoundManager.getInstance().startSound("message_popup"),t.showStarEffect(t.total_earnings_str)}),createjs.Tween.get().wait(3e3).call(function(){Config.trackHighscore&&e<0&&(t.submit_score_btn.visible=!0)}),SOManager.getInstance().currentDay==GameData.DAYS_AT_CURRENT_STAGE?(SOManager.getInstance().currentDay=0,SOManager.getInstance().currentStage+=1,SOManager.getInstance().save(),SOManager.getInstance().currentStage==GameData.TOTAL_STAGES?(createjs.Tween.get().wait(3e3).call(function(){t.continue_btn.visible=!0}),SOManager.getInstance().gameCompleted=!0):createjs.Tween.get().wait(3e3).call(function(){t.next_stage_btn.visible=!0,t.upgrades_btn.visible=!0,t.main_menu_btn.visible=!0,t.progress_saved_caption.visible=!0,SOManager.getInstance().save()})):createjs.Tween.get().wait(3e3).call(function(){t.next_day_btn.visible=!0,t.upgrades_btn.visible=!0,t.main_menu_btn.visible=!0,t.progress_saved_caption.visible=!0,SOManager.getInstance().save()}),SOManager.getInstance().save()},i.prototype.showStarEffect=function(t){for(var e=Math.degreesToRadians(45),i=0;i<8;i++){var n=PIXI.Sprite.from("white_star");n.scale.set(5),n.centered(),n.x=t.x+t.width/2,n.y=t.y,this.addChild(n);var a=new PIXI.Point;a.setLength(25),a.setAngle(e*i);var r=createjs.Ease.cubicOut;createjs.Tween.get(n).to({x:n.x+a.x,y:n.y+a.y},300,r),createjs.Tween.get(n).to({alpha:.8},300,r),createjs.Tween.get(n.scale).to({x:1,y:2},300).call(function(){this.removeFromParent()}.bind(n))}},i.prototype.onButtonClick=function(t){switch(SoundManager.getInstance().startSound("click_game_object"),t.target){case this.next_day_btn:AdManager.getInstance().showAd(),app.addScreen(new GameScreen,App.ANIMATION_BLACKOUT,!0);break;case this.continue_btn:AdManager.getInstance().showAd(),app.addScreen(new EndScreen,App.ANIMATION_BLACKOUT,!0);break;case this.next_stage_btn:AdManager.getInstance().showAd(),app.addScreen(new MapScreen,App.ANIMATION_BLACKOUT,!0);break;case this.upgrades_btn:app.addScreen(new UpgradesScreen,App.ANIMATION_BLACKOUT,!1);break;case this.main_menu_btn:app.addScreen(new HomeScreen,App.ANIMATION_BLACKOUT,!0);break;case this.submit_score_btn:}},i.prototype.onUpdate=function(t){},i.prototype.onShow=function(){if((PIXI.utils.isMobile.phone||PIXI.utils.isMobile.tablet)&&!this.didShowMobile){var t=SOManager.getInstance().totalDaysPlaying;if(t>=3&&t%4==1){this.didShowMobile=!0;var e=new MobileScreen;return void app.addScreen(e)}}this.init(),SoundManager.getInstance().startMusicTrack("splash_screen_track"),this.setData()},i.prototype.onHide=function(){},i.prototype.setData=function(){var t=SOManager.getInstance().dayScore-this.dayGoal,e=Utils.formattedCurrency(t);this.day_profit_str.text=e;var i=SOManager.getInstance().totalProfit,n=SOManager.getInstance().totalScore;this.total_profit_str.text=Utils.formattedCurrency(i),this.total_earnings_str.text=Utils.formattedCurrency(n),SOManager.getInstance().save()},t.DayResultScreen=i}(window),function(t,e){function i(){this.initialize()}i.prototype=Object.create(PIXI.Container.prototype),i.prototype.constructor=i,i.prototype.initialize=function(){PIXI.Container.call(this),SoundManager.getInstance().stopMusicTrack(),SoundManager.getInstance().startMusicTrack("crowd_clap");var t=new PIXI.Sprite;t.texture=PIXI.Texture.WHITE,t.stretch(app.width,app.height),this.addChild(t),this.mapSky=PIXI.Sprite.from("sky_gradient"),this.mapSky.width=app.width,this.addChild(this.mapSky),this.clouds=PIXI.Sprite.from("clouds"),this.clouds.position.set(100,100),this.addChild(this.clouds),this.hills=PIXI.Sprite.from("hills_0"),this.hills.y=200,this.hills.x=230,this.addChild(this.hills),this.frontLayout=PIXI.Sprite.from("map_front_1"),this.frontLayout.y=72,this.frontLayout.x=-50,this.addChild(this.frontLayout),this.frontLayout2=PIXI.Sprite.from("map_front_2"),this.frontLayout2.y=72,this.frontLayout2.x=this.frontLayout.x+this.frontLayout.width-1,this.addChild(this.frontLayout2);this.popup=new PIXI.NineSlicePlane(PIXI.Texture.from("popup"),60,60,60,60),this.popup.width=app.width-6,this.popup.height=47,this.popup.position.set(3,3),this.addChild(this.popup);var e="Well done, that was some pretty sharp service! Thanks to you, Penny is\n";e+="on her way back home!\n";var i=new PIXI.Text("",Styles.POPUP_LABEL);if(i.position.set(5,10),this.popup.addChild(i),i.text=e,this.penguin=PIXI.Sprite.from("penguin_resting"),this.addChild(this.penguin),this.penguin.x=-100,this.penguin.y=110,this.isWebGL=PIXI.utils.isWebGLSupported(),this.isWebGL){this.w1ength=9,this.w1Points=[],this.w1Timer=0;for(let t=0;t<20;t++)this.w1Points.push(new PIXI.Point(t*this.w1ength,0));this.flag=new PIXI.SimpleRope(PIXI.utils.TextureCache.flag,this.w1Points),this.flag.x=390,this.flag.y=170,this.addChild(this.flag),this.w2Points=[],this.w21ength=6,this.w2Timer=0;for(let t=0;t<10;t++)this.w2Points.push(new PIXI.Point(t*this.w21ength,0));this.symbol=new PIXI.SimpleRope(PIXI.utils.TextureCache.flag_penguin_symbol,this.w2Points),this.symbol.x=55,this.symbol.y=0,this.flag.addChild(this.symbol)}this.setButtons(),this.btn1.visible=Config.trackHighscore,this.btn2.visible=Config.trackHighscore,this.btn3.visible=Config.advertisePD2},i.prototype.setButtons=function(){var t=app.width-10,e=260;this.btn1=this.createBtn("SUBMIT SCORE",t,e,22,0,this.onSubmit),this.btn2=this.createBtn("HIGH SCORES",t,293,22,0,this.onHighScores),this.btn3=this.createBtn("PLAY MORE GAMES",t,326,22,0,this.onPlayMore),this.btn4=this.createBtn("MAIN MENU",t,359,22,0,this.onMainMenu)},i.prototype.createBtn=function(t,e,i,n,a,r){var s=new PIXI.Text(t,Styles.MENU_BTN);return s.style.fontSize=n,s.pointerup=r.bind(this),s.pointerover=this.btnHoverIn.bind(this),s.pointerout=this.btnHoverOut.bind(this),s.interactive=!0,s.buttonMode=!0,s.anchor.x=1,s.position.set(e,i),s.rotation=a||0,this.addChild(s),s},i.prototype.onSubmit=function(t){SoundManager.getInstance().startSound("click_game_object")},i.prototype.onHighScores=function(t){SoundManager.getInstance().startSound("click_game_object")},i.prototype.onPlayMore=function(t){SoundManager.getInstance().startSound("click_game_object")},i.prototype.onMainMenu=function(t){SoundManager.getInstance().startSound("click_game_object"),SOManager.getInstance().reset();var e=new HomeScreen;app.addScreen(e,App.ANIMATION_BLACKOUT,!0)},i.prototype.btnHoverIn=function(t){SoundManager.getInstance().startSound("button_rollover",{volume:.1}),t.target.style.fill=16566528},i.prototype.btnHoverOut=function(t){t.currentTarget&&(t.currentTarget.style.fill=14886181)},i.prototype.onUpdate=function(t){if(this.frontLayout.x-=.01*t,this.frontLayout2.x-=.01*t,this.clouds.x-=.03*t,this.clouds.x<-this.clouds.width&&(this.clouds.x=app.width),this.frontLayout2.x<=0&&(this.frontLayout2.x=0),this.isWebGL){this.w1Timer+=.001*t,this.w2Timer+=.001*t;for(let t=0;t<this.w1Points.length;t++)this.w1Points[t].y=2*Math.sin(.5*t+this.w1Timer),this.w1Points[t].x=t*this.w1ength+2*Math.cos(.3*t+this.w1Timer);for(let t=0;t<this.w2Points.length;t++)this.w2Points[t].y=2*Math.sin(.5*t+this.w2Timer)}},i.prototype.onShow=function(){},i.prototype.onHide=function(){},t.EndScreen=i}(window),function(t,e){function i(){this.initialize()}i.prototype=Object.create(PIXI.Container.prototype),i.prototype.constructor=i,i.prototype.initialize=function(){PIXI.Container.call(this),this.soundMan=SoundManager.getInstance(),this.backgroundLayer=new PIXI.Container,this.addChild(this.backgroundLayer),this.gameLayer=new PIXI.Container,this.addChild(this.gameLayer),this.guiLayer=new PIXI.Container,this.addChild(this.guiLayer),Config.isWhiteLabel||(this.company_btn=PIXI.Sprite.from("logo"),this.company_btn.anchor.set(1,0),this.company_btn.fitTo(80,30),this.company_btn.position.set(app.width-10,5),this.company_btn.interactive=!0,this.company_btn.buttonMode=!0,this.company_btn.pointerup=this.onButtonClick.bind(this),this.guiLayer.addChild(this.company_btn)),this.pause_btn=new PIXI.Text("PAUSE",Styles.MENU_BTN),this.pause_btn.style.fontSize=16,this.pause_btn.anchor.x=1,this.pause_btn.pointerup=this.onButtonClick.bind(this),this.pause_btn.pointerover=this.btnHoverIn.bind(this),this.pause_btn.pointerout=this.btnHoverOut.bind(this),this.pause_btn.buttonMode=!0,this.pause_btn.position.set(app.width-5,app.height-110),this.guiLayer.addChild(this.pause_btn);var t=new PIXI.Sprite;if(t.texture=PIXI.Texture.WHITE,t.stretch(app.width,app.height),this.backgroundLayer.addChild(t),this.isGameOver=!1,this.order_plate_btn_0=new OrderPlate,this.order_plate_btn_1=new OrderPlate,this.order_plate_btn_2=new OrderPlate,this.order_plate_btn_3=new OrderPlate,this.order_plate_btn_4=new OrderPlate,this.allOrderPlates=[],this.table_0=new Table,this.table_1=new Table,this.table_2=new Table,this.table_3=new Table,this.table_4=new Table,this.allTables=[],this.goal_tf=new PIXI.Text("$00",Styles.GOAL_LABEL),this.score_tf=new PIXI.Text("$00",Styles.SCORE_LABEL),this.background_mc=null,this.objects_mc=[],this.tv_clip=new TV,this.tv_clip.position.set(app.width/2+34,136),this.gameLayer.addChild(this.tv_clip),this.pickupMoneyMessageTimeoutID=null,this.hero=new Hero,this.heroQueue=new HeroCommandQueue,this.gamePaused=!1,this.timer=0,this.showClosedSign=!1,this.foodCooking=[],this.guestsQueue=[],this.nextGuestAppearCounter=0,this.lastCommand=new Command,this.attachedClipCount=0,this.totalGuestsOnScreen=0,this.pauseMenu=new PauseMenu,this.setup(),this.clock=new Clock,this.clock.position.set(70,30),this.backgroundLayer.addChild(this.clock),this.clock.setPercent(0),1===SOManager.getInstance().currentStage){var e=PIXI.Sprite.from("level_2_clock_place");e.anchor.set(.5,1),this.gameLayer.addChild(e),this.clock.position.set(75,60),e.position.set(70,95)}else 2===SOManager.getInstance().currentStage&&this.clock.position.set(61,90)},i.prototype.setup=function(){SOManager.getInstance().dayScore=0,this.tv_clip.play(parseInt(SOManager.getInstance().upgradeTV)+1);var e=SOManager.getInstance().currentStage;this.atmosphere=new t["Atmosphere"+(e+1)],this.backgroundLayer.addChild(this.atmosphere),this.background_mc=PIXI.Sprite.from("stage_"+(e+1)),this.background_mc.x=-2,this.backgroundLayer.addChild(this.background_mc),1===SOManager.getInstance().currentStage?this.background_mc.position.set(-10,10):2===SOManager.getInstance().currentStage&&this.background_mc.position.set(0,70);var i=PIXI.Sprite.from("red_carpet");i.position.set(0,180),this.backgroundLayer.addChild(i);var n=PIXI.Sprite.from("cashier_tabletop");n.position.set(-6,315),this.guiLayer.addChild(n),this.trashcan_btn=PIXI.Sprite.from("trashcan"),this.trashcan_btn.anchor.set(.5,1),this.trashcan_btn.position.set(424,app.height+10),this.trashcan_btn.interactive=!0,this.trashcan_btn.buttonMode=!0,this.trashcan_btn.pointertap=this.onButtonClick.bind(this),this.trashcan_btn.scale.set(1.1),this.gameLayer.addChild(this.trashcan_btn);this.table_0.position.set(215,133),this.table_0.delegate=this,this.gameLayer.addChild(this.table_0),this.table_1.position.set(454,133),this.table_1.delegate=this,this.gameLayer.addChild(this.table_1),this.table_2.position.set(334.5,212),this.table_2.delegate=this,this.gameLayer.addChild(this.table_2),this.table_3.position.set(215,314),this.table_3.delegate=this,this.gameLayer.addChild(this.table_3),this.table_4.position.set(454,314),this.table_4.delegate=this,this.gameLayer.addChild(this.table_4);var a=[new Tile(11,1),new Tile(23,1),new Tile(17,5),new Tile(11,10),new Tile(23,10)],r=[new Tile(11,1),new Tile(23,1),new Tile(17,2),new Tile(11,7),new Tile(23,7)],s=[new Tile(8,1),new Tile(20,1),new Tile(14,5),new Tile(8,10),new Tile(20,10)],o=[new Tile(14,1),new Tile(26,1),new Tile(20,5),new Tile(14,10),new Tile(26,10)],h=[[8,8],[8,8],[8,8],[10,8],[8,10]];this.allOrderPlates=[],this.allTables=[];for(var l=0;l<5;l++){(p=this["order_plate_btn_"+l]).index=l,p.pointertap=this.onButtonClick.bind(this),this.allOrderPlates.push(p);var u=this["table_"+l];this.allTables.push(this["table_"+l]),u.tileUpCoords=r[l],u.tileDownCoords=a[l],u.tileLeftPlace=s[l],u.tileRightPlace=o[l],u.guestsSpeeds=h[l]}this.goal_tf.text=GameData.DAY_GOAL.toString(),this.score_tf.text="0",this.lastCommand=null,this.hero=new Hero,this.hero.position.set(334.5,290),this.gameLayer.addChild(this.hero),this.heroQueue=new HeroCommandQueue,this.guestsQueue=[],Guest.selectedGuests=[],this.nextGuestAppearCounter=Math.floor(.5*GameData.GUEST_APPEAR_TIME),this.attachedClipCount=0,this.foodCooking=[],this.showClosedSign=!0,this.totalGuestsOnScreen=0,this.timer=1e3*GameData.DAY_TIME,this.gamePaused=!1,n.bringToFront(),this.pause_btn.bringToFront();for(l=0;l<5;l++){var p=this["order_plate_btn_"+l];this.guiLayer.addChild(p),p.position.set(290-60*l,382)}this.guiLayer.addChild(this.goal_tf),this.guiLayer.addChild(this.score_tf),this.goal_tf.anchor.x=1,this.score_tf.anchor.x=1,this.goal_tf.position.set(app.width-16,320),this.score_tf.position.set(app.width-16,347);var c=new PIXI.Text("$",Styles.GOAL_LABEL);c.position.set(app.width-70,320),this.guiLayer.addChild(c);var d=new PIXI.Text("$",Styles.SCORE_LABEL);d.position.set(app.width-70,347),this.guiLayer.addChild(d);var _=PIXI.Sprite.from("door");_.anchor.set(.5,.5),_.x=app.width/2,_.y=app.height/2,this.guiLayer.addChild(_);var f=GameData.DAY_GOAL.toString(),m=new PIXI.Text("Day "+(SOManager.getInstance().totalDaysPlaying+1),Styles.DAY_START);m.style.fontSize=28,m.centered(),m.position.set(app.width/2,app.height/2-25),this.guiLayer.addChild(m);var g=new PIXI.Text("You need to make $"+f,Styles.DAY_START);g.centered(),g.position.set(app.width/2,app.height/2+10),this.guiLayer.addChild(g),this._dLabel=m,this._gLabel=g,this.door=_},i.prototype.onButtonClick=function(e){switch(e.target){case this.table_0:case this.table_1:case this.table_2:case this.table_3:case this.table_4:var i=this.hero.y>=e.target.y?e.target.tileDownCoords:e.target.tileUpCoords;this.heroQueue.enqueue(new Command(Command.TYPE_MOVE_TO_TABLE,e.target,{tileX:i.x,tileY:i.y}));break;case this.order_plate_btn_0:case this.order_plate_btn_1:case this.order_plate_btn_2:case this.order_plate_btn_3:case this.order_plate_btn_4:this.heroQueue.enqueue(new Command(Command.TYPE_MOVE_TO_ORDER_PLATE,e.target,{tileX:15-3*e.target.index,tileY:11}));break;case this.trashcan_btn:this.heroQueue.enqueue(new Command(Command.TYPE_MOVE_TO_TRASHCAN,this.trashcan_btn));break;case this.pause_btn:this.lastCommand=new Command(Command.TYPE_PAUSE_GAME);break;case this.company_btn:t.open(Config.logoURL,"_blank")}},i.prototype.unpauseGame=function(){for(var t in this.gamePaused=!1,this.gameLayer.interactiveChildren=!0,this.guiLayer.interactiveChildren=!0,this.objects_mc)if(Object.prototype.hasOwnProperty.call(this.objects_mc,t)){var e=this.objects_mc[t];e instanceof Guest&&e.unpause()}},i.prototype.onUpdate=function(t){if(!this.gamePaused&&!this.isGameOver)if(Math.insertionSort(this.gameLayer.children,function(t,e){return t.y>e.y}),this.lastCommand&&this.lastCommand.type===Command.TYPE_PAUSE_GAME){for(var e in this.gamePaused=!0,this.lastCommand=null,this.heroQueue.clear(),this.objects_mc){if(Object.prototype.hasOwnProperty.call(this.objects_mc,e))(l=this.objects_mc[e])instanceof Guest&&l.pause()}this.showPauseMenu()}else{this.timer-=t,this.timer<=0&&(this.timer=0);var i=1-this.timer/(1e3*GameData.DAY_TIME);if(this.clock.setPercent(i),this.atmosphere.setPercent(i),this.timer<=0){if(this.showClosedSign){this.showClosedSign=!1;var n=PIXI.Sprite.from("door_sign");n.anchor.set(.5,1),this.gameLayer.addChild(n),n.position.set(50,-20),createjs.Tween.get(this).wait(300).call(function(){SoundManager.getInstance().startSound("close_sign_fall")}),createjs.Tween.get(n,{override:!0}).to({x:50,y:210},1200,createjs.Ease.bounceOut)}if(0===this.totalGuestsOnScreen){for(var a=0,r=0;r<this.allTables.length;r++){a+=(s=this.allTables[r]).earnings}if(0===a)return void this.onGameOver();null===this.pickupMoneyMessageTimeoutID&&this.showPickUp()}}if(this.lastCommand=this.heroQueue.dequeue(),null!==this.lastCommand)switch(this.lastCommand.type){case Command.TYPE_MOVE_TO_TRASHCAN:this.hero.targetObj=this.lastCommand.target,this.hero.moveTo(21,11);break;case Command.TYPE_MOVE_TO_ORDER_PLATE:this.hero.targetObj=this.lastCommand.target,this.hero.moveTo(this.lastCommand.data.tileX,this.lastCommand.data.tileY);break;case Command.TYPE_MOVE_TO_TABLE:var s=this.lastCommand.target,o=Guest.selectedGuests;if(o.length>0&&s.isFree()){for(r=0;r<o.length;r++)o[r].speed=s.guestsSpeeds[r],o[r].moveToTable(s);this.onGuestLeaveQueue(),this.heroQueue.open()}else this.hero.targetObj=this.lastCommand.target,this.hero.moveTo(this.lastCommand.data.tileX,this.lastCommand.data.tileY)}for(var e in this.nextGuestAppearCounter+=t/33.33,this.nextGuestAppearCounter>=GameData.GUEST_APPEAR_TIME&&this.timer>0&&(this.guestsQueue.length<3&&this.totalGuestsOnScreen<GameData.MAX_GUESTS_AT_ONCE&&this.addNewGuest(),this.nextGuestAppearCounter=0),this.objects_mc){if(Object.prototype.hasOwnProperty.call(this.objects_mc,e))this.objects_mc[e].update(t)}if(this.hero.update(t),this.hero.targetObjReached){switch(this.hero.targetObj){case this.table_0:case this.table_1:case this.table_2:case this.table_3:case this.table_4:var h=(s=this.hero.targetObj).guests;if(0===h.length&&s.earnings>0)this.takeTableMoney(s.earnings,s.x,s.y),this.soundMan.startSound("money_pickup"),SOManager.getInstance().dayScore+=s.earnings,this.score_tf.text=SOManager.getInstance().dayScore.toString(),s.takeMoney();else for(r=0;r<h.length;r++){var l;switch((l=h[r]).state){case Guest.STATE_WAITING_FOR_WAITER:l.makeOrder(),this.foodCooking.push({type:l.food,time:0});break;case Guest.STATE_WAITING_FOR_FOOD:this.hero.giveFood(l.food)&&(this.soundMan.startSound("food_give"),l.startEating(),s.showFood(l))}}break;case this.order_plate_btn_0:case this.order_plate_btn_1:case this.order_plate_btn_2:case this.order_plate_btn_3:case this.order_plate_btn_4:var u=this.hero.targetObj;this.hero.takeReadyFood(u.foodType)&&(this.soundMan.startSound("food_pickup"),u.setType(Food.TYPE_NONE));break;case this.trashcan_btn:this.hero.clearFood()}this.heroQueue.open(),this.hero.targetObjReached=!1}for(var p=0;p<this.foodCooking.length;p++){var c=this.foodCooking[p];if(c.time+=t/33.333,c.time>=GameData.FOOD_COOKING_TIME)for(var d=0;d<5;d++){if((u=this["order_plate_btn_"+d]).foodType===Food.TYPE_NONE){this.soundMan.startSound("food_ready"),u.setType(c.type),this.foodCooking.splice(p,1),p--;break}}}this.lastCommand=null}},i.prototype.addNewGuest=function(){var t=this.guestsQueue.length;if(Math.random()<=GameData.GUEST_DOUBLE_APPEAR_PROBABILITY){var e=new Guest;e.delegate=this,this.gameLayer.addChild(e),this.objects_mc["guest_"+this.attachedClipCount]=e,this.attachedClipCount++;var i=new Guest;this.gameLayer.addChild(i),this.objects_mc["guest_"+this.attachedClipCount]=i,this.attachedClipCount++,e.speed=9,i.speed=8;var n=[[new Tile(7,2),new Tile(6,4)],[new Tile(5,2),new Tile(4,4)],[new Tile(3,2),new Tile(2,4)]];e.setup(i,new Tile(0,2),n[t][0],0===t),i.setup(e,new Tile(0,4),n[t][1],0===t),this.guestsQueue.push([e,i])}else{var a=new Guest;this.objects_mc["guest_"+this.attachedClipCount]=a,a.delegate=this,this.gameLayer.addChild(a),this.attachedClipCount++,a.speed=8;var r=[new Tile(6,3),new Tile(4,3),new Tile(2,3)];a.setup(null,new Tile(0,3),r[t],0===t),this.guestsQueue.push([a])}this.totalGuestsOnScreen++},i.prototype.onGuestLeaveScreen=function(t){this.totalGuestsOnScreen--},i.prototype.onGuestLeaveQueue=function(t){this.guestsQueue.shift();for(var e=0;e<this.guestsQueue.length;e++)for(var i=0;i<this.guestsQueue[e].length;i++){this.guestsQueue[e][i].shiftInQueue(0===e)}Guest.selectedGuests=[]},i.prototype.dispose=function(){},i.prototype.onShow=function(){this.soundMan.startMusicTrack("game_track"),this.onGameStart()},i.prototype.onHide=function(){this.pickupMoneyMessageTimeoutID&&this.pickupMoneyMessageTimeoutID.pause()},i.prototype.onGameOver=function(){this.isGameOver=!0;var t=PIXI.Sprite.from("door");t.anchor.set(.5,.5),t.x=app.width/2,t.y=-app.height/2,this.guiLayer.addChild(t),SoundManager.getInstance().startSound("curtain_down"),SoundManager.getInstance().stopMusicTrack(),SoundManager.getInstance().startMusicTrack("splash_screen_track"),createjs.Tween.get(t).to({y:app.height/2},1600,createjs.Ease.bounceOut).call(function(){var t=new DayResultScreen;app.addScreen(t)})},i.prototype.onGameStart=function(){var t=this;SoundManager.getInstance().startSound("curtain_up"),createjs.Tween.get(this.door).wait(400).to({y:-app.height/2},900).call(function(){t.door.removeFromParent(),t.pause_btn.interactive=!0});var e=this._dLabel,i=this._gLabel;createjs.Tween.get(e).wait(1300).to({alpha:0},600).call(function(){e.removeFromParent()}),createjs.Tween.get(i).wait(1300).to({alpha:0},600).call(function(){i.removeFromParent()})},i.prototype.btnHoverIn=function(t){t.target.style.fill=16566528,SoundManager.getInstance().startSound("button_rollover",{volume:.1})},i.prototype.btnHoverOut=function(t){t.currentTarget&&(t.currentTarget.style.fill=14886181)},i.prototype.takeTableMoney=function(t,e,i){var n=new PIXI.Text("$"+t,Styles.PICKUP_MONEY);n.centered(),this.guiLayer.addChild(n),n.position.set(e,i-50),createjs.Tween.get(n).to({y:n.y-70},1500),createjs.Tween.get(n).wait(1e3).to({alpha:0},200).call(function(){n.removeFromParent()});var a=createjs.Ease.bounceOut;createjs.Tween.get(n.scale).wait(100).to({x:1.2,y:1.2},100).to({x:1,y:1},300,a)},i.prototype.showPauseMenu=function(){this.gameLayer.interactiveChildren=!1,this.guiLayer.interactiveChildren=!1;var t=PIXI.Sprite.from("upgrades_background");t.x=-2,this.addChild(t),t.alpha=0,createjs.Tween.get(t).to({alpha:1},200);var e=new PIXI.Text("GAME PAUSED",Styles.UPGRADE_BANK_LABEL);e.style.fontSize=32,e.position.set(app.width/2,70),e.anchor.set(.5,.5),t.addChild(e);var i=170,n=new PIXI.Text("RESUME GAME",Styles.RESULT_BTN);n.anchor.set(.5,.5),n.position.set(app.width/2,i),n.interactive=!0,n.buttonMode=!0,n.pointerover=this.btnHoverIn.bind(this),n.pointerout=this.btnHoverOut.bind(this),n.pointerup=this.onGameResume.bind(this),t.addChild(n);var a=new PIXI.Text("END DAY",Styles.RESULT_BTN);a.anchor.set(.5,.5),a.position.set(app.width/2,210),a.interactive=!0,a.buttonMode=!0,a.pointerover=this.btnHoverIn.bind(this),a.pointerout=this.btnHoverOut.bind(this),a.pointerup=this.onDayEnd.bind(this),t.addChild(a);var r=new PIXI.Text("(YOUR PROGRESS WILL BE SAVED)",Styles.PROGRESS_SAVE_LABEL);r.anchor.set(.5,.5),r.position.set(app.width/2,240),t.addChild(r);var s=new PIXI.Text(SOManager.getInstance().soundButtonLabel,Styles.RESULT_BTN);s.interactive=!0,s.buttonMode=!0,s.pointerover=this.btnHoverIn.bind(this),s.pointerout=this.btnHoverOut.bind(this),s.pointerup=this.onSoundSwitch.bind(this),s.anchor.set(.5,.5),s.position.set(app.width/2,270),t.addChild(s),this.pauseMenu=t,this.switchSound=s},i.prototype.onGameResume=function(){var t=this;createjs.Tween.get(this.pauseMenu).to({alpha:0},200).call(function(){t.unpauseGame(),t.pauseMenu.removeFromParent(),t.switchSound=null,t.pauseMenu=null})},i.prototype.onDayEnd=function(){SoundManager.getInstance().stopMusicTrack(),SOManager.getInstance().save();var t=new HomeScreen;app.addScreen(t,App.ANIMATION_BLACKOUT,!0)},i.prototype.onSoundSwitch=function(){SOManager.getInstance().switchSound(),this.switchSound.text=SOManager.getInstance().soundButtonLabel,SOManager.getInstance().save()},i.prototype.showPickUp=function(){var t=new PIXI.Text("Pick up all the money!",Styles.PICKUP_GAME_END_MONEY);t.centered(),t.position.set(app.width/2,app.height/2-30),this.guiLayer.addChild(t);var e=this;t.alpha=0,this.pickupMoneyMessageTimeoutID=createjs.Tween.get(this).wait(4e3).call(function(){e.pickupMoneyMessageTimeoutID=createjs.Tween.get(t,{loop:!0}).to({alpha:1},100).wait(200).to({alpha:0},100).wait(200)})},t.GameScreen=i}(window),function(t,e){function i(){this.initialize()}i.prototype=Object.create(PIXI.Container.prototype),i.prototype.constructor=i,i.prototype.initialize=function(){PIXI.Container.call(this);var e=PIXI.Sprite.from(PIXI.Texture.WHITE);e.stretch(app.width,app.height),e.tint=9803157,this.addChild(e);var i=PIXI.Sprite.from("icberg");this.addChild(i);var n=PIXI.Sprite.from("penguin_holding_dish");n.scale.set(1.025),n.tint=0,n.alpha=.2,this.addChild(n);var a=PIXI.Sprite.from("penguin_holding_dish");if(this.addChild(a),a.x=-20,a.y=400,n.x=a.x,n.y=400,!Config.isWhiteLabel){var r=PIXI.Sprite.from("logo");r.anchor.set(1,1),r.x=app.width-10,r.y=app.height-10,r.fitTo(110,50),r.interactive=!0,r.buttonMode=!0,r.pointerup=function(){t.open(Config.logoURL,"_blank")},this.addChild(r)}var s=new PIXI.Text("PENGUIN",Styles.GAME_TITLE);this.addChild(s);var o=new PIXI.Text("DINER",Styles.GAME_TITLE);o.style.fill="#fecb00",this.addChild(o);s.x=(app.width-(s.width+o.width+10))/2,s.y=25,o.x=s.x+s.width+10,o.y=s.y,this.penguinShadow=n,this.penguin=a,this.setButtons(),this.btn3.visible=Config.trackHighscore,this.btn4.visible=Config.advertisePD2},i.prototype.animate=function(){var t=110;this.penguin.y=400,createjs.Tween.get(this.penguin).to({y:t},300);t=110;this.penguinShadow.y=400,createjs.Tween.get(this.penguinShadow).to({y:t},300)},i.prototype.setButtons=function(){var t=app.width+300,e=app.height/2,i=Math.degreesToRadians(3);this.btn1=this.createBtn("PLAY",t,e-20,26,Math.degreesToRadians(-7),this.onPlay),this.btn2=this.createBtn("INSTRUCTIONS",t,e+33,20.8,i,this.onInstructions),this.btn3=this.createBtn("HIGH SCORES",t,e+66,20.8,i,this.onHighScores),this.btn4=this.createBtn("PLAY PENGUIN DINER 2",t,e+99,20.8,i,this.onPlayPenguinDiner2)},i.prototype.createBtn=function(t,e,i,n,a,r){var s=new PIXI.Text(t,Styles.MENU_BTN);return s.style.fontSize=n,s.pointerup=r.bind(this),s.pointerover=this.btnHoverIn.bind(this),s.pointerout=this.btnHoverOut.bind(this),s.interactive=!0,s.buttonMode=!0,s.anchor.x=1,s.position.set(e,i),s.rotation=a||0,this.addChild(s),s},i.prototype.btnHoverIn=function(t){t.target.style.fill=16566528,SoundManager.getInstance().startSound("button_rollover",{volume:.1})},i.prototype.btnHoverOut=function(t){t.currentTarget&&(t.currentTarget.style.fill=14886181)},i.prototype.onPlay=function(){AdManager.getInstance().showAd(),SOManager.getInstance().getSave()?this.showContunuePopup():app.addScreen(new StoryScreen,App.ANIMATION_BLACKOUT),SoundManager.getInstance().startSound("click_game_object")},i.prototype.onInstructions=function(){var t=new InstructionsScreen;app.addScreen(t,App.ANIMATION_BLACKOUT),SoundManager.getInstance().startSound("click_game_object")},i.prototype.onHighScores=function(){console.log("on highscores"),SoundManager.getInstance().startSound("click_game_object")},i.prototype.onPlayPenguinDiner2=function(){console.log("play penguin diner 2"),SoundManager.getInstance().startSound("click_game_object")},i.prototype.onUpdate=function(t){},i.prototype.animateBtn=function(t,e){var i=app.width-20,n=createjs.Ease.getElasticOut(1,.4);t.x=i+250,createjs.Tween.get(t).wait(e).to({x:i},800,n)},i.prototype.onShow=function(){this.animateBtn(this.btn1,240),this.animateBtn(this.btn2,480),this.animateBtn(this.btn3,720),this.animateBtn(this.btn4,960),this.animate(),console.log("home screen"),SoundManager.getInstance().startMusicTrack("splash_screen_track")},i.prototype.onHide=function(){SoundManager.getInstance().stopMusicTrack()},i.prototype.showContunuePopup=function(){this.popup=new PIXI.NineSlicePlane(PIXI.Texture.from("popup"),60,60,60,60),this.popup.width=220,this.popup.height=90,this.popup.position.set(app.width/2-this.popup.width/2,100),this.addChild(this.popup);var t=new PIXI.Text("DO YOU WANT TO RESUME\nYOUR PREVIOUS GAME",Styles.POPUP_LABEL);t.position.set(this.popup.width/2,30),t.centered(),this.popup.addChild(t);var e=new PIXI.Text("YES",Styles.MENU_BTN);e.style.fontSize=18,e.centered(),e.pointerup=this.onContinueYes.bind(this),e.pointerover=this.btnHoverIn.bind(this),e.pointerout=this.btnHoverOut.bind(this),e.interactive=!0,e.buttonMode=!0,e.position.set(this.popup.width/2-40,65),this.popup.addChild(e);var i=new PIXI.Text("NO",Styles.MENU_BTN);i.centered(),i.style.fontSize=18,i.pointerup=this.onContinueNo.bind(this),i.pointerover=this.btnHoverIn.bind(this),i.pointerout=this.btnHoverOut.bind(this),i.interactive=!0,i.buttonMode=!0,i.position.set(this.popup.width/2+40,65),this.popup.addChild(i)},i.prototype.onContinueNo=function(){this.popup.removeFromParent(),SOManager.getInstance().reset();var t=new StoryScreen;app.addScreen(t,App.ANIMATION_BLACKOUT),SoundManager.getInstance().startSound("click_game_object")},i.prototype.onContinueYes=function(){this.popup.removeFromParent();var t=new GameScreen;app.addScreen(t,App.ANIMATION_BLACKOUT),SoundManager.getInstance().startSound("click_game_object")},t.HomeScreen=i}(window),function(t,e){function i(t){this.initialize(t)}i.MODE_NORMAL=0,i.MODE_PLAY=1,i.prototype=Object.create(PIXI.Container.prototype),i.prototype.constructor=i,i.prototype.initialize=function(t){this.mode=t||i.MODE_NORMAL,PIXI.Container.call(this);var e=new PIXI.Sprite;e.texture=PIXI.Texture.WHITE,e.stretch(app.width,app.height),this.addChild(e),this.back=PIXI.Sprite.from("upgrades_background"),this.back.x=-2,this.addChild(this.back),this.tutImages=["tut1","tut2","tut3_5","tut4","tut3_5","tut6"],this.index=0,this.instructionsCaption=new PIXI.Text("INSTRUCTIONS",Styles.UPGRADE_BANK_LABEL),this.instructionsCaption.style.fontSize=32,this.instructionsCaption.position.set(20,35),this.instructionsCaption.anchor.set(0,.5),this.addChild(this.instructionsCaption);var n=PIXI.Sprite.from("tut_numbering");n.centered(),n.position.set(270,35),this.addChild(n),this.numberLabel=new PIXI.Text("3",Styles.TUT_NUMBER),this.numberLabel.position.set(270,35),this.numberLabel.anchor.set(.5,.5),this.addChild(this.numberLabel);var a=new PIXI.NineSlicePlane(PIXI.Texture.from("popup"),30,30,30,30);a.width=408,a.height=275,a.position.set(16,66),this.addChild(a),this.tutorialImage=PIXI.Sprite.from("tut1"),this.tutorialImage.position.set(20,70),this.addChild(this.tutorialImage),this.popup=new PIXI.NineSlicePlane(PIXI.Texture.from("popup"),30,30,30,30),this.popup.width=250,this.popup.height=150,this.popup.position.set(340,10),this.addChild(this.popup),this.texts=["Seat your customer.\n\nCustomers arrive and wait\nto be seated. Click on a\nwaiting penguin to select\nthem and then click on an\navailable table to seat\nthem.",'Take their order.\n\nA customer will say "hello"\nonce he/she is ready to\norder. Click on the\ncustomer or table to take\ntheir order.',"Serve customer(s).\n\nWhen the order is ready\nfood appears in the food\narea! Select the dish\n(Penny can carry two at a\ntime), then click on the\ncustomer or table to\nserve them.","Collect Penny's money.\n\nOnce the customer is done,\nclick the table to pick up\ncash and clear the table.\nNow this table is ready for\nthe next customer!","Time: Keep an eye on the\nclock. You've only got\nuntil 9.00pm to make as\nmuch money as you can!\n\nTrash can:  If an angry\ncustomer runs off you can\ntrash their unwanted\ndishes\n\nExtra tip:\nServe customers\nquickly! Keeping them happy\nearns Penny bigger tips and\nhelps her reach daily\ntargets!","Upgrade shop.\n\nVisit this at the end of the\nday. Use Penny's profits to\nbuy useful upgrades and\nhelp her earn even more\nmoney!"];var r=new PIXI.Text("",Styles.POPUP_LABEL);r.position.set(20,20),this.popup.addChild(r),this.tutorialLabel=r,this.popup.height=r.height+40;var s=new PIXI.Text("NEXT",Styles.MENU_BTN);s.style.fontSize=23,s.pointerup=this.onNext.bind(this),s.pointerover=this.btnHoverIn.bind(this),s.pointerout=this.btnHoverOut.bind(this),s.interactive=!0,s.buttonMode=!0,s.position.set(520,360),this.addChild(s);var o=new PIXI.Text("PREVIOUS",Styles.MENU_BTN);o.style.fontSize=23,o.pointerup=this.onPrevious.bind(this),o.pointerover=this.btnHoverIn.bind(this),o.pointerout=this.btnHoverOut.bind(this),o.interactive=!0,o.buttonMode=!0,o.position.set(20,360),this.addChild(o);var h=new PIXI.Text("MAIN MENU",Styles.MENU_BTN);h.anchor.x=.5,h.style.fontSize=23,h.pointerup=this.onMenu.bind(this),h.pointerover=this.btnHoverIn.bind(this),h.pointerout=this.btnHoverOut.bind(this),h.interactive=!0,h.buttonMode=!0,h.position.set(app.width/2,360),this.addChild(h),this.nextBtn=s,this.previousBtn=o,this.menuBtn=h,Config.isWhiteLabel||(this.logo=PIXI.Sprite.from("logo"),this.logo.position.set(185,75),this.logo.fitTo(80,30),this.addChild(this.logo)),this.setTutorial(),this.mode===i.MODE_PLAY&&(this.menuBtn.text="SKIP"),Config.isWhiteLabel||this.logo.bringToFront()},i.prototype.setTutorial=function(){this.numberLabel.text=(this.index+1).toString(),this.tutorialImage.texture=PIXI.utils.TextureCache[this.tutImages[this.index]],this.tutorialLabel.text=this.texts[this.index],this.popup.height=this.tutorialLabel.height+40,this.previousBtn.visible=0!==this.index,this.nextBtn.visible=5!==this.index,this.mode===i.MODE_PLAY&&(5===this.index?(this.nextBtn.visible=!0,this.nextBtn.text="PLAY"):this.nextBtn.text="NEXT"),Config.isWhiteLabel||(this.logo.visible=5!==this.index),this.tutorialImage.scale.set(.5)},i.prototype.onPrevious=function(t){this.index--,this.index=Math.clamp(this.index,0,this.tutImages.length-1),this.setTutorial(),SoundManager.getInstance().startSound("click_game_object")},i.prototype.onMenu=function(t){if(this.mode===i.MODE_NORMAL)app.goBack();else{var e=new MapScreen;app.addScreen(e,App.ANIMATION_BLACKOUT,!0)}SoundManager.getInstance().startSound("click_game_object")},i.prototype.onNext=function(t){if("PLAY"===this.nextBtn.text){var e=new MapScreen;app.addScreen(e,App.ANIMATION_BLACKOUT,!0)}this.index++,this.index=Math.clamp(this.index,0,this.tutImages.length-1),this.setTutorial(),SoundManager.getInstance().startSound("click_game_object")},i.prototype.btnHoverIn=function(t){t.target.style.fill=16566528,SoundManager.getInstance().startSound("button_rollover",{volume:.1})},i.prototype.btnHoverOut=function(t){t.currentTarget&&(t.currentTarget.style.fill=14886181)},i.prototype.onUpdate=function(t){},i.prototype.onShow=function(){},i.prototype.onHide=function(){},t.InstructionsScreen=i}(window),function(t,e){function i(t){this.initialize(t)}i.prototype=Object.create(PIXI.Container.prototype),i.prototype.constructor=i,i.prototype.initialize=function(t){PIXI.Container.call(this);var e=PIXI.Sprite.from(PIXI.Texture.WHITE);e.stretch(t.width,t.height),e.tint=15263976,this.addChild(e),Config.isWhiteLabel||(this.logo=PIXI.Sprite.from("logo"),this.logo.centered(),this.logo.position.set(t.width/2,t.height/2-20),this.logo.fitTo(150,150),this.addChild(this.logo)),this.loadingBar=new LoadingBar({backgroundWidth:200,backgroundHeight:10,backgroundTint:16777215,foregroundWidth:198,foregroundHeight:8,foregroundTint:12902,offsetX:1,offsetY:1}),this.loadingBar.position.set(t.width/2-100,280),this.addChild(this.loadingBar)},i.prototype.onUpdate=function(t){},i.prototype.onShow=function(){},i.prototype.onHide=function(){},t.LoadingScreen=i}(window),function(t,e){function i(){this.initialize()}i.prototype=Object.create(PIXI.Container.prototype),i.prototype.constructor=i,i.prototype.initialize=function(){PIXI.Container.call(this),SoundManager.getInstance().startMusicTrack("storm_loop");var t=new PIXI.Sprite;t.texture=PIXI.Texture.WHITE,t.stretch(app.width,app.height),this.addChild(t),this.mapSky=PIXI.Sprite.from("map_sky"),this.addChild(this.mapSky),this.hills=PIXI.Sprite.from("hills_0"),this.hills.y=200,this.hills.x=230,this.addChild(this.hills),this.frontLayout=PIXI.Sprite.from("map_front_1"),this.frontLayout.y=70,this.addChild(this.frontLayout),this.stage1=PIXI.Sprite.from("map_hill_cafe"),this.stage1.position.set(60,10),this.addChild(this.stage1);var e=new PIXI.Text("HILL TOP CAFE",Styles.MAP_STAGE_LABEL);e.centered(),e.position.set(50,56),this.stage1.addChild(e),this.stage2=PIXI.Sprite.from("map_ice_rink_cafe"),this.stage2.position.set(245,210),this.addChild(this.stage2);var i=new PIXI.Text("ICE RINK CAFE",Styles.MAP_STAGE_LABEL);i.centered(),i.position.set(46,15),this.stage2.addChild(i),this.stage3=PIXI.Sprite.from("map_iceberg_cafe"),this.stage3.position.set(505,220),this.addChild(this.stage3);var n=new PIXI.Text("ICEBERG CAFE",Styles.MAP_STAGE_LABEL);n.centered(),n.position.set(50,15),this.stage3.addChild(n),this.penny=new Hero,this.penny.scale.set(.6),this.penny.setAnimation("side"),this.addChild(this.penny),this.popup=new PIXI.NineSlicePlane(PIXI.Texture.from("popup"),15,15,15,15),this.popup.width=350,this.popup.height=150,this.popup.position.set(240,10),this.addChild(this.popup);var a="Well done on a great job!\n";a+="\n",a+="The lovely ice rink cafe at the bottom\n",a+="of the hill has offered Penny a job.\n",a+="It's a great chance to earn even more\n",a+="cash to help her on her way home. Good\n",a+="luck!";var r="YOU'RE BRILLIANT!\n";r+="\n",r+="Great news! There's a ship heading in\n",r+="the direction of Penny's home.\n",r+="Help her earn the rest of the money\n",r+="for the ticket at the iceberg cafe!\n",r+="You're nearly there!\n";var s=new PIXI.Text("",Styles.POPUP_LABEL);s.position.set(20,20),this.popup.addChild(s);var o=[{x:50,y:110},{x:110,y:70},{x:290,y:290},{x:550,y:290}],h=null;this.travelTime=1200,SOManager.getInstance().currentStage<=0?(this.popup.visible=!1,this.penny.position.set(o[0].x,o[0].y),h=o[1]):1===SOManager.getInstance().currentStage?(s.text=a,this.penny.position.set(o[1].x,o[1].y),h=o[2],this.travelTime=2e3):2===SOManager.getInstance().currentStage&&(s.text=r,this.penny.position.set(o[2].x,o[2].y),h=o[3],this.travelTime=2e3),this.toPoint=h;var l=new PIXI.Text("NEXT",Styles.MENU_BTN);l.style.fontSize=26,l.pointerup=this.onNext.bind(this),l.pointerover=this.btnHoverIn.bind(this),l.pointerout=this.btnHoverOut.bind(this),l.interactive=!0,l.buttonMode=!0,l.position.set(520,360),this.addChild(l)},i.prototype.onNext=function(t){SoundManager.getInstance().startSound("click_game_object"),t.target.interactive=!1;var e=createjs.Ease.cubicInOut;if(SOManager.getInstance().currentStage<=0)createjs.Tween.get(this.penny).to(this.toPoint,this.travelTime,e).wait(200).call(function(){var t=new GameScreen;app.addScreen(t,App.ANIMATION_BLACKOUT,!0)});else if(1===SOManager.getInstance().currentStage){var i=this.toPoint.x,n=this.toPoint.y;createjs.Tween.get(this.penny).to({x:i},1.2*this.travelTime).call(function(){var t=new GameScreen;app.addScreen(t,App.ANIMATION_BLACKOUT,!0)}),e=createjs.Ease.getPowInOut(1.5),createjs.Tween.get(this.penny).to({y:n},this.travelTime,e).wait(200)}else if(2===SOManager.getInstance().currentStage){createjs.Tween.get(this.penny).to(this.toPoint,this.travelTime,e).wait(200).call(function(){var t=new GameScreen;app.addScreen(t,App.ANIMATION_BLACKOUT,!0)});n=this.penny.y;createjs.Tween.get(this.penny,{overwrite:!0}).wait(.53*this.travelTime).to({y:n-40},200,createjs.Ease.cubicOut).to({y:n},200,createjs.Ease.cubicIn)}},i.prototype.btnHoverIn=function(t){t.target.style.fill=16566528,SoundManager.getInstance().startSound("button_rollover",{volume:.1})},i.prototype.btnHoverOut=function(t){t.currentTarget&&(t.currentTarget.style.fill=14886181)},i.prototype.onUpdate=function(t){},i.prototype.onShow=function(){},i.prototype.onHide=function(){},t.MapScreen=i}(window),function(t,e){function i(){this.initialize()}i.prototype=Object.create(PIXI.Container.prototype),i.prototype.constructor=i,i.prototype.initialize=function(){PIXI.Container.call(this),SoundManager.getInstance().startMusicTrack("storm_loop");var t=new PIXI.Sprite;t.texture=PIXI.Texture.WHITE,t.stretch(app.width,app.height),this.addChild(t),this.back=PIXI.Sprite.from("upgrades_background"),this.back.x=-2,this.addChild(this.back),this.logo=PIXI.Sprite.from("logo"),this.logo.position.set(app.width/2,210),this.logo.fitTo(120,60),this.logo.centered(),this.addChild(this.logo),this.popup=new PIXI.NineSlicePlane(PIXI.Texture.from("popup"),15,15,15,15),this.popup.width=500,this.popup.height=135,this.popup.position.set((app.width-this.popup.width)/2,20),this.addChild(this.popup);var e=new PIXI.Text("Thank you for playing Penguin Diner! Why not download the game on your device to continue playing?",Styles.POPUP_LABEL);e.style.fontSize=20,e.style.wordWrap=!0,e.style.align="center",e.style.wordWrapWidth=450,e.anchor.set(.5,.5),e.position.set(this.popup.width/2,this.popup.height/2),this.popup.addChild(e);var i=PIXI.Sprite.from("./assets/images/google-play-badge.png");i.pointerup=this.onPlayStore.bind(this),i.pointerover=this.btnHoverIn.bind(this),i.pointerout=this.btnHoverOut.bind(this),i.interactive=!0,i.buttonMode=!0,i.centered(),i.scale.set(.3),i.position.set(app.width/2,290),this.addChild(i);var n=PIXI.Sprite.from("./assets/images/apple-app-store-badge.png");n.pointerup=this.onAppStore.bind(this),n.pointerover=this.btnHoverIn.bind(this),n.pointerout=this.btnHoverOut.bind(this),n.interactive=!0,n.iosButtonMode=!0,n.centered(),n.scale.set(.3),n.position.set(app.width/2,350),this.addChild(n);var a=PIXI.Sprite.from("close_red");a.pointerup=function(){app.goBack()},a.interactive=!0,a.buttonMode=!0,a.centered(),a.scale.set(1),a.position.set(app.width-25,25),this.addChild(a)},i.prototype.onAppStore=function(e){t.open("https://apps.apple.com/in/app/penguin-diner-the-original/id962991930","_blank")},i.prototype.onPlayStore=function(e){t.open("https://play.google.com/store/apps/details?id=air.com.bigwigmedia.penguindiner&hl=en&gl=US","_blank")},i.prototype.btnHoverIn=function(t){SoundManager.getInstance().startSound("button_rollover",{volume:.1})},i.prototype.btnHoverOut=function(t){},i.prototype.onUpdate=function(t){},i.prototype.onShow=function(){},i.prototype.onHide=function(){},t.MobileScreen=i}(window),function(t,e){function i(){this.initialize()}i.prototype=Object.create(PIXI.Container.prototype),i.prototype.constructor=i,i.prototype.initialize=function(){PIXI.Container.call(this),SoundManager.getInstance().startMusicTrack("storm_loop");var t=new PIXI.Sprite;t.texture=PIXI.Texture.WHITE,t.stretch(app.width,app.height),this.addChild(t),this.mapSky=PIXI.Sprite.from("sky_yellow"),this.addChild(this.mapSky),this.hills=PIXI.Sprite.from("hills_0"),this.hills.y=200,this.hills.x=230,this.addChild(this.hills),this.frontLayout=PIXI.Sprite.from("map_front_1"),this.frontLayout.y=70,this.addChild(this.frontLayout);this.popup=new PIXI.NineSlicePlane(PIXI.Texture.from("popup"),60,60,60,60),this.popup.width=app.width-6,this.popup.height=80,this.popup.position.set(3,3),this.addChild(this.popup);var e="While on an antarctic trek, Penny the penguin lost her way and ended up\n";e+="stuck on top of an icy mountain. She needs to get back home to her\n",e+="family but shes completely broke. Shes just landed herself a job as\n",e+="a waitress at a local diner. Help her earn enough money to get her home";var i=new PIXI.Text("",Styles.POPUP_LABEL);i.position.set(5,10),this.popup.addChild(i),i.text=e;var n=new PIXI.Text("NEXT",Styles.MENU_BTN);n.style.fontSize=26,n.pointerup=this.onNext.bind(this),n.pointerover=this.btnHoverIn.bind(this),n.pointerout=this.btnHoverOut.bind(this),n.interactive=!0,n.buttonMode=!0,n.position.set(520,360),this.addChild(n),this.penguin=PIXI.Sprite.from("penguin_sad"),this.addChild(this.penguin),this.penguin.x=50,this.penguin.y=400},i.prototype.onNext=function(t){SoundManager.getInstance().startSound("click_game_object");var e=new InstructionsScreen(InstructionsScreen.MODE_PLAY);app.addScreen(e)},i.prototype.btnHoverIn=function(t){t.target.style.fill=16566528,SoundManager.getInstance().startSound("button_rollover",{volume:.1})},i.prototype.btnHoverOut=function(t){t.currentTarget&&(t.currentTarget.style.fill=14886181)},i.prototype.onUpdate=function(t){},i.prototype.onShow=function(){SoundManager.getInstance().startMusicTrack("storm_loop");var t=createjs.Ease.cubicOut;createjs.Tween.get(this.penguin).to({y:100},1200,t)},i.prototype.onHide=function(){},t.StoryScreen=i}(window),function(t,e){function i(){this.initialize()}i.prototype=Object.create(PIXI.Container.prototype),i.prototype.constructor=i,i.prototype.initialize=function(){PIXI.Container.call(this);var t=new PIXI.Sprite;t.texture=PIXI.Texture.WHITE,t.stretch(app.width,app.height),this.addChild(t),this.base=PIXI.Sprite.from("upgrades_background"),this.base.x=-2.5,this.addChild(this.base),this.upgrade_btn_0,this.upgrade_btn_1,this.upgrade_btn_2,this.upgrade_btn_3,this.upgrade_btn_4,this.upgrade_btn_5,this.upgrade_btn_6,this.upgrade_btn_7,this.upgrade_btn_8;for(var e=["skate","tv","seat"],i=0;i<9;i++){var n=new UpgradeItemButton;n.delegate=this,n.type=e[Math.floor(i/3)],n.typeIndex=i%3,n.setItemIcon(),n.upgradeType=n.type,this["upgrade_btn_"+i]=n,n.x=210+i%3*150,n.y=90+100*Math.floor(i/3),this.addChild(n)}this.upgradesCaption=new PIXI.Text("UPGRADES",Styles.UPGRADE_BANK_LABEL),this.upgradesCaption.style.fontSize=32,this.upgradesCaption.position.set(10,10),this.upgradesCaption.anchor.set(0,0),this.addChild(this.upgradesCaption),this.skateCaption=new PIXI.Text("FASTER SKATES\nINCREASE PENNY'S\nSPEED",Styles.BANK_ITEMS_CAPTION),this.skateCaption.position.set(10,88),this.skateCaption.anchor.set(0,.5),this.addChild(this.skateCaption),this.tvCaption=new PIXI.Text("BETTER TVS\nINCREASE PATIENCE\nOF CUSTOMERS",Styles.BANK_ITEMS_CAPTION),this.tvCaption.position.set(10,190),this.tvCaption.anchor.set(0,.5),this.addChild(this.tvCaption),this.seatCaption=new PIXI.Text("COMFIER SEATS\nMEAN MORE TIPS\nFOR PENNY",Styles.BANK_ITEMS_CAPTION),this.seatCaption.position.set(10,290),this.seatCaption.anchor.set(0,.5),this.addChild(this.seatCaption),this.bank_captions=new PIXI.Text("PENNYS BANK",Styles.UPGRADE_BANK_LABEL),this.bank_captions.position.set(10,app.height-25),this.bank_captions.anchor.set(0,.5),this.addChild(this.bank_captions),this.dolarSign=PIXI.Sprite.from("dolar_sign_blank"),this.dolarSign.anchor.set(0,.5),this.dolarSign.position.set(136,app.height-25),this.addChild(this.dolarSign),this.bank_tf=new PIXI.Text("",Styles.UPGRADE_BANK_LABEL),this.bank_tf.position.set(168,app.height-25),this.bank_tf.anchor.set(0,.5),this.addChild(this.bank_tf),this.bank_tf.text=SOManager.getInstance().totalProfit.toString(),this.notEnoughMoneyWarning=null,this.showUpgradeButtons(),this.back_btn=new PIXI.Text("BACK",Styles.MENU_BTN),this.back_btn.style.fontSize=26,this.back_btn.pointerup=this.onBack.bind(this),this.back_btn.pointerover=this.btnHoverIn.bind(this),this.back_btn.pointerout=this.btnHoverOut.bind(this),this.back_btn.interactive=!0,this.back_btn.buttonMode=!0,this.back_btn.position.set(520,360),this.addChild(this.back_btn)},i.prototype.showUpgradeButtons=function(){for(var t=0;t<=2;t++){var e=this["upgrade_btn_"+t],i=SOManager.getInstance().upgradeSkate+1;t<i?e.lockUpgradeItem(!0):t>i?e.lockUpgradeItem(!1):e.unlockUpgradeItem(),e=this["upgrade_btn_"+(t+3)],t<(i=SOManager.getInstance().upgradeTV+1)?e.lockUpgradeItem(!0):t>i?e.lockUpgradeItem(!1):e.unlockUpgradeItem(),e=this["upgrade_btn_"+(t+6)],t<(i=SOManager.getInstance().upgradeStool+1)?e.lockUpgradeItem(!0):t>i?e.lockUpgradeItem(!1):e.unlockUpgradeItem()}},i.prototype.onUpgradeBtn=function(t){this.onButtonClick(t)},i.prototype.onButtonClick=function(t){var e=t.target,i=GameData.UPGRADE_COST(e.upgradeTypeAndIndex);if(i>SOManager.getInstance().totalProfit){var n=new PIXI.Text("You don't have enough money\nto buy this item",Styles.PICKUP_GAME_END_MONEY);return n.centered(),n.position.set(app.width/2,app.height/2-30),this.addChild(n),createjs.Tween.get(n,{loop:2}).to({alpha:1},100).wait(200).to({alpha:0},100).wait(200),void SoundManager.getInstance().startSound("message_popup")}switch(t.target.filters=[],t.target.isRolling=!1,t.target.speed=0,SoundManager.getInstance().startSound("upgrade_buy"),e.upgradeType){case Upgrades.SEAT:SOManager.getInstance().upgradeStool+=1;break;case Upgrades.SKATE:SOManager.getInstance().upgradeSkate+=1;break;case Upgrades.TV:SOManager.getInstance().upgradeTV+=1}SOManager.getInstance().totalProfit-=i,this.bank_tf.text=SOManager.getInstance().totalProfit.toString(),this.showUpgradeButtons()},i.prototype.onBack=function(t){SoundManager.getInstance().startSound("click_game_object"),app.goBack()},i.prototype.btnHoverIn=function(t){t.target.style.fill=16566528,SoundManager.getInstance().startSound("button_rollover",{volume:.1})},i.prototype.btnHoverOut=function(t){t.currentTarget&&(t.currentTarget.style.fill=14886181)},i.prototype.onUpdate=function(t){},i.prototype.onShow=function(){},i.prototype.onHide=function(){},t.UpgradesScreen=i}(window),function(t,e){var i=null;function n(){this._soundEnabled=!0,this.musicTrack=null}Object.defineProperty(n,"soundEnabled",{get:function(){return this._soundEnabled},set:function(t){this._soundEnabled=t}}),n.getInstance=function(){return i||(i=new n),i},n.prototype.startSound=function(t,e){PIXI.sound.play(t,e)},n.prototype.startMusicTrack=function(t){return this.musicTrack!==t&&(this.musicTrack&&PIXI.sound.stop(this.musicTrack),this.musicTrack=t,PIXI.sound.play(t,{loop:!0}),!0)},n.prototype.stopMusicTrack=function(){this.musicTrack&&PIXI.sound.stop(this.musicTrack),this.musicTrack=null},n.prototype.soundEnabled=function(t){PIXI.sound.play(name,{loop:!0})},t.SoundManager=n}(window),function(t,e){function i(){throw"Can't initialize"}i.GAME_TITLE={fontFamily:"geek_a_byte",fontSize:60,fill:"#949494",stroke:"#000000",strokeThickness:5,dropShadow:!0,dropShadowAlpha:.1,dropShadowAngle:1.6,dropShadowBlur:8,dropShadowDistance:8,padding:10},i.MENU_BTN={fontFamily:"geek_a_byte",fontSize:26,fill:"#e32525",strokeThickness:3,padding:10},i.GOAL_LABEL={fontFamily:"arial",fontSize:15,fill:"#ff9900",align:"right",padding:10},i.SCORE_LABEL={fontFamily:"arial",fontSize:15,fill:"#00ff00",align:"right",padding:10},i.RESULT_LABEL={fontFamily:"letter_o_mattic",fontSize:15,fill:"#ffffff",align:"right",strokeThickness:3,stroke:"#000000",padding:10},i.RESULT_BTN={fontFamily:"geek_a_byte",fontSize:22,fill:"#dd2a24",strokeThickness:3,padding:10},i.DAY_RESULT_BTN={fontFamily:"geek_a_byte",fontSize:23,fill:"#dd2a24",strokeThickness:3,padding:10},i.RESULT_BTN_BRIGHT={fontFamily:"geek_a_byte",fontSize:22,fill:"#fd2930",strokeThickness:3,padding:10},i.RESULT_HOVER={fontFamily:"geek_a_byte",fontSize:22,fill:"#f8ca05",strokeThickness:3,padding:10},i.PROGRESS_SAVE_LABEL={fontFamily:"letter_o_mattic",fontSize:12,fill:"#000000",padding:10},i.TIP_LABEL={fontFamily:"letter_o_mattic",fontSize:9,fill:"#000000",align:"left",wordWrap:!0,wordWrapWidth:92,padding:10},i.POPUP_LABEL={fontFamily:"letter_o_mattic",fontSize:12,fill:"#000000",align:"left",padding:10},i.MAP_STAGE_LABEL={fontFamily:"geek_a_byte",fontSize:13,fill:"#000000",align:"left",padding:10},i.UPGRADE_BANK_LABEL={fontFamily:"geek_a_byte",fontSize:20,fill:"#ffffff",align:"right",strokeThickness:3,stroke:"#4f5f6a",padding:10},i.BANK_ITEMS_CAPTION={fontFamily:"letter_o_mattic",fontSize:12,fill:"#000000",align:"left",padding:10},i.DAY_START={fontFamily:"arial_black",fontSize:20,fill:"#ffffff",strokeThickness:3,stroke:"#4f5f6a",padding:10,dropShadow:!0,dropShadowAlpha:.5,dropShadowAngle:1.6,dropShadowBlur:5,dropShadowDistance:3},i.TUT_NUMBER={fontFamily:"geek_a_byte",fontSize:27,fill:"#d2dfe6",padding:10},i.PICKUP_MONEY={fontFamily:"arial",fontSize:22,fill:"#019901",strokeThickness:3,stroke:"#ffffff",padding:10},i.PICKUP_GAME_END_MONEY={padding:10,fontFamily:"arial_black",fontSize:18,fill:"#edf8fc",strokeThickness:2,stroke:"#43565d",dropShadow:!0,dropShadowAlpha:.5,dropShadowAngle:1.6,dropShadowBlur:5,dropShadowDistance:3,align:"center"},i.UFO={fontFamily:"arial",fontSize:7,fill:"#ffffff",lineHeight:7,padding:10},t.Styles=i}(window),function(t,e){function i(){this.initialize()}i.prototype.initialize=function(){},i.formattedCurrency=function(t){var e;t<0?(t=-t,e=!0):e=!1;for(var i=t.toString(),n="",a=0,r=i.length-1;r>=0;r--)n=i.charAt(r)+n,3===++a&&r>0&&(a=0,n=","+n);return e?"-$"+n:"$"+n},t.Utils=i}(window);